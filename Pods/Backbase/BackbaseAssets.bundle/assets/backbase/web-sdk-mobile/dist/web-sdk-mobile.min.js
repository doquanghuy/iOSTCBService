/**
 * Backbase Web SDK for Android and iOS webviews - Copyright Â© 2020 Backbase B.V - All Rights Reserved
 * Version 6.0.0
 * http://www.backbase.com
 */
!function e(t,r,n){function o(a,s){if(!r[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var l=r[a]={exports:{}};t[a][0].call(l.exports,function(e){var r=t[a][1][e];return o(r?r:e)},l,l.exports,e,t,r,n)}return r[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(e,t,r){},{}],2:[function(e,t,r){"use strict";function n(e){if("undefined"==typeof e||null===e)return e;if(Array.isArray(e))return e.slice();if("object"==typeof e){var t={};return Object.keys(e).forEach(function(r){t[r]=e[r]}),t}return e}function o(e,t){var r=e.split("\n");r[0]&&r[0].indexOf(y)>=0&&r.shift();var n=r[t],o=null;if(n){var i=/^\s*(at|.*@)\s*(.+)?$/.exec(n);o=Array.isArray(i)&&i[2]?i[2]:n}return o}function i(e,t){t||(t="    ");var r=e.split(/\r?\n/g);return t+r.join("\n"+t)}function a(e,t){if(t){if(_[t])return;_[t]=!0}console.error(e+"\n")}function s(e){return _[e]}function c(){}function u(e){e=e||{},this.logByLevel=!!e.logByLevel}function l(e){var t="string"==typeof e?O[e.toLowerCase()]:e;return t}function p(e,t,r){if(!(this instanceof p))return new p(e,t);var o;if(void 0!==t&&(o=e,e=t,!(o instanceof p)))throw new TypeError("invalid Logger creation: do not pass a second arg");if(!e)throw new TypeError("options (object) is required");if(o){if(e.name)throw new TypeError("invalid options.name: child cannot set logger name")}else if(!e.name)throw new TypeError("options.name (string) is required");if(e.stream&&e.streams)throw new TypeError('cannot mix "streams" and "stream" options');if(e.streams&&!Array.isArray(e.streams))throw new TypeError("invalid options.streams: must be an array");if(e.serializers&&("object"!=typeof e.serializers||Array.isArray(e.serializers)))throw new TypeError("invalid options.serializers: must be an object");var i,a,s;if(o&&r){this._isSimpleChild=!0,this._level=o._level,this.streams=o.streams,this.serializers=o.serializers,this.src=o.src,i=this.fields={};var u=Object.keys(o.fields);for(s=0;s<u.length;s++)a=u[s],i[a]=o.fields[a];var l=Object.keys(e);for(s=0;s<l.length;s++)a=l[s],i[a]=e[a]}else{var f=this;if(o){for(this._level=o._level,this.streams=[],s=0;s<o.streams.length;s++){var h=n(o.streams[s]);h.closeOnExit=!1,this.streams.push(h)}this.serializers=n(o.serializers),this.src=o.src,this.fields=n(o.fields),e.level&&this.level(e.level)}else this._level=Number.POSITIVE_INFINITY,this.streams=[],this.serializers=null,this.src=!1,this.fields={};e.stream?f.addStream({type:"stream",stream:e.stream,closeOnExit:!1,level:e.level}):e.streams?e.streams.forEach(function(t){f.addStream(t,e.level)}):o&&e.level?this.level(e.level):o||f.addStream({type:"raw",stream:new c,closeOnExit:!1,level:e.level}),e.serializers&&f.addSerializers(e.serializers),e.src&&(this.src=!0),i=n(e),delete i.stream,delete i.level,delete i.streams,delete i.serializers,delete i.src,this.serializers&&this._applySerializers(i),Object.keys(i).forEach(function(e){f.fields[e]=i[e]})}}function f(e){return function(){function t(t){var u;t[0]instanceof Error?(i={err:r.serializers&&r.serializers.err?r.serializers.err(t[0]):p.stdSerializers.err(t[0])},u={err:!0},c=1===t.length?[i.err.message]:Array.prototype.slice.call(t,1)):"object"!=typeof t[0]&&null!==t[0]||Array.isArray(t[0])?(i=null,c=Array.prototype.slice.call(t)):(i=t[0],c=1===t.length&&i.err&&i.err instanceof Error?[i.err.message]:Array.prototype.slice.call(t,1));var l=n(r.fields);l.level=e;var f=i?n(i):null;if(f&&(r.serializers&&r._applySerializers(f,u),Object.keys(f).forEach(function(e){l[e]=f[e]})),l.levelName=A[e],l.msg=c.length?b.apply(r,c):"",l.time||(l.time=new Date),r.src&&!l.src)try{throw new Error(y)}catch(h){var d=o(h.stack,2);d||s("src")||a("Unable to determine src line info","src"),l.src=d||""}return l.v=m,l}var r=this,i=null,c=arguments,u=null;return 0===arguments.length?this._level<=e:void(this._level>e||(u=t(c),this._emit(u)))}}function h(e){var t=e.stack||e.toString();if(e.cause&&"function"==typeof e.cause){var r=e.cause();r&&(t+="\nCaused by: "+h(r))}return t}function d(){var e=[];return function(t,r){return r&&"object"==typeof r?-1!==e.indexOf(r)?"[Circular]":(e.push(r),r):r}}var g="0.4.0",m=0,y="call-stack-error",v=function(e){if("undefined"==typeof e)return"undefined";if(null===e)return"null";if(Array.isArray(e)){var t=e.map(function(e){return v(e)});return"[ "+t.join(", ")+" ]"}return"object"==typeof e?JSON.stringify(e):"function"==typeof e?"[Function: "+e.name+"]":"boolean"==typeof e||"number"==typeof e?e:"'"+e.toString()+"'"},b=function(e){if("string"!=typeof e){for(var t=new Array(arguments.length),r=0;r<arguments.length;r++)t[r]=v(arguments[r]);return t.join(" ")}for(var n=/%[sdj%]/g,o=1,i=arguments,a=i.length,s=String(e).replace(n,function(e){if("%%"===e)return"%";if(o>=a)return e;switch(e){case"%s":return String(i[o++]);case"%d":return Number(i[o++]);case"%j":try{return JSON.stringify(i[o++])}catch(t){return"[Circular]"}break;default:return e}}),c=i[o];a>o;c=i[++o])s+=" "+c;return s},_={};c.prototype.write=function(e){e.level<E?console.log(e):e.level<S?console.info(e):e.level<k?console.warn(e):console.error(e),e.err&&e.err.stack&&console.error(e.err.stack),e.obj&&console.log(e.obj)},u.prototype.write=function(e){function t(e,t){return Array(t+1-(e+"").length).join("0")+e}var r,n,o="color: DimGray",i="color: SteelBlue",a="color: DimGray; font-style: italic; font-size: 0.9em",s=e.childName?e.name+"/"+e.childName:e.name,c=A[e.level],u=(Array(6-c.length).join(" ")+c).toUpperCase();this.logByLevel?(e.level===w?c="debug":e.level===P&&(c="error"),n="function"==typeof console[c]?console[c]:console.log):n=console.log,r=e.level<x?"color: DeepPink":e.level<E?"color: GoldenRod":e.level<S?"color: DarkTurquoise":e.level<k?"color: Purple":e.level<P?"color: Crimson":"color: Black";var l=[];l.push("[%s:%s:%s:%s] %c%s%c: %s: %c%s %c%s"),l.push(t(e.time.getHours(),2)),l.push(t(e.time.getMinutes(),2)),l.push(t(e.time.getSeconds(),2)),l.push(t(e.time.getMilliseconds(),4)),l.push(r),l.push(u),l.push(o),l.push(s),l.push(i),l.push(e.msg),e.src&&(l.push(a),l.push(e.src)),n.apply(console,l),e.err&&e.err.stack&&n.call(console,"%c%s,",r,e.err.stack),e.obj&&n.call(console,e.obj)};var w=10,x=20,E=30,S=40,k=50,P=60,O={trace:w,debug:x,info:E,warn:S,error:k,fatal:P},A={};Object.keys(O).forEach(function(e){A[O[e]]=e}),p.prototype.addStream=function(e,t){var r=this;null!==t&&void 0!==t||(t=E),e=n(e),e.type="raw",e.level?e.level=l(e.level):e.level=l(t),e.level<r._level&&(r._level=e.level),e.closeOnExit||(e.closeOnExit=!1),r.streams.push(e),delete r.haveNonRawStreams},p.prototype.addSerializers=function(e){var t=this;t.serializers||(t.serializers={}),Object.keys(e).forEach(function(r){var n=e[r];if("function"!=typeof n)throw new TypeError(b('invalid serializer for "%s" field: must be a function',r));t.serializers[r]=n})},p.prototype.child=function(e,t){return new this.constructor(this,e||{},t)},p.prototype.level=function(e){if(void 0===e)return this._level;for(var t=l(e),r=this.streams.length,n=0;r>n;n++)this.streams[n].level=t;this._level=t},p.prototype.levels=function(e,t){if(void 0===e)return this.streams.map(function(e){return e.level});var r;if("number"==typeof e){if(r=this.streams[e],void 0===r)throw new Error("invalid stream index: "+e)}else{for(var n=this.streams.length,o=0;n>o;o++){var i=this.streams[o];if(i.name===e){r=i;break}}if(!r)throw new Error(b('no stream with name "%s"',e))}if(void 0===t)return r.level;var a=l(t);r.level=a,a<this._level&&(this._level=a)},p.prototype._applySerializers=function(e,t){var r=this;Object.keys(this.serializers).forEach(function(n){if(!(void 0===e[n]||t&&t[n]))try{e[n]=r.serializers[n](e[n])}catch(o){a(b('bunyan: ERROR: Exception thrown from the "%s" Bunyan serializer. This should never happen. This is a bugin that serializer function.\n%s',n,o.stack||o)),e[n]=b('(Error in Bunyan log "%s" serializer broke field. See stderr for details.)',n)}})},p.prototype._emit=function(e,t){var r;if(void 0===this.haveNonRawStreams)for(this.haveNonRawStreams=!1,r=0;r<this.streams.length;r++)if(!this.streams[r].raw){this.haveNonRawStreams=!0;break}var n;if(t||this.haveNonRawStreams)try{n=JSON.stringify(e,d())+"\n"}catch(o){var s=o.stack.split(/\n/g,2).join("\n");a('bunyan: ERROR: Exception in `JSON.stringify(rec)`. You can install the "safe-json-stringify" module to have Bunyan fallback to safer stringification. Record:\n'+i(b("%s\n%s",e,o.stack)),s),n=b("(Exception in JSON.stringify(rec): %j. See stderr for details.)\n",o.message)}if(t)return n;var c=e.level;for(r=0;r<this.streams.length;r++){var u=this.streams[r];u.level<=c&&u.stream.write(e)}return n},p.prototype.trace=f(w),p.prototype.debug=f(x),p.prototype.info=f(E),p.prototype.warn=f(S),p.prototype.error=f(k),p.prototype.fatal=f(P),p.stdSerializers={},p.stdSerializers.err=function(e){if(!e||!e.stack)return e;var t={message:e.message,name:e.name,stack:h(e),code:e.code,signal:e.signal};return t},t.exports=p,t.exports.TRACE=w,t.exports.DEBUG=x,t.exports.INFO=E,t.exports.WARN=S,t.exports.ERROR=k,t.exports.FATAL=P,t.exports.resolveLevel=l,t.exports.levelFromName=O,t.exports.nameFromLevel=A,t.exports.VERSION=g,t.exports.LOG_VERSION=m,t.exports.createLogger=function(e){return new p(e)},t.exports.safeCycles=d,t.exports.ConsoleFormattedStream=u,t.exports.ConsoleRawStream=c},{}],3:[function(e,t,r){"use strict";function n(e,t,r){var n="";if(e=parseInt(e,10),t=parseInt(t,10),isNaN(e)||isNaN(t))return"";var o,i=e>t?-1:1,a=Math.abs(t-e)+1;r.data&&(o=b.createFrame(r.data));for(var s=0;a>s;s++)o&&(o.index=e+s*i,o.from=e,o.to=t),n+=r.fn(this,{data:o});return n}function o(e,t){return this.preferences?t.fn(this.preferences[e]):void 0}function i(e){if(this.preferences){var t=this.preferences[e];return t?t.value:null}return null}function a(e,t){return Math.floor(parseFloat(e)/parseFloat(t))}function s(e,t){return e==t}function c(){for(var e=Array.prototype.slice.call(arguments),t=e[e.length-1],r=e.slice(0,e.length-1),n=0;n<r.length;n++)if(this.viewhints&&this.viewhints.indexOf(r[n])>=0)return t.fn(this);return t.inverse(this)}function u(e){var t={designmode:["designModeOnly"],role:["admin","manager","user","none"],input:["text-input","checkbox","select-one"],order:[],options:[]},r=this.viewhints;if(r&&r.length&&t[e]){var n=e.length,o=r.filter(function(r){return-1!==t[e].indexOf(r)||r.slice(0,n)===e})[0];if(o&&o.slice(0,n)===e){var i=o.slice(n,n+1);if("order"!==e||"-"!==i&&"="!==i)o="="===i?o.slice(n+1):void 0;else{var a=o.slice(n+1),s=parseFloat(a);isNaN(s)||(a=s),o=a}}return"designmode"===e&&(o=!!o),o}}function l(e,t){var r="";if(!e||"string"!=typeof e)return r;var n=t.data&&t.data.options&&t.data.options[e];if(!Array.isArray(n))return r;var o=n.length-1;return r=n.reduce(function(e,r,n){var i={index:n,first:0===n,last:n===o};return e+=t.fn(r,{data:i})},"")}function p(){return Array.prototype.slice.call(arguments,0,arguments.length-1).some(function(e){return!!e})}function f(){return Array.prototype.slice.call(arguments,0,arguments.length-1).every(function(e){return!!e})}function h(e){return!e}function d(e,t){var r=t.data;return r.cxpConfig?r.cxpConfig[e]:void 0}function g(e){var t=this.viewmodes||[],r=e?e.toLowerCase():"";return t.indexOf(r)>-1}function m(){return this.viewmodes&&this.viewmodes.length?this.viewmodes[0]:"none"}function y(e){var t=this.preferences,r=Object.keys(t).length>0&&this.securityProfile&&_[this.securityProfile]>=_.CONTRIBUTOR&&Object.keys(t).some(function(e){return t[e].viewhints&&t[e].viewhints.length>0});return r?e.fn(this):e.inverse(this)}function v(e,t){if("string"!=typeof e)return[];var r=new RegExp(t);return"string"!=typeof t&&(r=/\s*,+\s*|\s+/g),e.trim().split(r)}var b=e("handlebars/dist/handlebars.min"),_={ADMIN:16,CREATOR:8,COLLABORATOR:4,CONTRIBUTOR:2,CONSUMER:1,NONE:0};t.exports={range:n,withPreference:o,getPreferenceValue:i,divide:a,equal:s,hasViewHint:c,getViewHint:u,eachOption:l,or:p,and:f,not:h,getConfig:d,hasViewmode:g,currentViewmode:m,allowEdit:y,split:v}},{"handlebars/dist/handlebars.min":27}],4:[function(e,t,r){"use strict";e("./lib/locales"),r=t.exports=e("./lib/handlebars-intl")},{"./lib/handlebars-intl":6,"./lib/locales":1}],5:[function(e,t,r){"use strict";r["default"]={locale:"en",pluralRuleFunction:function(e,t){var r=String(e).split("."),n=!r[1],o=Number(r[0])==e,i=o&&r[0].slice(-1),a=o&&r[0].slice(-2);return t?1==i&&11!=a?"one":2==i&&12!=a?"two":3==i&&13!=a?"few":"other":1==e&&n?"one":"other"},fields:{year:{displayName:"Year",relative:{0:"this year",1:"next year","-1":"last year"},relativeTime:{future:{one:"in {0} year",other:"in {0} years"},past:{one:"{0} year ago",other:"{0} years ago"}}},month:{displayName:"Month",relative:{0:"this month",1:"next month","-1":"last month"},relativeTime:{future:{one:"in {0} month",other:"in {0} months"},past:{one:"{0} month ago",other:"{0} months ago"}}},day:{displayName:"Day",relative:{0:"today",1:"tomorrow","-1":"yesterday"},relativeTime:{future:{one:"in {0} day",other:"in {0} days"},past:{one:"{0} day ago",other:"{0} days ago"}}},hour:{displayName:"Hour",relativeTime:{future:{one:"in {0} hour",other:"in {0} hours"},past:{one:"{0} hour ago",other:"{0} hours ago"}}},minute:{displayName:"Minute",relativeTime:{future:{one:"in {0} minute",other:"in {0} minutes"},past:{one:"{0} minute ago",other:"{0} minutes ago"}}},second:{displayName:"Second",relative:{0:"now"},relativeTime:{future:{one:"in {0} second",other:"in {0} seconds"},past:{one:"{0} second ago",other:"{0} seconds ago"}}}}}},{}],6:[function(e,t,r){"use strict";function n(e){o["default"].__addLocaleData(e),i["default"].__addLocaleData(e)}r.__addLocaleData=n;var o=e("intl-messageformat"),i=e("intl-relativeformat"),a=e("./helpers.js"),s=e("./en.js");n(s["default"]),r.registerWith=a.registerWith},{"./en.js":5,"./helpers.js":7,"intl-messageformat":12,"intl-relativeformat":21}],7:[function(e,t,r){"use strict";function n(e){function t(e,t){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn("{{"+e+"}} is deprecated, use: {{"+t.name+"}}"),t.apply(this,arguments)}}function r(e){if(!e.fn)throw new Error("{{#intl}} must be invoked as a block helper");var t=b(e.data),r=s.extend({},t.intl,e.hash);return t.intl=r,e.fn(this,{data:t})}function n(e,t){var r,n,o,i=t.data&&t.data.intl,a=e.split(".");try{for(o=0,n=a.length;n>o;o++)r=i=i[a[o]]}finally{if(void 0===r)throw new ReferenceError("Could not find Intl object: "+e)}return r}function o(e,t,r){e=new Date(e),g(e,"A date or timestamp must be provided to {{formatDate}}"),r||(r=t,t=null);var n=r.data.intl&&r.data.intl.locales,o=y("date",t,r);return u(n,o).format(e)}function i(e,t,r){e=new Date(e),g(e,"A date or timestamp must be provided to {{formatTime}}"),r||(r=t,t=null);var n=r.data.intl&&r.data.intl.locales,o=y("time",t,r);return u(n,o).format(e)}function a(e,t,r){e=new Date(e),g(e,"A date or timestamp must be provided to {{formatRelative}}"),r||(r=t,t=null);var n=r.data.intl&&r.data.intl.locales,o=y("relative",t,r),i=r.hash.now;return delete o.now,p(n,o).format(e,{now:i})}function f(e,t,r){m(e,"A number must be provided to {{formatNumber}}"),r||(r=t,t=null);var n=r.data.intl&&r.data.intl.locales,o=y("number",t,r);return c(n,o).format(e)}function h(e,t){t||(t=e,e=null);var r=t.hash;if(!e&&"string"!=typeof e&&!r.intlName)throw new ReferenceError("{{formatMessage}} must be provided a message or intlName");var o=t.data.intl||{},i=o.locales,a=o.formats;return!e&&r.intlName&&(e=n(r.intlName,t)),"function"==typeof e?e(r):("string"==typeof e&&(e=l(e,i,a)),e.format(r))}function d(){var e,t,r=[].slice.call(arguments).pop(),n=r.hash;for(e in n)n.hasOwnProperty(e)&&(t=n[e],"string"==typeof t&&(n[e]=_(t)));return new v(String(h.apply(this,arguments)))}function g(e,t){if(!isFinite(e))throw new TypeError(t)}function m(e,t){if("number"!=typeof e)throw new TypeError(t)}function y(e,t,r){var o,i=r.hash;return t?("string"==typeof t&&(o=n("formats."+e+"."+t,r)),o=s.extend({},o,i)):o=i,o}var v=e.SafeString,b=e.createFrame,_=e.Utils.escapeExpression,w={intl:r,intlGet:n,formatDate:o,formatTime:i,formatRelative:a,formatNumber:f,formatMessage:h,formatHTMLMessage:d,intlDate:t("intlDate",o),intlTime:t("intlTime",i),intlNumber:t("intlNumber",f),intlMessage:t("intlMessage",h),intlHTMLMessage:t("intlHTMLMessage",d)};for(var x in w)w.hasOwnProperty(x)&&e.registerHelper(x,w[x])}var o=e("intl-messageformat"),i=e("intl-relativeformat"),a=e("intl-format-cache"),s=e("./utils.js"),c=a["default"](Intl.NumberFormat),u=a["default"](Intl.DateTimeFormat),l=a["default"](o["default"]),p=a["default"](i["default"]);r.registerWith=n},{"./utils.js":8,"intl-format-cache":9,"intl-messageformat":12,"intl-relativeformat":21}],8:[function(e,t,r){"use strict";function n(e){var t,r,n,o,i=Array.prototype.slice.call(arguments,1);for(t=0,r=i.length;r>t;t+=1)if(n=i[t])for(o in n)n.hasOwnProperty(o)&&(e[o]=n[o]);return e}r.extend=n},{}],9:[function(e,t,r){"use strict";r=t.exports=e("./lib/memoizer")["default"],r["default"]=r},{"./lib/memoizer":11}],10:[function(e,t,r){"use strict";var n=Function.prototype.bind||function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),r=this,n=function(){},o=function(){return r.apply(this instanceof n?this:e,t.concat(Array.prototype.slice.call(arguments)))};return this.prototype&&(n.prototype=this.prototype),o.prototype=new n,o},o=Object.prototype.hasOwnProperty,i=function(){try{return!!Object.defineProperty({},"a",{})}catch(e){return!1}}(),a=(!i&&!Object.prototype.__defineGetter__,i?Object.defineProperty:function(e,t,r){"get"in r&&e.__defineGetter__?e.__defineGetter__(t,r.get):(!o.call(e,t)||"value"in r)&&(e[t]=r.value)}),s=Object.create||function(e,t){function r(){}var n,i;r.prototype=e,n=new r;for(i in t)o.call(t,i)&&a(n,i,t[i]);return n};r.bind=n,r.defineProperty=a,r.objCreate=s},{}],11:[function(e,t,r){"use strict";function n(e){var t=a.objCreate(null);return function(){var r=Array.prototype.slice.call(arguments),n=o(r),i=n&&t[n];return i||(i=new(a.bind.apply(e,[null].concat(r))),n&&(t[n]=i)),i}}function o(e){if("undefined"!=typeof JSON){var t,r,n,o=[];for(t=0,r=e.length;r>t;t+=1)n=e[t],n&&"object"==typeof n?o.push(i(n)):o.push(n);return JSON.stringify(o)}}function i(e){var t,r,n,o,i=[],a=[];for(t in e)e.hasOwnProperty(t)&&a.push(t);var s=a.sort();for(r=0,n=s.length;n>r;r+=1)t=s[r],o={},o[t]=e[t],i[r]=o;return i}var a=e("./es5");r["default"]=n},{"./es5":10}],12:[function(e,t,r){"use strict";var n=e("./lib/main")["default"];e("./lib/locales"),r=t.exports=n,r["default"]=r},{"./lib/locales":1,"./lib/main":17}],13:[function(e,t,r){"use strict";function n(e,t,r){this.locales=e,this.formats=t,this.pluralFn=r}function o(e){this.id=e}function i(e,t,r,n,o){this.id=e,this.useOrdinal=t,this.offset=r,this.options=n,this.pluralFn=o}function a(e,t,r,n){this.id=e,this.offset=t,this.numberFormat=r,this.string=n}function s(e,t){this.id=e,this.options=t}r["default"]=n,n.prototype.compile=function(e){return this.pluralStack=[],this.currentPlural=null,this.pluralNumberFormat=null,this.compileMessage(e)},n.prototype.compileMessage=function(e){if(!e||"messageFormatPattern"!==e.type)throw new Error('Message AST is not of type: "messageFormatPattern"');var t,r,n,o=e.elements,i=[];for(t=0,r=o.length;r>t;t+=1)switch(n=o[t],n.type){case"messageTextElement":i.push(this.compileMessageText(n));break;case"argumentElement":i.push(this.compileArgument(n));break;default:throw new Error("Message element does not have a valid type")}return i},n.prototype.compileMessageText=function(e){return this.currentPlural&&/(^|[^\\])#/g.test(e.value)?(this.pluralNumberFormat||(this.pluralNumberFormat=new Intl.NumberFormat(this.locales)),new a(this.currentPlural.id,this.currentPlural.format.offset,this.pluralNumberFormat,e.value)):e.value.replace(/\\#/g,"#")},n.prototype.compileArgument=function(e){var t=e.format;if(!t)return new o(e.id);var r,n=this.formats,a=this.locales,c=this.pluralFn;switch(t.type){case"numberFormat":return r=n.number[t.style],{id:e.id,format:new Intl.NumberFormat(a,r).format};case"dateFormat":return r=n.date[t.style],{id:e.id,format:new Intl.DateTimeFormat(a,r).format};case"timeFormat":return r=n.time[t.style],{id:e.id,format:new Intl.DateTimeFormat(a,r).format};case"pluralFormat":return r=this.compileOptions(e),new i(e.id,t.ordinal,t.offset,r,c);case"selectFormat":return r=this.compileOptions(e),new s(e.id,r);default:throw new Error("Message element does not have a valid format type")}},n.prototype.compileOptions=function(e){var t=e.format,r=t.options,n={};this.pluralStack.push(this.currentPlural),this.currentPlural="pluralFormat"===t.type?e:null;var o,i,a;for(o=0,i=r.length;i>o;o+=1)a=r[o],n[a.selector]=this.compileMessage(a.value);return this.currentPlural=this.pluralStack.pop(),n},o.prototype.format=function(e){return e?"string"==typeof e?e:String(e):""},i.prototype.getOption=function(e){var t=this.options,r=t["="+e]||t[this.pluralFn(e-this.offset,this.useOrdinal)];return r||t.other},a.prototype.format=function(e){var t=this.numberFormat.format(e-this.offset);return this.string.replace(/(^|[^\\])#/g,"$1"+t).replace(/\\#/g,"#")},s.prototype.getOption=function(e){var t=this.options;return t[e]||t.other}},{}],14:[function(e,t,r){"use strict";function n(e,t,r){var o="string"==typeof e?n.__parse(e):e;if(!o||"messageFormatPattern"!==o.type)throw new TypeError("A message must be provided as a String or AST.");r=this._mergeFormats(n.formats,r),i.defineProperty(this,"_locale",{value:this._resolveLocale(t)});var a=this._findPluralRuleFunction(this._locale),s=this._compilePattern(o,t,r,a),c=this;this.format=function(e){return c._format(s,e)}}var o=e("./utils"),i=e("./es5"),a=e("./compiler"),s=e("intl-messageformat-parser");r["default"]=n,i.defineProperty(n,"formats",{enumerable:!0,value:{number:{currency:{style:"currency"},percent:{style:"percent"}},date:{"short":{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},"long":{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{"short":{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},"long":{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}}}),i.defineProperty(n,"__localeData__",{value:i.objCreate(null)}),i.defineProperty(n,"__addLocaleData",{value:function(e){if(!e||!e.locale)throw new Error("Locale data provided to IntlMessageFormat is missing a `locale` property");n.__localeData__[e.locale.toLowerCase()]=e}}),i.defineProperty(n,"__parse",{value:s["default"].parse}),i.defineProperty(n,"defaultLocale",{enumerable:!0,writable:!0,value:void 0}),n.prototype.resolvedOptions=function(){return{locale:this._locale}},n.prototype._compilePattern=function(e,t,r,n){var o=new a["default"](t,r,n);return o.compile(e)},n.prototype._findPluralRuleFunction=function(e){for(var t=n.__localeData__,r=t[e.toLowerCase()];r;){if(r.pluralRuleFunction)return r.pluralRuleFunction;r=r.parentLocale&&t[r.parentLocale.toLowerCase()]}throw new Error("Locale data added to IntlMessageFormat is missing a `pluralRuleFunction` for :"+e)},n.prototype._format=function(e,t){var r,n,i,a,s,c="";for(r=0,n=e.length;n>r;r+=1)if(i=e[r],"string"!=typeof i){if(a=i.id,!t||!o.hop.call(t,a))throw new Error("A value must be provided for: "+a);s=t[a],c+=i.options?this._format(i.getOption(s),t):i.format(s)}else c+=i;return c},n.prototype._mergeFormats=function(e,t){var r,n,a={};for(r in e)o.hop.call(e,r)&&(a[r]=n=i.objCreate(e[r]),t&&o.hop.call(t,r)&&o.extend(n,t[r]));return a},n.prototype._resolveLocale=function(e){"string"==typeof e&&(e=[e]),e=(e||[]).concat(n.defaultLocale);var t,r,o,i,a=n.__localeData__;for(t=0,r=e.length;r>t;t+=1)for(o=e[t].toLowerCase().split("-");o.length;){if(i=a[o.join("-")])return i.locale;o.pop()}var s=e.pop();throw new Error("No locale data has been added to IntlMessageFormat for: "+e.join(", ")+", or the default locale: "+s)}},{"./compiler":13,"./es5":16,"./utils":18,"intl-messageformat-parser":19}],15:[function(e,t,r){"use strict";r["default"]={locale:"en",pluralRuleFunction:function(e,t){var r=String(e).split("."),n=!r[1],o=Number(r[0])==e,i=o&&r[0].slice(-1),a=o&&r[0].slice(-2);return t?1==i&&11!=a?"one":2==i&&12!=a?"two":3==i&&13!=a?"few":"other":1==e&&n?"one":"other"}}},{}],16:[function(e,t,r){"use strict";var n=e("./utils"),o=function(){try{return!!Object.defineProperty({},"a",{})}catch(e){return!1}}(),i=(!o&&!Object.prototype.__defineGetter__,o?Object.defineProperty:function(e,t,r){"get"in r&&e.__defineGetter__?e.__defineGetter__(t,r.get):(!n.hop.call(e,t)||"value"in r)&&(e[t]=r.value)}),a=Object.create||function(e,t){function r(){}var o,a;r.prototype=e,o=new r;for(a in t)n.hop.call(t,a)&&i(o,a,t[a]);return o};r.defineProperty=i,r.objCreate=a},{"./utils":18}],17:[function(e,t,r){"use strict";var n=e("./core"),o=e("./en");n["default"].__addLocaleData(o["default"]),n["default"].defaultLocale="en",r["default"]=n["default"]},{"./core":14,"./en":15}],18:[function(e,t,r){"use strict";function n(e){var t,r,n,i,a=Array.prototype.slice.call(arguments,1);for(t=0,r=a.length;r>t;t+=1)if(n=a[t])for(i in n)o.call(n,i)&&(e[i]=n[i]);return e}r.extend=n;var o=Object.prototype.hasOwnProperty;r.hop=o},{}],19:[function(e,t,r){"use strict";r=t.exports=e("./lib/parser")["default"],r["default"]=r},{"./lib/parser":20}],20:[function(e,t,r){"use strict";r["default"]=function(){function e(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}function t(e,t,r,n,o,i){this.message=e,this.expected=t,this.found=r,this.offset=n,this.line=o,this.column=i,this.name="SyntaxError"}function r(e){function r(t){function r(t,r,n){var o,i;for(o=r;n>o;o++)i=e.charAt(o),"\n"===i?(t.seenCR||t.line++,t.column=1,t.seenCR=!1):"\r"===i||"\u2028"===i||"\u2029"===i?(t.line++,t.column=1,t.seenCR=!0):(t.column++,t.seenCR=!1)}return We!==t&&(We>t&&(We=0,Ge={line:1,column:1,seenCR:!1}),r(Ge,We,t),We=t),Ge}function n(e){Ke>qe||(qe>Ke&&(Ke=qe,Je=[]),Je.push(e))}function o(n,o,i){function a(e){var t=1;for(e.sort(function(e,t){return e.description<t.description?-1:e.description>t.description?1:0});t<e.length;)e[t-1]===e[t]?e.splice(t,1):t++}function s(e,t){function r(e){function t(e){return e.charCodeAt(0).toString(16).toUpperCase()}return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(e){return"\\x0"+t(e)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(e){return"\\x"+t(e)}).replace(/[\u0180-\u0FFF]/g,function(e){return"\\u0"+t(e)}).replace(/[\u1080-\uFFFF]/g,function(e){return"\\u"+t(e)})}var n,o,i,a=new Array(e.length);for(i=0;i<e.length;i++)a[i]=e[i].description;return n=e.length>1?a.slice(0,-1).join(", ")+" or "+a[e.length-1]:a[0],o=t?'"'+r(t)+'"':"end of input","Expected "+n+" but "+o+" found."}var c=r(i),u=i<e.length?e.charAt(i):null;return null!==o&&a(o),new t(null!==n?n:s(o,u),o,u,i,c.line,c.column)}function i(){var e;return e=a()}function a(){var e,t,r;for(e=qe,t=[],r=s();r!==j;)t.push(r),r=s();return t!==j&&(Ve=e,t=N(t)),e=t}function s(){var e;return e=u(),e===j&&(e=p()),e}function c(){var t,r,n,o,i,a;if(t=qe,r=[],n=qe,o=x(),o!==j?(i=O(),i!==j?(a=x(),a!==j?(o=[o,i,a],n=o):(qe=n,n=L)):(qe=n,n=L)):(qe=n,n=L),n!==j)for(;n!==j;)r.push(n),n=qe,o=x(),o!==j?(i=O(),i!==j?(a=x(),a!==j?(o=[o,i,a],n=o):(qe=n,n=L)):(qe=n,n=L)):(qe=n,n=L);else r=L;return r!==j&&(Ve=t,r=T(r)),t=r,t===j&&(t=qe,r=w(),r!==j&&(r=e.substring(t,qe)),t=r),t}function u(){var e,t;return e=qe,t=c(),t!==j&&(Ve=e,t=F(t)),e=t}function l(){var t,r,o;if(t=k(),t===j){if(t=qe,r=[],M.test(e.charAt(qe))?(o=e.charAt(qe),qe++):(o=j,0===Qe&&n(D)),o!==j)for(;o!==j;)r.push(o),M.test(e.charAt(qe))?(o=e.charAt(qe),qe++):(o=j,0===Qe&&n(D));else r=L;r!==j&&(r=e.substring(t,qe)),t=r}return t}function p(){var t,r,o,i,a,s,c,u,p;return t=qe,123===e.charCodeAt(qe)?(r=B,qe++):(r=j,0===Qe&&n(U)),r!==j?(o=x(),o!==j?(i=l(),i!==j?(a=x(),a!==j?(s=qe,44===e.charCodeAt(qe)?(c=z,qe++):(c=j,0===Qe&&n($)),c!==j?(u=x(),u!==j?(p=f(),p!==j?(c=[c,u,p],s=c):(qe=s,s=L)):(qe=s,s=L)):(qe=s,s=L),s===j&&(s=H),s!==j?(c=x(),c!==j?(125===e.charCodeAt(qe)?(u=q,qe++):(u=j,0===Qe&&n(V)),u!==j?(Ve=t,r=W(i,s),t=r):(qe=t,t=L)):(qe=t,t=L)):(qe=t,t=L)):(qe=t,t=L)):(qe=t,t=L)):(qe=t,t=L)):(qe=t,t=L),t}function f(){var e;return e=h(),e===j&&(e=d(),e===j&&(e=g(),e===j&&(e=m()))),e}function h(){var t,r,o,i,a,s,c;return t=qe,e.substr(qe,6)===G?(r=G,qe+=6):(r=j,0===Qe&&n(K)),r===j&&(e.substr(qe,4)===J?(r=J,qe+=4):(r=j,0===Qe&&n(Q)),r===j&&(e.substr(qe,4)===X?(r=X,qe+=4):(r=j,0===Qe&&n(Y)))),r!==j?(o=x(),o!==j?(i=qe,44===e.charCodeAt(qe)?(a=z,qe++):(a=j,0===Qe&&n($)),a!==j?(s=x(),s!==j?(c=O(),c!==j?(a=[a,s,c],i=a):(qe=i,i=L)):(qe=i,i=L)):(qe=i,i=L),i===j&&(i=H),i!==j?(Ve=t,r=Z(r,i),t=r):(qe=t,t=L)):(qe=t,t=L)):(qe=t,t=L),t}function d(){var t,r,o,i,a,s;return t=qe,e.substr(qe,6)===ee?(r=ee,qe+=6):(r=j,0===Qe&&n(te)),r!==j?(o=x(),o!==j?(44===e.charCodeAt(qe)?(i=z,qe++):(i=j,0===Qe&&n($)),i!==j?(a=x(),a!==j?(s=_(),s!==j?(Ve=t,r=re(s),t=r):(qe=t,t=L)):(qe=t,t=L)):(qe=t,t=L)):(qe=t,t=L)):(qe=t,t=L),t}function g(){var t,r,o,i,a,s;return t=qe,e.substr(qe,13)===ne?(r=ne,qe+=13):(r=j,0===Qe&&n(oe)),r!==j?(o=x(),o!==j?(44===e.charCodeAt(qe)?(i=z,qe++):(i=j,0===Qe&&n($)),i!==j?(a=x(),a!==j?(s=_(),s!==j?(Ve=t,r=ie(s),t=r):(qe=t,t=L)):(qe=t,t=L)):(qe=t,t=L)):(qe=t,t=L)):(qe=t,t=L),t}function m(){var t,r,o,i,a,s,c;if(t=qe,e.substr(qe,6)===ae?(r=ae,qe+=6):(r=j,0===Qe&&n(se)),r!==j)if(o=x(),o!==j)if(44===e.charCodeAt(qe)?(i=z,qe++):(i=j,0===Qe&&n($)),i!==j)if(a=x(),a!==j){if(s=[],c=v(),c!==j)for(;c!==j;)s.push(c),c=v();else s=L;s!==j?(Ve=t,r=ce(s),t=r):(qe=t,t=L)}else qe=t,t=L;else qe=t,t=L;else qe=t,t=L;else qe=t,t=L;return t}function y(){var t,r,o,i;return t=qe,r=qe,61===e.charCodeAt(qe)?(o=ue,qe++):(o=j,0===Qe&&n(le)),o!==j?(i=k(),i!==j?(o=[o,i],r=o):(qe=r,r=L)):(qe=r,r=L),r!==j&&(r=e.substring(t,qe)),t=r,t===j&&(t=O()),t}function v(){var t,r,o,i,s,c,u,l,p;return t=qe,r=x(),r!==j?(o=y(),o!==j?(i=x(),i!==j?(123===e.charCodeAt(qe)?(s=B,qe++):(s=j,0===Qe&&n(U)),s!==j?(c=x(),c!==j?(u=a(),u!==j?(l=x(),l!==j?(125===e.charCodeAt(qe)?(p=q,qe++):(p=j,0===Qe&&n(V)),p!==j?(Ve=t,r=pe(o,u),t=r):(qe=t,t=L)):(qe=t,t=L)):(qe=t,t=L)):(qe=t,t=L)):(qe=t,t=L)):(qe=t,t=L)):(qe=t,t=L)):(qe=t,t=L),t}function b(){var t,r,o,i;return t=qe,e.substr(qe,7)===fe?(r=fe,qe+=7):(r=j,0===Qe&&n(he)),r!==j?(o=x(),o!==j?(i=k(),i!==j?(Ve=t,r=de(i),t=r):(qe=t,t=L)):(qe=t,t=L)):(qe=t,t=L),t}function _(){var e,t,r,n,o;if(e=qe,t=b(),t===j&&(t=H),t!==j)if(r=x(),r!==j){if(n=[],o=v(),o!==j)for(;o!==j;)n.push(o),o=v();else n=L;n!==j?(Ve=e,t=ge(t,n),e=t):(qe=e,e=L)}else qe=e,e=L;else qe=e,e=L;return e}function w(){var t,r;if(Qe++,t=[],ye.test(e.charAt(qe))?(r=e.charAt(qe),qe++):(r=j,0===Qe&&n(ve)),r!==j)for(;r!==j;)t.push(r),ye.test(e.charAt(qe))?(r=e.charAt(qe),qe++):(r=j,0===Qe&&n(ve));else t=L;return Qe--,t===j&&(r=j,0===Qe&&n(me)),t}function x(){var t,r,o;for(Qe++,t=qe,r=[],o=w();o!==j;)r.push(o),o=w();return r!==j&&(r=e.substring(t,qe)),t=r,Qe--,t===j&&(r=j,0===Qe&&n(be)),t}function E(){var t;return _e.test(e.charAt(qe))?(t=e.charAt(qe),qe++):(t=j,0===Qe&&n(we)),t}function S(){var t;return xe.test(e.charAt(qe))?(t=e.charAt(qe),qe++):(t=j,0===Qe&&n(Ee)),t}function k(){var t,r,o,i,a,s;if(t=qe,48===e.charCodeAt(qe)?(r=Se,qe++):(r=j,0===Qe&&n(ke)),r===j){if(r=qe,o=qe,Pe.test(e.charAt(qe))?(i=e.charAt(qe),qe++):(i=j,0===Qe&&n(Oe)),i!==j){for(a=[],s=E();s!==j;)a.push(s),s=E();a!==j?(i=[i,a],o=i):(qe=o,o=L)}else qe=o,o=L;o!==j&&(o=e.substring(r,qe)),r=o}return r!==j&&(Ve=t,r=Ae(r)),t=r}function P(){var t,r,o,i,a,s,c,u;return Ce.test(e.charAt(qe))?(t=e.charAt(qe),qe++):(t=j,0===Qe&&n(je)),t===j&&(t=qe,e.substr(qe,2)===Ie?(r=Ie,qe+=2):(r=j,
0===Qe&&n(Re)),r!==j&&(Ve=t,r=Ne()),t=r,t===j&&(t=qe,e.substr(qe,2)===Le?(r=Le,qe+=2):(r=j,0===Qe&&n(Te)),r!==j&&(Ve=t,r=Fe()),t=r,t===j&&(t=qe,e.substr(qe,2)===Me?(r=Me,qe+=2):(r=j,0===Qe&&n(De)),r!==j&&(Ve=t,r=Be()),t=r,t===j&&(t=qe,e.substr(qe,2)===Ue?(r=Ue,qe+=2):(r=j,0===Qe&&n(He)),r!==j?(o=qe,i=qe,a=S(),a!==j?(s=S(),s!==j?(c=S(),c!==j?(u=S(),u!==j?(a=[a,s,c,u],i=a):(qe=i,i=L)):(qe=i,i=L)):(qe=i,i=L)):(qe=i,i=L),i!==j&&(i=e.substring(o,qe)),o=i,o!==j?(Ve=t,r=ze(o),t=r):(qe=t,t=L)):(qe=t,t=L))))),t}function O(){var e,t,r;if(e=qe,t=[],r=P(),r!==j)for(;r!==j;)t.push(r),r=P();else t=L;return t!==j&&(Ve=e,t=$e(t)),e=t}var A,C=arguments.length>1?arguments[1]:{},j={},I={start:i},R=i,N=function(e){return{type:"messageFormatPattern",elements:e}},L=j,T=function(e){var t,r,n,o,i,a="";for(t=0,n=e.length;n>t;t+=1)for(o=e[t],r=0,i=o.length;i>r;r+=1)a+=o[r];return a},F=function(e){return{type:"messageTextElement",value:e}},M=/^[^ \t\n\r,.+={}#]/,D={type:"class",value:"[^ \\t\\n\\r,.+={}#]",description:"[^ \\t\\n\\r,.+={}#]"},B="{",U={type:"literal",value:"{",description:'"{"'},H=null,z=",",$={type:"literal",value:",",description:'","'},q="}",V={type:"literal",value:"}",description:'"}"'},W=function(e,t){return{type:"argumentElement",id:e,format:t&&t[2]}},G="number",K={type:"literal",value:"number",description:'"number"'},J="date",Q={type:"literal",value:"date",description:'"date"'},X="time",Y={type:"literal",value:"time",description:'"time"'},Z=function(e,t){return{type:e+"Format",style:t&&t[2]}},ee="plural",te={type:"literal",value:"plural",description:'"plural"'},re=function(e){return{type:e.type,ordinal:!1,offset:e.offset||0,options:e.options}},ne="selectordinal",oe={type:"literal",value:"selectordinal",description:'"selectordinal"'},ie=function(e){return{type:e.type,ordinal:!0,offset:e.offset||0,options:e.options}},ae="select",se={type:"literal",value:"select",description:'"select"'},ce=function(e){return{type:"selectFormat",options:e}},ue="=",le={type:"literal",value:"=",description:'"="'},pe=function(e,t){return{type:"optionalFormatPattern",selector:e,value:t}},fe="offset:",he={type:"literal",value:"offset:",description:'"offset:"'},de=function(e){return e},ge=function(e,t){return{type:"pluralFormat",offset:e,options:t}},me={type:"other",description:"whitespace"},ye=/^[ \t\n\r]/,ve={type:"class",value:"[ \\t\\n\\r]",description:"[ \\t\\n\\r]"},be={type:"other",description:"optionalWhitespace"},_e=/^[0-9]/,we={type:"class",value:"[0-9]",description:"[0-9]"},xe=/^[0-9a-f]/i,Ee={type:"class",value:"[0-9a-f]i",description:"[0-9a-f]i"},Se="0",ke={type:"literal",value:"0",description:'"0"'},Pe=/^[1-9]/,Oe={type:"class",value:"[1-9]",description:"[1-9]"},Ae=function(e){return parseInt(e,10)},Ce=/^[^{}\\\0-\x1F \t\n\r]/,je={type:"class",value:"[^{}\\\\\\0-\\x1F \\t\\n\\r]",description:"[^{}\\\\\\0-\\x1F \\t\\n\\r]"},Ie="\\#",Re={type:"literal",value:"\\#",description:'"\\\\#"'},Ne=function(){return"\\#"},Le="\\{",Te={type:"literal",value:"\\{",description:'"\\\\{"'},Fe=function(){return"{"},Me="\\}",De={type:"literal",value:"\\}",description:'"\\\\}"'},Be=function(){return"}"},Ue="\\u",He={type:"literal",value:"\\u",description:'"\\\\u"'},ze=function(e){return String.fromCharCode(parseInt(e,16))},$e=function(e){return e.join("")},qe=0,Ve=0,We=0,Ge={line:1,column:1,seenCR:!1},Ke=0,Je=[],Qe=0;if("startRule"in C){if(!(C.startRule in I))throw new Error("Can't start parsing from rule \""+C.startRule+'".');R=I[C.startRule]}if(A=R(),A!==j&&qe===e.length)return A;throw A!==j&&qe<e.length&&n({type:"end",description:"end of input"}),o(null,Je,Ke)}return e(t,Error),{SyntaxError:t,parse:r}}()},{}],21:[function(e,t,r){"use strict";var n=e("./lib/main")["default"];e("./lib/locales"),r=t.exports=n,r["default"]=r},{"./lib/locales":1,"./lib/main":26}],22:[function(e,t,r){"use strict";function n(e,t){t=t||{},a.isArray(e)&&(e=e.concat()),a.defineProperty(this,"_locale",{value:this._resolveLocale(e)}),a.defineProperty(this,"_options",{value:{style:this._resolveStyle(t.style),units:this._isValidUnits(t.units)&&t.units}}),a.defineProperty(this,"_locales",{value:e}),a.defineProperty(this,"_fields",{value:this._findFields(this._locale)}),a.defineProperty(this,"_messages",{value:a.objCreate(null)});var r=this;this.format=function(e,t){return r._format(e,t)}}var o=e("intl-messageformat"),i=e("./diff"),a=e("./es5");r["default"]=n;var s=["second","minute","hour","day","month","year"],c=["best fit","numeric"];a.defineProperty(n,"__localeData__",{value:a.objCreate(null)}),a.defineProperty(n,"__addLocaleData",{value:function(e){if(!e||!e.locale)throw new Error("Locale data provided to IntlRelativeFormat is missing a `locale` property value");n.__localeData__[e.locale.toLowerCase()]=e,o["default"].__addLocaleData(e)}}),a.defineProperty(n,"defaultLocale",{enumerable:!0,writable:!0,value:void 0}),a.defineProperty(n,"thresholds",{enumerable:!0,value:{second:45,minute:45,hour:22,day:26,month:11}}),n.prototype.resolvedOptions=function(){return{locale:this._locale,style:this._options.style,units:this._options.units}},n.prototype._compileMessage=function(e){var t,r=this._locales,n=(this._locale,this._fields[e]),i=n.relativeTime,a="",s="";for(t in i.future)i.future.hasOwnProperty(t)&&(a+=" "+t+" {"+i.future[t].replace("{0}","#")+"}");for(t in i.past)i.past.hasOwnProperty(t)&&(s+=" "+t+" {"+i.past[t].replace("{0}","#")+"}");var c="{when, select, future {{0, plural, "+a+"}}past {{0, plural, "+s+"}}}";return new o["default"](c,r)},n.prototype._getMessage=function(e){var t=this._messages;return t[e]||(t[e]=this._compileMessage(e)),t[e]},n.prototype._getRelativeUnits=function(e,t){var r=this._fields[t];return r.relative?r.relative[e]:void 0},n.prototype._findFields=function(e){for(var t=n.__localeData__,r=t[e.toLowerCase()];r;){if(r.fields)return r.fields;r=r.parentLocale&&t[r.parentLocale.toLowerCase()]}throw new Error("Locale data added to IntlRelativeFormat is missing `fields` for :"+e)},n.prototype._format=function(e,t){var r=t&&void 0!==t.now?t.now:a.dateNow();if(void 0===e&&(e=r),!isFinite(r))throw new RangeError("The `now` option provided to IntlRelativeFormat#format() is not in valid range.");if(!isFinite(e))throw new RangeError("The date value provided to IntlRelativeFormat#format() is not in valid range.");var n=i["default"](r,e),o=this._options.units||this._selectUnits(n),s=n[o];if("numeric"!==this._options.style){var c=this._getRelativeUnits(s,o);if(c)return c}return this._getMessage(o).format({0:Math.abs(s),when:0>s?"past":"future"})},n.prototype._isValidUnits=function(e){if(!e||a.arrIndexOf.call(s,e)>=0)return!0;if("string"==typeof e){var t=/s$/.test(e)&&e.substr(0,e.length-1);if(t&&a.arrIndexOf.call(s,t)>=0)throw new Error('"'+e+'" is not a valid IntlRelativeFormat `units` value, did you mean: '+t)}throw new Error('"'+e+'" is not a valid IntlRelativeFormat `units` value, it must be one of: "'+s.join('", "')+'"')},n.prototype._resolveLocale=function(e){"string"==typeof e&&(e=[e]),e=(e||[]).concat(n.defaultLocale);var t,r,o,i,a=n.__localeData__;for(t=0,r=e.length;r>t;t+=1)for(o=e[t].toLowerCase().split("-");o.length;){if(i=a[o.join("-")])return i.locale;o.pop()}var s=e.pop();throw new Error("No locale data has been added to IntlRelativeFormat for: "+e.join(", ")+", or the default locale: "+s)},n.prototype._resolveStyle=function(e){if(!e)return c[0];if(a.arrIndexOf.call(c,e)>=0)return e;throw new Error('"'+e+'" is not a valid IntlRelativeFormat `style` value, it must be one of: "'+c.join('", "')+'"')},n.prototype._selectUnits=function(e){var t,r,o;for(t=0,r=s.length;r>t&&(o=s[t],!(Math.abs(e[o])<n.thresholds[o]));t+=1);return o}},{"./diff":23,"./es5":25,"intl-messageformat":12}],23:[function(e,t,r){"use strict";function n(e){return 400*e/146097}var o=Math.round;r["default"]=function(e,t){e=+e,t=+t;var r=o(t-e),i=o(r/1e3),a=o(i/60),s=o(a/60),c=o(s/24),u=o(c/7),l=n(c),p=o(12*l),f=o(l);return{millisecond:r,second:i,minute:a,hour:s,day:c,week:u,month:p,year:f}}},{}],24:[function(e,t,r){arguments[4][5][0].apply(r,arguments)},{dup:5}],25:[function(e,t,r){"use strict";var n=Object.prototype.hasOwnProperty,o=Object.prototype.toString,i=function(){try{return!!Object.defineProperty({},"a",{})}catch(e){return!1}}(),a=(!i&&!Object.prototype.__defineGetter__,i?Object.defineProperty:function(e,t,r){"get"in r&&e.__defineGetter__?e.__defineGetter__(t,r.get):(!n.call(e,t)||"value"in r)&&(e[t]=r.value)}),s=Object.create||function(e,t){function r(){}var o,i;r.prototype=e,o=new r;for(i in t)n.call(t,i)&&a(o,i,t[i]);return o},c=Array.prototype.indexOf||function(e,t){var r=this;if(!r.length)return-1;for(var n=t||0,o=r.length;o>n;n++)if(r[n]===e)return n;return-1},u=Array.isArray||function(e){return"[object Array]"===o.call(e)},l=Date.now||function(){return(new Date).getTime()};r.defineProperty=a,r.objCreate=s,r.arrIndexOf=c,r.isArray=u,r.dateNow=l},{}],26:[function(e,t,r){arguments[4][17][0].apply(r,arguments)},{"./core":22,"./en":24,dup:17}],27:[function(e,t,r){!function(e,n){"object"==typeof r&&"object"==typeof t?t.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof r?r.Handlebars=n():e.Handlebars=n()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function n(){var e=y();return e.compile=function(t,r){return l.compile(t,r,e)},e.precompile=function(t,r){return l.precompile(t,r,e)},e.AST=c["default"],e.Compiler=l.Compiler,e.JavaScriptCompiler=f["default"],e.Parser=u.parser,e.parse=u.parse,e}var o=r(1)["default"];t.__esModule=!0;var i=r(2),a=o(i),s=r(35),c=o(s),u=r(36),l=r(41),p=r(42),f=o(p),h=r(39),d=o(h),g=r(34),m=o(g),y=a["default"].create,v=n();v.create=n,m["default"](v),v.Visitor=d["default"],v["default"]=v,t["default"]=v,e.exports=t["default"]},function(e,t){"use strict";t["default"]=function(e){return e&&e.__esModule?e:{"default":e}},t.__esModule=!0},function(e,t,r){"use strict";function n(){var e=new s.HandlebarsEnvironment;return h.extend(e,s),e.SafeString=u["default"],e.Exception=p["default"],e.Utils=h,e.escapeExpression=h.escapeExpression,e.VM=g,e.template=function(t){return g.template(t,e)},e}var o=r(3)["default"],i=r(1)["default"];t.__esModule=!0;var a=r(4),s=o(a),c=r(21),u=i(c),l=r(6),p=i(l),f=r(5),h=o(f),d=r(22),g=o(d),m=r(34),y=i(m),v=n();v.create=n,y["default"](v),v["default"]=v,t["default"]=v,e.exports=t["default"]},function(e,t){"use strict";t["default"]=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t},t.__esModule=!0},function(e,t,r){"use strict";function n(e,t,r){this.helpers=e||{},this.partials=t||{},this.decorators=r||{},c.registerDefaultHelpers(this),u.registerDefaultDecorators(this)}var o=r(1)["default"];t.__esModule=!0,t.HandlebarsEnvironment=n;var i=r(5),a=r(6),s=o(a),c=r(10),u=r(18),l=r(20),p=o(l),f="4.0.10";t.VERSION=f;var h=7;t.COMPILER_REVISION=h;var d={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};t.REVISION_CHANGES=d;var g="[object Object]";n.prototype={constructor:n,logger:p["default"],log:p["default"].log,registerHelper:function(e,t){if(i.toString.call(e)===g){if(t)throw new s["default"]("Arg not supported with multiple helpers");i.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if(i.toString.call(e)===g)i.extend(this.partials,e);else{if("undefined"==typeof t)throw new s["default"]('Attempting to register a partial called "'+e+'" as undefined');this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]},registerDecorator:function(e,t){if(i.toString.call(e)===g){if(t)throw new s["default"]("Arg not supported with multiple decorators");i.extend(this.decorators,e)}else this.decorators[e]=t},unregisterDecorator:function(e){delete this.decorators[e]}};var m=p["default"].log;t.log=m,t.createFrame=i.createFrame,t.logger=p["default"]},function(e,t){"use strict";function r(e){return l[e]}function n(e){for(var t=1;t<arguments.length;t++)for(var r in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],r)&&(e[r]=arguments[t][r]);return e}function o(e,t){for(var r=0,n=e.length;n>r;r++)if(e[r]===t)return r;return-1}function i(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}return f.test(e)?e.replace(p,r):e}function a(e){return!e&&0!==e||!(!g(e)||0!==e.length)}function s(e){var t=n({},e);return t._parent=e,t}function c(e,t){return e.path=t,e}function u(e,t){return(e?e+".":"")+t}t.__esModule=!0,t.extend=n,t.indexOf=o,t.escapeExpression=i,t.isEmpty=a,t.createFrame=s,t.blockParams=c,t.appendContextPath=u;var l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},p=/[&<>"'`=]/g,f=/[&<>"'`=]/,h=Object.prototype.toString;t.toString=h;var d=function(e){return"function"==typeof e};d(/x/)&&(t.isFunction=d=function(e){return"function"==typeof e&&"[object Function]"===h.call(e)}),t.isFunction=d;var g=Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===h.call(e)};t.isArray=g},function(e,t,r){"use strict";function n(e,t){var r=t&&t.loc,a=void 0,s=void 0;r&&(a=r.start.line,s=r.start.column,e+=" - "+a+":"+s);for(var c=Error.prototype.constructor.call(this,e),u=0;u<i.length;u++)this[i[u]]=c[i[u]];Error.captureStackTrace&&Error.captureStackTrace(this,n);try{r&&(this.lineNumber=a,o?Object.defineProperty(this,"column",{value:s,enumerable:!0}):this.column=s)}catch(l){}}var o=r(7)["default"];t.__esModule=!0;var i=["description","fileName","lineNumber","message","name","number","stack"];n.prototype=new Error,t["default"]=n,e.exports=t["default"]},function(e,t,r){e.exports={"default":r(8),__esModule:!0}},function(e,t,r){var n=r(9);e.exports=function(e,t,r){return n.setDesc(e,t,r)}},function(e,t){var r=Object;e.exports={create:r.create,getProto:r.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:r.getOwnPropertyDescriptor,setDesc:r.defineProperty,setDescs:r.defineProperties,getKeys:r.keys,getNames:r.getOwnPropertyNames,getSymbols:r.getOwnPropertySymbols,each:[].forEach}},function(e,t,r){"use strict";function n(e){a["default"](e),c["default"](e),l["default"](e),f["default"](e),d["default"](e),m["default"](e),v["default"](e)}var o=r(1)["default"];t.__esModule=!0,t.registerDefaultHelpers=n;var i=r(11),a=o(i),s=r(12),c=o(s),u=r(13),l=o(u),p=r(14),f=o(p),h=r(15),d=o(h),g=r(16),m=o(g),y=r(17),v=o(y)},function(e,t,r){"use strict";t.__esModule=!0;var n=r(5);t["default"]=function(e){e.registerHelper("blockHelperMissing",function(t,r){var o=r.inverse,i=r.fn;if(t===!0)return i(this);if(t===!1||null==t)return o(this);if(n.isArray(t))return t.length>0?(r.ids&&(r.ids=[r.name]),e.helpers.each(t,r)):o(this);if(r.data&&r.ids){var a=n.createFrame(r.data);a.contextPath=n.appendContextPath(r.data.contextPath,r.name),r={data:a}}return i(t,r)})},e.exports=t["default"]},function(e,t,r){"use strict";var n=r(1)["default"];t.__esModule=!0;var o=r(5),i=r(6),a=n(i);t["default"]=function(e){e.registerHelper("each",function(e,t){function r(t,r,i){u&&(u.key=t,u.index=r,u.first=0===r,u.last=!!i,l&&(u.contextPath=l+t)),c+=n(e[t],{data:u,blockParams:o.blockParams([e[t],t],[l+t,null])})}if(!t)throw new a["default"]("Must pass iterator to #each");var n=t.fn,i=t.inverse,s=0,c="",u=void 0,l=void 0;if(t.data&&t.ids&&(l=o.appendContextPath(t.data.contextPath,t.ids[0])+"."),o.isFunction(e)&&(e=e.call(this)),t.data&&(u=o.createFrame(t.data)),e&&"object"==typeof e)if(o.isArray(e))for(var p=e.length;p>s;s++)s in e&&r(s,s,s===e.length-1);else{var f=void 0;for(var h in e)e.hasOwnProperty(h)&&(void 0!==f&&r(f,s-1),f=h,s++);void 0!==f&&r(f,s-1,!0)}return 0===s&&(c=i(this)),c})},e.exports=t["default"]},function(e,t,r){"use strict";var n=r(1)["default"];t.__esModule=!0;var o=r(6),i=n(o);t["default"]=function(e){e.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new i["default"]('Missing helper: "'+arguments[arguments.length-1].name+'"')})},e.exports=t["default"]},function(e,t,r){"use strict";t.__esModule=!0;var n=r(5);t["default"]=function(e){e.registerHelper("if",function(e,t){return n.isFunction(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||n.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,r){return e.helpers["if"].call(this,t,{fn:r.inverse,inverse:r.fn,hash:r.hash})})},e.exports=t["default"]},function(e,t){"use strict";t.__esModule=!0,t["default"]=function(e){e.registerHelper("log",function(){for(var t=[void 0],r=arguments[arguments.length-1],n=0;n<arguments.length-1;n++)t.push(arguments[n]);var o=1;null!=r.hash.level?o=r.hash.level:r.data&&null!=r.data.level&&(o=r.data.level),t[0]=o,e.log.apply(e,t)})},e.exports=t["default"]},function(e,t){"use strict";t.__esModule=!0,t["default"]=function(e){e.registerHelper("lookup",function(e,t){return e&&e[t]})},e.exports=t["default"]},function(e,t,r){"use strict";t.__esModule=!0;var n=r(5);t["default"]=function(e){e.registerHelper("with",function(e,t){n.isFunction(e)&&(e=e.call(this));var r=t.fn;if(n.isEmpty(e))return t.inverse(this);var o=t.data;return t.data&&t.ids&&(o=n.createFrame(t.data),o.contextPath=n.appendContextPath(t.data.contextPath,t.ids[0])),r(e,{data:o,blockParams:n.blockParams([e],[o&&o.contextPath])})})},e.exports=t["default"]},function(e,t,r){"use strict";function n(e){a["default"](e)}var o=r(1)["default"];t.__esModule=!0,t.registerDefaultDecorators=n;var i=r(19),a=o(i)},function(e,t,r){"use strict";t.__esModule=!0;var n=r(5);t["default"]=function(e){e.registerDecorator("inline",function(e,t,r,o){var i=e;return t.partials||(t.partials={},i=function(o,i){var a=r.partials;r.partials=n.extend({},a,t.partials);var s=e(o,i);return r.partials=a,s}),t.partials[o.args[0]]=o.fn,i})},e.exports=t["default"]},function(e,t,r){"use strict";t.__esModule=!0;var n=r(5),o={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(e){if("string"==typeof e){var t=n.indexOf(o.methodMap,e.toLowerCase());e=t>=0?t:parseInt(e,10)}return e},log:function(e){if(e=o.lookupLevel(e),"undefined"!=typeof console&&o.lookupLevel(o.level)<=e){var t=o.methodMap[e];console[t]||(t="log");for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;r>i;i++)n[i-1]=arguments[i];console[t].apply(console,n)}}};t["default"]=o,e.exports=t["default"]},function(e,t){"use strict";function r(e){this.string=e}t.__esModule=!0,r.prototype.toString=r.prototype.toHTML=function(){return""+this.string},t["default"]=r,e.exports=t["default"]},function(e,t,r){"use strict";function n(e){var t=e&&e[0]||1,r=v.COMPILER_REVISION;if(t!==r){if(r>t){var n=v.REVISION_CHANGES[r],o=v.REVISION_CHANGES[t];throw new y["default"]("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+n+") or downgrade your runtime to an older version ("+o+").")}throw new y["default"]("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function o(e,t){function r(r,n,o){o.hash&&(n=g.extend({},n,o.hash),o.ids&&(o.ids[0]=!0)),r=t.VM.resolvePartial.call(this,r,n,o);var i=t.VM.invokePartial.call(this,r,n,o);if(null==i&&t.compile&&(o.partials[o.name]=t.compile(r,e.compilerOptions,t),i=o.partials[o.name](n,o)),null!=i){if(o.indent){for(var a=i.split("\n"),s=0,c=a.length;c>s&&(a[s]||s+1!==c);s++)a[s]=o.indent+a[s];i=a.join("\n")}return i}throw new y["default"]("The partial "+o.name+" could not be compiled when running in runtime-only mode")}function n(t){function r(t){return""+e.main(o,t,o.helpers,o.partials,a,c,s)}var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=i.data;n._setup(i),!i.partial&&e.useData&&(a=u(t,a));var s=void 0,c=e.useBlockParams?[]:void 0;return e.useDepths&&(s=i.depths?t!=i.depths[0]?[t].concat(i.depths):i.depths:[t]),(r=l(e.main,r,o,i.depths||[],a,c))(t,i)}if(!t)throw new y["default"]("No environment passed to template");if(!e||!e.main)throw new y["default"]("Unknown template object: "+typeof e);e.main.decorator=e.main_d,t.VM.checkRevision(e.compiler);var o={strict:function(e,t){if(!(t in e))throw new y["default"]('"'+t+'" not defined in '+e);return e[t]},lookup:function(e,t){for(var r=e.length,n=0;r>n;n++)if(e[n]&&null!=e[n][t])return e[n][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:g.escapeExpression,invokePartial:r,fn:function(t){var r=e[t];return r.decorator=e[t+"_d"],r},programs:[],program:function(e,t,r,n,o){var a=this.programs[e],s=this.fn(e);return t||o||n||r?a=i(this,e,s,t,r,n,o):a||(a=this.programs[e]=i(this,e,s)),a},data:function(e,t){for(;e&&t--;)e=e._parent;return e},merge:function(e,t){var r=e||t;return e&&t&&e!==t&&(r=g.extend({},t,e)),r},nullContext:p({}),noop:t.VM.noop,compilerInfo:e.compiler};return n.isTop=!0,n._setup=function(r){r.partial?(o.helpers=r.helpers,o.partials=r.partials,o.decorators=r.decorators):(o.helpers=o.merge(r.helpers,t.helpers),e.usePartial&&(o.partials=o.merge(r.partials,t.partials)),(e.usePartial||e.useDecorators)&&(o.decorators=o.merge(r.decorators,t.decorators)))},n._child=function(t,r,n,a){if(e.useBlockParams&&!n)throw new y["default"]("must pass block params");if(e.useDepths&&!a)throw new y["default"]("must pass parent depths");return i(o,t,e[t],r,0,n,a)},n}function i(e,t,r,n,o,i,a){function s(t){var o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=a;return!a||t==a[0]||t===e.nullContext&&null===a[0]||(s=[t].concat(a)),r(e,t,e.helpers,e.partials,o.data||n,i&&[o.blockParams].concat(i),s)}return s=l(r,s,e,a,n,i),s.program=t,s.depth=a?a.length:0,s.blockParams=o||0,s}function a(e,t,r){return e?e.call||r.name||(r.name=e,e=r.partials[e]):e="@partial-block"===r.name?r.data["partial-block"]:r.partials[r.name],e}function s(e,t,r){var n=r.data&&r.data["partial-block"];r.partial=!0,r.ids&&(r.data.contextPath=r.ids[0]||r.data.contextPath);var o=void 0;if(r.fn&&r.fn!==c&&!function(){r.data=v.createFrame(r.data);var e=r.fn;o=r.data["partial-block"]=function(t){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return r.data=v.createFrame(r.data),r.data["partial-block"]=n,e(t,r)},e.partials&&(r.partials=g.extend({},r.partials,e.partials))}(),void 0===e&&o&&(e=o),void 0===e)throw new y["default"]("The partial "+r.name+" could not be found");return e instanceof Function?e(t,r):void 0}function c(){return""}function u(e,t){return t&&"root"in t||(t=t?v.createFrame(t):{},t.root=e),t}function l(e,t,r,n,o,i){if(e.decorator){var a={};t=e.decorator(t,a,r,n&&n[0],o,i,n),g.extend(t,a)}return t}var p=r(23)["default"],f=r(3)["default"],h=r(1)["default"];t.__esModule=!0,t.checkRevision=n,t.template=o,t.wrapProgram=i,t.resolvePartial=a,t.invokePartial=s,t.noop=c;var d=r(5),g=f(d),m=r(6),y=h(m),v=r(4)},function(e,t,r){e.exports={"default":r(24),__esModule:!0}},function(e,t,r){r(25),e.exports=r(30).Object.seal},function(e,t,r){var n=r(26);r(27)("seal",function(e){return function(t){return e&&n(t)?e(t):t}})},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,r){var n=r(28),o=r(30),i=r(33);e.exports=function(e,t){var r=(o.Object||{})[e]||Object[e],a={};a[e]=t(r),n(n.S+n.F*i(function(){r(1)}),"Object",a)}},function(e,t,r){var n=r(29),o=r(30),i=r(31),a="prototype",s=function(e,t,r){var c,u,l,p=e&s.F,f=e&s.G,h=e&s.S,d=e&s.P,g=e&s.B,m=e&s.W,y=f?o:o[t]||(o[t]={}),v=f?n:h?n[t]:(n[t]||{})[a];f&&(r=t);for(c in r)u=!p&&v&&c in v,u&&c in y||(l=u?v[c]:r[c],y[c]=f&&"function"!=typeof v[c]?r[c]:g&&u?i(l,n):m&&v[c]==l?function(e){var t=function(t){return this instanceof e?new e(t):e(t)};return t[a]=e[a],t}(l):d&&"function"==typeof l?i(Function.call,l):l,d&&((y[a]||(y[a]={}))[c]=l))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,e.exports=s},function(e,t){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(e,t){var r=e.exports={version:"1.2.6"};"number"==typeof __e&&(__e=r)},function(e,t,r){var n=r(32);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,t){(function(r){"use strict";t.__esModule=!0,t["default"]=function(e){var t="undefined"!=typeof r?r:window,n=t.Handlebars;e.noConflict=function(){return t.Handlebars===e&&(t.Handlebars=n),e}},e.exports=t["default"]}).call(t,function(){return this}())},function(e,t){"use strict";t.__esModule=!0;var r={helpers:{helperExpression:function(e){return"SubExpression"===e.type||("MustacheStatement"===e.type||"BlockStatement"===e.type)&&!!(e.params&&e.params.length||e.hash)},scopedId:function(e){return/^\.|this\b/.test(e.original)},simpleId:function(e){return 1===e.parts.length&&!r.helpers.scopedId(e)&&!e.depth}}};t["default"]=r,e.exports=t["default"]},function(e,t,r){"use strict";function n(e,t){if("Program"===e.type)return e;s["default"].yy=h,h.locInfo=function(e){return new h.SourceLocation(t&&t.srcName,e)};var r=new u["default"](t);return r.accept(s["default"].parse(e))}var o=r(1)["default"],i=r(3)["default"];t.__esModule=!0,t.parse=n;var a=r(37),s=o(a),c=r(38),u=o(c),l=r(40),p=i(l),f=r(5);t.parser=s["default"];var h={};f.extend(h,p)},function(e,t){"use strict";t.__esModule=!0;var r=function(){function e(){this.yy={}}var t={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition_plus0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,1],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(e,t,r,n,o,i,a){var s=i.length-1;switch(o){case 1:return i[s-1];case 2:this.$=n.prepareProgram(i[s]);break;case 3:this.$=i[s];break;case 4:this.$=i[s];break;case 5:this.$=i[s];break;case 6:this.$=i[s];break;case 7:this.$=i[s];break;case 8:this.$=i[s];break;case 9:this.$={type:"CommentStatement",value:n.stripComment(i[s]),strip:n.stripFlags(i[s],i[s]),loc:n.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:i[s],value:i[s],loc:n.locInfo(this._$)};break;case 11:this.$=n.prepareRawBlock(i[s-2],i[s-1],i[s],this._$);break;case 12:this.$={path:i[s-3],params:i[s-2],hash:i[s-1]};break;case 13:this.$=n.prepareBlock(i[s-3],i[s-2],i[s-1],i[s],!1,this._$);break;case 14:this.$=n.prepareBlock(i[s-3],i[s-2],i[s-1],i[s],!0,this._$);break;case 15:this.$={open:i[s-5],path:i[s-4],params:i[s-3],hash:i[s-2],blockParams:i[s-1],strip:n.stripFlags(i[s-5],i[s])};break;case 16:this.$={path:i[s-4],params:i[s-3],hash:i[s-2],blockParams:i[s-1],strip:n.stripFlags(i[s-5],i[s])};break;case 17:this.$={path:i[s-4],params:i[s-3],hash:i[s-2],blockParams:i[s-1],strip:n.stripFlags(i[s-5],i[s])};break;case 18:this.$={strip:n.stripFlags(i[s-1],i[s-1]),program:i[s]};break;case 19:var c=n.prepareBlock(i[s-2],i[s-1],i[s],i[s],!1,this._$),u=n.prepareProgram([c],i[s-1].loc);u.chained=!0,this.$={strip:i[s-2].strip,program:u,chain:!0};break;case 20:this.$=i[s];break;case 21:this.$={path:i[s-1],strip:n.stripFlags(i[s-2],i[s])};break;case 22:this.$=n.prepareMustache(i[s-3],i[s-2],i[s-1],i[s-4],n.stripFlags(i[s-4],i[s]),this._$);break;case 23:this.$=n.prepareMustache(i[s-3],i[s-2],i[s-1],i[s-4],n.stripFlags(i[s-4],i[s]),this._$);break;case 24:this.$={type:"PartialStatement",name:i[s-3],params:i[s-2],hash:i[s-1],indent:"",strip:n.stripFlags(i[s-4],i[s]),loc:n.locInfo(this._$)};break;case 25:this.$=n.preparePartialBlock(i[s-2],i[s-1],i[s],this._$);break;case 26:this.$={path:i[s-3],params:i[s-2],hash:i[s-1],strip:n.stripFlags(i[s-4],i[s])};break;case 27:this.$=i[s];break;case 28:this.$=i[s];break;case 29:this.$={type:"SubExpression",path:i[s-3],params:i[s-2],hash:i[s-1],loc:n.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:i[s],loc:n.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:n.id(i[s-2]),value:i[s],loc:n.locInfo(this._$)};break;case 32:this.$=n.id(i[s-1]);break;case 33:this.$=i[s];break;case 34:this.$=i[s];break;case 35:this.$={type:"StringLiteral",value:i[s],original:i[s],loc:n.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(i[s]),original:Number(i[s]),loc:n.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:"true"===i[s],original:"true"===i[s],loc:n.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:n.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:n.locInfo(this._$)};break;case 40:this.$=i[s];break;case 41:this.$=i[s];break;case 42:this.$=n.preparePath(!0,i[s],this._$);break;case 43:this.$=n.preparePath(!1,i[s],this._$);break;case 44:i[s-2].push({part:n.id(i[s]),original:i[s],separator:i[s-1]}),this.$=i[s-2];break;case 45:this.$=[{part:n.id(i[s]),original:i[s]}];break;case 46:this.$=[];break;case 47:i[s-1].push(i[s]);break;case 48:this.$=[i[s]];break;case 49:i[s-1].push(i[s]);break;case 50:this.$=[];break;case 51:i[s-1].push(i[s]);break;case 58:this.$=[];break;case 59:i[s-1].push(i[s]);break;case 64:this.$=[];break;case 65:i[s-1].push(i[s]);break;
case 70:this.$=[];break;case 71:i[s-1].push(i[s]);break;case 78:this.$=[];break;case 79:i[s-1].push(i[s]);break;case 82:this.$=[];break;case 83:i[s-1].push(i[s]);break;case 86:this.$=[];break;case 87:i[s-1].push(i[s]);break;case 90:this.$=[];break;case 91:i[s-1].push(i[s]);break;case 94:this.$=[];break;case 95:i[s-1].push(i[s]);break;case 98:this.$=[i[s]];break;case 99:i[s-1].push(i[s]);break;case 100:this.$=[i[s]];break;case 101:i[s-1].push(i[s])}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{13:40,15:[1,20],17:39},{20:42,56:41,64:43,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:45,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:48,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:42,56:49,64:43,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:50,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,51]},{72:[1,35],86:52},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:53,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:54,38:56,39:[1,58],43:57,44:[1,59],45:55,47:[2,54]},{28:60,43:61,44:[1,59],47:[2,56]},{13:63,15:[1,20],18:[1,62]},{15:[2,48],18:[2,48]},{33:[2,86],57:64,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:65,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:66,47:[1,67]},{30:68,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:69,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:70,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:71,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:75,33:[2,80],50:72,63:73,64:76,65:[1,44],69:74,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,80]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,51]},{20:75,53:81,54:[2,84],63:82,64:76,65:[1,44],69:83,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:84,47:[1,67]},{47:[2,55]},{4:85,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:86,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:87,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:88,47:[1,67]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:75,33:[2,88],58:89,63:90,64:76,65:[1,44],69:91,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:92,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:93,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,31:94,33:[2,60],63:95,64:76,65:[1,44],69:96,70:77,71:78,72:[1,79],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,33:[2,66],36:97,63:98,64:76,65:[1,44],69:99,70:77,71:78,72:[1,79],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,22:100,23:[2,52],63:101,64:76,65:[1,44],69:102,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,33:[2,92],62:103,63:104,64:76,65:[1,44],69:105,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,106]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:107,72:[1,108],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,109],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,110]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:56,39:[1,58],43:57,44:[1,59],45:112,46:111,47:[2,76]},{33:[2,70],40:113,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,114]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:75,63:116,64:76,65:[1,44],67:115,68:[2,96],69:117,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,118]},{32:119,33:[2,62],74:120,75:[1,121]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:122,74:123,75:[1,121]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,124]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,125]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,109]},{20:75,63:126,64:76,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:75,33:[2,72],41:127,63:128,64:76,65:[1,44],69:129,70:77,71:78,72:[1,79],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,130]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,131]},{33:[2,63]},{72:[1,133],76:132},{33:[1,134]},{33:[2,69]},{15:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:135,74:136,75:[1,121]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,138],77:[1,137]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,139]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],55:[2,55],57:[2,20],61:[2,57],74:[2,81],83:[2,85],87:[2,18],91:[2,89],102:[2,53],105:[2,93],111:[2,19],112:[2,77],117:[2,97],120:[2,63],123:[2,69],124:[2,12],136:[2,75],137:[2,32]},parseError:function(e,t){throw new Error(e)},parse:function(e){function t(){var e;return e=r.lexer.lex()||1,"number"!=typeof e&&(e=r.symbols_[e]||e),e}var r=this,n=[0],o=[null],i=[],a=this.table,s="",c=0,u=0,l=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var p=this.lexer.yylloc;i.push(p);var f=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var h,d,g,m,y,v,b,_,w,x={};;){if(g=n[n.length-1],this.defaultActions[g]?m=this.defaultActions[g]:(null!==h&&"undefined"!=typeof h||(h=t()),m=a[g]&&a[g][h]),"undefined"==typeof m||!m.length||!m[0]){var E="";if(!l){w=[];for(v in a[g])this.terminals_[v]&&v>2&&w.push("'"+this.terminals_[v]+"'");E=this.lexer.showPosition?"Parse error on line "+(c+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+w.join(", ")+", got '"+(this.terminals_[h]||h)+"'":"Parse error on line "+(c+1)+": Unexpected "+(1==h?"end of input":"'"+(this.terminals_[h]||h)+"'"),this.parseError(E,{text:this.lexer.match,token:this.terminals_[h]||h,line:this.lexer.yylineno,loc:p,expected:w})}}if(m[0]instanceof Array&&m.length>1)throw new Error("Parse Error: multiple actions possible at state: "+g+", token: "+h);switch(m[0]){case 1:n.push(h),o.push(this.lexer.yytext),i.push(this.lexer.yylloc),n.push(m[1]),h=null,d?(h=d,d=null):(u=this.lexer.yyleng,s=this.lexer.yytext,c=this.lexer.yylineno,p=this.lexer.yylloc,l>0&&l--);break;case 2:if(b=this.productions_[m[1]][1],x.$=o[o.length-b],x._$={first_line:i[i.length-(b||1)].first_line,last_line:i[i.length-1].last_line,first_column:i[i.length-(b||1)].first_column,last_column:i[i.length-1].last_column},f&&(x._$.range=[i[i.length-(b||1)].range[0],i[i.length-1].range[1]]),y=this.performAction.call(x,s,u,c,this.yy,m[1],o,i),"undefined"!=typeof y)return y;b&&(n=n.slice(0,-1*b*2),o=o.slice(0,-1*b),i=i.slice(0,-1*b)),n.push(this.productions_[m[1]][0]),o.push(x.$),i.push(x._$),_=a[n[n.length-2]][n[n.length-1]],n.push(_);break;case 3:return!0}}return!0}},r=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,r=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var o=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===n.length?this.yylloc.first_column:0)+n[n.length-r.length].length-r[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,r,n,o;this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),a=0;a<i.length&&(r=this._input.match(this.rules[i[a]]),!r||t&&!(r[0].length>t[0].length)||(t=r,n=a,this.options.flex));a++);return t?(o=t[0].match(/(?:\r\n?|\n).*/g),o&&(this.yylineno+=o.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:o?o[o.length-1].length-o[o.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,i[n],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e?e:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return"undefined"!=typeof e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)}};return e.options={},e.performAction=function(e,t,r,n){function o(e,r){return t.yytext=t.yytext.substr(e,t.yyleng-r)}switch(r){case 0:if("\\\\"===t.yytext.slice(-2)?(o(0,1),this.begin("mu")):"\\"===t.yytext.slice(-1)?(o(0,1),this.begin("emu")):this.begin("mu"),t.yytext)return 15;break;case 1:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:return this.popState(),"raw"===this.conditionStack[this.conditionStack.length-1]?15:(t.yytext=t.yytext.substr(5,t.yyleng-9),"END_RAW_BLOCK");case 5:return 15;case 6:return this.popState(),14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:return this.popState(),44;case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:return 48;case 21:this.unput(t.yytext),this.popState(),this.begin("com");break;case 22:return this.popState(),14;case 23:return 48;case 24:return 73;case 25:return 72;case 26:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return t.yytext=o(1,2).replace(/\\"/g,'"'),80;case 32:return t.yytext=o(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:return 82;case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 41:return 72;case 42:return t.yytext=t.yytext.replace(/\\([\\\]])/g,"$1"),72;case 43:return"INVALID";case 44:return 5}},e.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^\/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]*?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],e.conditions={mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}},e}();return t.lexer=r,e.prototype=t,t.Parser=e,new e}();t["default"]=r,e.exports=t["default"]},function(e,t,r){"use strict";function n(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.options=e}function o(e,t,r){void 0===t&&(t=e.length);var n=e[t-1],o=e[t-2];return n?"ContentStatement"===n.type?(o||!r?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(n.original):void 0:r}function i(e,t,r){void 0===t&&(t=-1);var n=e[t+1],o=e[t+2];return n?"ContentStatement"===n.type?(o||!r?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(n.original):void 0:r}function a(e,t,r){var n=e[null==t?0:t+1];if(n&&"ContentStatement"===n.type&&(r||!n.rightStripped)){var o=n.value;n.value=n.value.replace(r?/^\s+/:/^[ \t]*\r?\n?/,""),n.rightStripped=n.value!==o}}function s(e,t,r){var n=e[null==t?e.length-1:t-1];if(n&&"ContentStatement"===n.type&&(r||!n.leftStripped)){var o=n.value;return n.value=n.value.replace(r?/\s+$/:/[ \t]+$/,""),n.leftStripped=n.value!==o,n.leftStripped}}var c=r(1)["default"];t.__esModule=!0;var u=r(39),l=c(u);n.prototype=new l["default"],n.prototype.Program=function(e){var t=!this.options.ignoreStandalone,r=!this.isRootSeen;this.isRootSeen=!0;for(var n=e.body,c=0,u=n.length;u>c;c++){var l=n[c],p=this.accept(l);if(p){var f=o(n,c,r),h=i(n,c,r),d=p.openStandalone&&f,g=p.closeStandalone&&h,m=p.inlineStandalone&&f&&h;p.close&&a(n,c,!0),p.open&&s(n,c,!0),t&&m&&(a(n,c),s(n,c)&&"PartialStatement"===l.type&&(l.indent=/([ \t]+$)/.exec(n[c-1].original)[1])),t&&d&&(a((l.program||l.inverse).body),s(n,c)),t&&g&&(a(n,c),s((l.inverse||l.program).body))}}return e},n.prototype.BlockStatement=n.prototype.DecoratorBlock=n.prototype.PartialBlockStatement=function(e){this.accept(e.program),this.accept(e.inverse);var t=e.program||e.inverse,r=e.program&&e.inverse,n=r,c=r;if(r&&r.chained)for(n=r.body[0].program;c.chained;)c=c.body[c.body.length-1].program;var u={open:e.openStrip.open,close:e.closeStrip.close,openStandalone:i(t.body),closeStandalone:o((n||t).body)};if(e.openStrip.close&&a(t.body,null,!0),r){var l=e.inverseStrip;l.open&&s(t.body,null,!0),l.close&&a(n.body,null,!0),e.closeStrip.open&&s(c.body,null,!0),!this.options.ignoreStandalone&&o(t.body)&&i(n.body)&&(s(t.body),a(n.body))}else e.closeStrip.open&&s(t.body,null,!0);return u},n.prototype.Decorator=n.prototype.MustacheStatement=function(e){return e.strip},n.prototype.PartialStatement=n.prototype.CommentStatement=function(e){var t=e.strip||{};return{inlineStandalone:!0,open:t.open,close:t.close}},t["default"]=n,e.exports=t["default"]},function(e,t,r){"use strict";function n(){this.parents=[]}function o(e){this.acceptRequired(e,"path"),this.acceptArray(e.params),this.acceptKey(e,"hash")}function i(e){o.call(this,e),this.acceptKey(e,"program"),this.acceptKey(e,"inverse")}function a(e){this.acceptRequired(e,"name"),this.acceptArray(e.params),this.acceptKey(e,"hash")}var s=r(1)["default"];t.__esModule=!0;var c=r(6),u=s(c);n.prototype={constructor:n,mutating:!1,acceptKey:function(e,t){var r=this.accept(e[t]);if(this.mutating){if(r&&!n.prototype[r.type])throw new u["default"]('Unexpected node type "'+r.type+'" found when accepting '+t+" on "+e.type);e[t]=r}},acceptRequired:function(e,t){if(this.acceptKey(e,t),!e[t])throw new u["default"](e.type+" requires "+t)},acceptArray:function(e){for(var t=0,r=e.length;r>t;t++)this.acceptKey(e,t),e[t]||(e.splice(t,1),t--,r--)},accept:function(e){if(e){if(!this[e.type])throw new u["default"]("Unknown type: "+e.type,e);this.current&&this.parents.unshift(this.current),this.current=e;var t=this[e.type](e);return this.current=this.parents.shift(),!this.mutating||t?t:t!==!1?e:void 0}},Program:function(e){this.acceptArray(e.body)},MustacheStatement:o,Decorator:o,BlockStatement:i,DecoratorBlock:i,PartialStatement:a,PartialBlockStatement:function(e){a.call(this,e),this.acceptKey(e,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:o,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(e){this.acceptArray(e.pairs)},HashPair:function(e){this.acceptRequired(e,"value")}},t["default"]=n,e.exports=t["default"]},function(e,t,r){"use strict";function n(e,t){if(t=t.path?t.path.original:t,e.path.original!==t){var r={loc:e.path.loc};throw new m["default"](e.path.original+" doesn't match "+t,r)}}function o(e,t){this.source=e,this.start={line:t.first_line,column:t.first_column},this.end={line:t.last_line,column:t.last_column}}function i(e){return/^\[.*\]$/.test(e)?e.substr(1,e.length-2):e}function a(e,t){return{open:"~"===e.charAt(2),close:"~"===t.charAt(t.length-3)}}function s(e){return e.replace(/^\{\{~?\!-?-?/,"").replace(/-?-?~?\}\}$/,"")}function c(e,t,r){r=this.locInfo(r);for(var n=e?"@":"",o=[],i=0,a="",s=0,c=t.length;c>s;s++){var u=t[s].part,l=t[s].original!==u;if(n+=(t[s].separator||"")+u,l||".."!==u&&"."!==u&&"this"!==u)o.push(u);else{if(o.length>0)throw new m["default"]("Invalid path: "+n,{loc:r});".."===u&&(i++,a+="../")}}return{type:"PathExpression",data:e,depth:i,parts:o,original:n,loc:r}}function u(e,t,r,n,o,i){var a=n.charAt(3)||n.charAt(2),s="{"!==a&&"&"!==a,c=/\*/.test(n);return{type:c?"Decorator":"MustacheStatement",path:e,params:t,hash:r,escaped:s,strip:o,loc:this.locInfo(i)}}function l(e,t,r,o){n(e,r),o=this.locInfo(o);var i={type:"Program",body:t,strip:{},loc:o};return{type:"BlockStatement",path:e.path,params:e.params,hash:e.hash,program:i,openStrip:{},inverseStrip:{},closeStrip:{},loc:o}}function p(e,t,r,o,i,a){o&&o.path&&n(e,o);var s=/\*/.test(e.open);t.blockParams=e.blockParams;var c=void 0,u=void 0;if(r){if(s)throw new m["default"]("Unexpected inverse block on decorator",r);r.chain&&(r.program.body[0].closeStrip=o.strip),u=r.strip,c=r.program}return i&&(i=c,c=t,t=i),{type:s?"DecoratorBlock":"BlockStatement",path:e.path,params:e.params,hash:e.hash,program:t,inverse:c,openStrip:e.strip,inverseStrip:u,closeStrip:o&&o.strip,loc:this.locInfo(a)}}function f(e,t){if(!t&&e.length){var r=e[0].loc,n=e[e.length-1].loc;r&&n&&(t={source:r.source,start:{line:r.start.line,column:r.start.column},end:{line:n.end.line,column:n.end.column}})}return{type:"Program",body:e,strip:{},loc:t}}function h(e,t,r,o){return n(e,r),{type:"PartialBlockStatement",name:e.path,params:e.params,hash:e.hash,program:t,openStrip:e.strip,closeStrip:r&&r.strip,loc:this.locInfo(o)}}var d=r(1)["default"];t.__esModule=!0,t.SourceLocation=o,t.id=i,t.stripFlags=a,t.stripComment=s,t.preparePath=c,t.prepareMustache=u,t.prepareRawBlock=l,t.prepareBlock=p,t.prepareProgram=f,t.preparePartialBlock=h;var g=r(6),m=d(g)},function(e,t,r){"use strict";function n(){}function o(e,t,r){if(null==e||"string"!=typeof e&&"Program"!==e.type)throw new l["default"]("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e);t=t||{},"data"in t||(t.data=!0),t.compat&&(t.useDepths=!0);var n=r.parse(e,t),o=(new r.Compiler).compile(n,t);return(new r.JavaScriptCompiler).compile(o,t)}function i(e,t,r){function n(){var n=r.parse(e,t),o=(new r.Compiler).compile(n,t),i=(new r.JavaScriptCompiler).compile(o,t,void 0,!0);return r.template(i)}function o(e,t){return i||(i=n()),i.call(this,e,t)}if(void 0===t&&(t={}),null==e||"string"!=typeof e&&"Program"!==e.type)throw new l["default"]("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+e);t=p.extend({},t),"data"in t||(t.data=!0),t.compat&&(t.useDepths=!0);var i=void 0;return o._setup=function(e){return i||(i=n()),i._setup(e)},o._child=function(e,t,r,o){return i||(i=n()),i._child(e,t,r,o)},o}function a(e,t){if(e===t)return!0;if(p.isArray(e)&&p.isArray(t)&&e.length===t.length){for(var r=0;r<e.length;r++)if(!a(e[r],t[r]))return!1;return!0}}function s(e){if(!e.path.parts){var t=e.path;e.path={type:"PathExpression",data:!1,depth:0,parts:[t.original+""],original:t.original+"",loc:t.loc}}}var c=r(1)["default"];t.__esModule=!0,t.Compiler=n,t.precompile=o,t.compile=i;var u=r(6),l=c(u),p=r(5),f=r(35),h=c(f),d=[].slice;n.prototype={compiler:n,equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var r=0;t>r;r++){var n=this.opcodes[r],o=e.opcodes[r];if(n.opcode!==o.opcode||!a(n.args,o.args))return!1}t=this.children.length;for(var r=0;t>r;r++)if(!this.children[r].equals(e.children[r]))return!1;return!0},guid:0,compile:function(e,t){this.sourceNode=[],this.opcodes=[],this.children=[],this.options=t,this.stringParams=t.stringParams,this.trackIds=t.trackIds,t.blockParams=t.blockParams||[];var r=t.knownHelpers;if(t.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0,lookup:!0},r)for(var n in r)n in r&&(this.options.knownHelpers[n]=r[n]);return this.accept(e)},compileProgram:function(e){var t=new this.compiler,r=t.compile(e,this.options),n=this.guid++;return this.usePartial=this.usePartial||r.usePartial,this.children[n]=r,this.useDepths=this.useDepths||r.useDepths,n},accept:function(e){if(!this[e.type])throw new l["default"]("Unknown type: "+e.type,e);this.sourceNode.unshift(e);var t=this[e.type](e);return this.sourceNode.shift(),t},Program:function(e){this.options.blockParams.unshift(e.blockParams);for(var t=e.body,r=t.length,n=0;r>n;n++)this.accept(t[n]);return this.options.blockParams.shift(),this.isSimple=1===r,this.blockParams=e.blockParams?e.blockParams.length:0,this},BlockStatement:function(e){s(e);var t=e.program,r=e.inverse;t=t&&this.compileProgram(t),r=r&&this.compileProgram(r);var n=this.classifySexpr(e);"helper"===n?this.helperSexpr(e,t,r):"simple"===n?(this.simpleSexpr(e),this.opcode("pushProgram",t),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("blockValue",e.path.original)):(this.ambiguousSexpr(e,t,r),this.opcode("pushProgram",t),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function(e){var t=e.program&&this.compileProgram(e.program),r=this.setupFullMustacheParams(e,t,void 0),n=e.path;this.useDecorators=!0,this.opcode("registerDecorator",r.length,n.original)},PartialStatement:function(e){this.usePartial=!0;var t=e.program;t&&(t=this.compileProgram(e.program));var r=e.params;if(r.length>1)throw new l["default"]("Unsupported number of partial arguments: "+r.length,e);r.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):r.push({type:"PathExpression",parts:[],depth:0}));var n=e.name.original,o="SubExpression"===e.name.type;o&&this.accept(e.name),this.setupFullMustacheParams(e,t,void 0,!0);var i=e.indent||"";this.options.preventIndent&&i&&(this.opcode("appendContent",i),i=""),this.opcode("invokePartial",o,n,i),this.opcode("append")},PartialBlockStatement:function(e){this.PartialStatement(e)},MustacheStatement:function(e){this.SubExpression(e),e.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function(e){this.DecoratorBlock(e)},ContentStatement:function(e){e.value&&this.opcode("appendContent",e.value)},CommentStatement:function(){},SubExpression:function(e){s(e);var t=this.classifySexpr(e);"simple"===t?this.simpleSexpr(e):"helper"===t?this.helperSexpr(e):this.ambiguousSexpr(e)},ambiguousSexpr:function(e,t,r){var n=e.path,o=n.parts[0],i=null!=t||null!=r;this.opcode("getContext",n.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",r),n.strict=!0,this.accept(n),this.opcode("invokeAmbiguous",o,i)},simpleSexpr:function(e){var t=e.path;t.strict=!0,this.accept(t),this.opcode("resolvePossibleLambda")},helperSexpr:function(e,t,r){var n=this.setupFullMustacheParams(e,t,r),o=e.path,i=o.parts[0];if(this.options.knownHelpers[i])this.opcode("invokeKnownHelper",n.length,i);else{
if(this.options.knownHelpersOnly)throw new l["default"]("You specified knownHelpersOnly, but used the unknown helper "+i,e);o.strict=!0,o.falsy=!0,this.accept(o),this.opcode("invokeHelper",n.length,o.original,h["default"].helpers.simpleId(o))}},PathExpression:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0],r=h["default"].helpers.scopedId(e),n=!e.depth&&!r&&this.blockParamIndex(t);n?this.opcode("lookupBlockParam",n,e.parts):t?e.data?(this.options.data=!0,this.opcode("lookupData",e.depth,e.parts,e.strict)):this.opcode("lookupOnContext",e.parts,e.falsy,e.strict,r):this.opcode("pushContext")},StringLiteral:function(e){this.opcode("pushString",e.value)},NumberLiteral:function(e){this.opcode("pushLiteral",e.value)},BooleanLiteral:function(e){this.opcode("pushLiteral",e.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(e){var t=e.pairs,r=0,n=t.length;for(this.opcode("pushHash");n>r;r++)this.pushParam(t[r].value);for(;r--;)this.opcode("assignToHash",t[r].key);this.opcode("popHash")},opcode:function(e){this.opcodes.push({opcode:e,args:d.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(e){e&&(this.useDepths=!0)},classifySexpr:function(e){var t=h["default"].helpers.simpleId(e.path),r=t&&!!this.blockParamIndex(e.path.parts[0]),n=!r&&h["default"].helpers.helperExpression(e),o=!r&&(n||t);if(o&&!n){var i=e.path.parts[0],a=this.options;a.knownHelpers[i]?n=!0:a.knownHelpersOnly&&(o=!1)}return n?"helper":o?"ambiguous":"simple"},pushParams:function(e){for(var t=0,r=e.length;r>t;t++)this.pushParam(e[t])},pushParam:function(e){var t=null!=e.value?e.value:e.original||"";if(this.stringParams)t.replace&&(t=t.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",t,e.type),"SubExpression"===e.type&&this.accept(e);else{if(this.trackIds){var r=void 0;if(!e.parts||h["default"].helpers.scopedId(e)||e.depth||(r=this.blockParamIndex(e.parts[0])),r){var n=e.parts.slice(1).join(".");this.opcode("pushId","BlockParam",r,n)}else t=e.original||t,t.replace&&(t=t.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",e.type,t)}this.accept(e)}},setupFullMustacheParams:function(e,t,r,n){var o=e.params;return this.pushParams(o),this.opcode("pushProgram",t),this.opcode("pushProgram",r),e.hash?this.accept(e.hash):this.opcode("emptyHash",n),o},blockParamIndex:function(e){for(var t=0,r=this.options.blockParams.length;r>t;t++){var n=this.options.blockParams[t],o=n&&p.indexOf(n,e);if(n&&o>=0)return[t,o]}}}},function(e,t,r){"use strict";function n(e){this.value=e}function o(){}function i(e,t,r,n){var o=t.popStack(),i=0,a=r.length;for(e&&a--;a>i;i++)o=t.nameLookup(o,r[i],n);return e?[t.aliasable("container.strict"),"(",o,", ",t.quotedString(r[i]),")"]:o}var a=r(1)["default"];t.__esModule=!0;var s=r(4),c=r(6),u=a(c),l=r(5),p=r(43),f=a(p);o.prototype={nameLookup:function(e,t){return o.isValidJavaScriptVariableName(t)?[e,".",t]:[e,"[",JSON.stringify(t),"]"]},depthedLookup:function(e){return[this.aliasable("container.lookup"),'(depths, "',e,'")']},compilerInfo:function(){var e=s.COMPILER_REVISION,t=s.REVISION_CHANGES[e];return[e,t]},appendToBuffer:function(e,t,r){return l.isArray(e)||(e=[e]),e=this.source.wrap(e,t),this.environment.isSimple?["return ",e,";"]:r?["buffer += ",e,";"]:(e.appendToBuffer=!0,e)},initializeBuffer:function(){return this.quotedString("")},compile:function(e,t,r,n){this.environment=e,this.options=t,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!n,this.name=this.environment.name,this.isChild=!!r,this.context=r||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(e,t),this.useDepths=this.useDepths||e.useDepths||e.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||e.useBlockParams;var o=e.opcodes,i=void 0,a=void 0,s=void 0,c=void 0;for(s=0,c=o.length;c>s;s++)i=o[s],this.source.currentLocation=i.loc,a=a||i.loc,this[i.opcode].apply(this,i.args);if(this.source.currentLocation=a,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new u["default"]("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend("var decorators = container.decorators;\n"),this.decorators.push("return fn;"),n?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend("function(fn, props, container, depth0, data, blockParams, depths) {\n"),this.decorators.push("}\n"),this.decorators=this.decorators.merge()));var l=this.createFunctionContext(n);if(this.isChild)return l;var p={compiler:this.compilerInfo(),main:l};this.decorators&&(p.main_d=this.decorators,p.useDecorators=!0);var f=this.context,h=f.programs,d=f.decorators;for(s=0,c=h.length;c>s;s++)h[s]&&(p[s]=h[s],d[s]&&(p[s+"_d"]=d[s],p.useDecorators=!0));return this.environment.usePartial&&(p.usePartial=!0),this.options.data&&(p.useData=!0),this.useDepths&&(p.useDepths=!0),this.useBlockParams&&(p.useBlockParams=!0),this.options.compat&&(p.compat=!0),n?p.compilerOptions=this.options:(p.compiler=JSON.stringify(p.compiler),this.source.currentLocation={start:{line:1,column:0}},p=this.objectLiteral(p),t.srcName?(p=p.toStringWithSourceMap({file:t.destName}),p.map=p.map&&p.map.toString()):p=p.toString()),p},preamble:function(){this.lastContext=0,this.source=new f["default"](this.options.srcName),this.decorators=new f["default"](this.options.srcName)},createFunctionContext:function(e){var t="",r=this.stackVars.concat(this.registers.list);r.length>0&&(t+=", "+r.join(", "));var n=0;for(var o in this.aliases){var i=this.aliases[o];this.aliases.hasOwnProperty(o)&&i.children&&i.referenceCount>1&&(t+=", alias"+ ++n+"="+o,i.children[0]="alias"+n)}var a=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&a.push("blockParams"),this.useDepths&&a.push("depths");var s=this.mergeSource(t);return e?(a.push(s),Function.apply(this,a)):this.source.wrap(["function(",a.join(","),") {\n  ",s,"}"])},mergeSource:function(e){var t=this.environment.isSimple,r=!this.forceBuffer,n=void 0,o=void 0,i=void 0,a=void 0;return this.source.each(function(e){e.appendToBuffer?(i?e.prepend("  + "):i=e,a=e):(i&&(o?i.prepend("buffer += "):n=!0,a.add(";"),i=a=void 0),o=!0,t||(r=!1))}),r?i?(i.prepend("return "),a.add(";")):o||this.source.push('return "";'):(e+=", buffer = "+(n?"":this.initializeBuffer()),i?(i.prepend("return buffer + "),a.add(";")):this.source.push("return buffer;")),e&&this.source.prepend("var "+e.substring(2)+(n?"":";\n")),this.source.merge()},blockValue:function(e){var t=this.aliasable("helpers.blockHelperMissing"),r=[this.contextName(0)];this.setupHelperArgs(e,0,r);var n=this.popStack();r.splice(1,0,n),this.push(this.source.functionCall(t,"call",r))},ambiguousBlockValue:function(){var e=this.aliasable("helpers.blockHelperMissing"),t=[this.contextName(0)];this.setupHelperArgs("",0,t,!0),this.flushInline();var r=this.topStack();t.splice(1,0,r),this.pushSource(["if (!",this.lastHelper,") { ",r," = ",this.source.functionCall(e,"call",t),"}"])},appendContent:function(e){this.pendingContent?e=this.pendingContent+e:this.pendingLocation=this.source.currentLocation,this.pendingContent=e},append:function(){if(this.isInline())this.replaceStack(function(e){return[" != null ? ",e,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()));else{var e=this.popStack();this.pushSource(["if (",e," != null) { ",this.appendToBuffer(e,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(e){this.lastContext=e},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(e,t,r,n){var o=0;n||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(e[o++])),this.resolvePath("context",e,o,t,r)},lookupBlockParam:function(e,t){this.useBlockParams=!0,this.push(["blockParams[",e[0],"][",e[1],"]"]),this.resolvePath("context",t,1)},lookupData:function(e,t,r){e?this.pushStackLiteral("container.data(data, "+e+")"):this.pushStackLiteral("data"),this.resolvePath("data",t,0,!0,r)},resolvePath:function(e,t,r,n,o){var a=this;if(this.options.strict||this.options.assumeObjects)return void this.push(i(this.options.strict&&o,this,t,e));for(var s=t.length;s>r;r++)this.replaceStack(function(o){var i=a.nameLookup(o,t[r],e);return n?[" && ",i]:[" != null ? ",i," : ",o]})},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(e,t){this.pushContext(),this.pushString(t),"SubExpression"!==t&&("string"==typeof e?this.pushString(e):this.pushStackLiteral(e))},emptyHash:function(e){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(e?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[],ids:[]}},popHash:function(){var e=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(e.ids)),this.stringParams&&(this.push(this.objectLiteral(e.contexts)),this.push(this.objectLiteral(e.types))),this.push(this.objectLiteral(e.values))},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){null!=e?this.pushStackLiteral(this.programExpression(e)):this.pushStackLiteral(null)},registerDecorator:function(e,t){var r=this.nameLookup("decorators",t,"decorator"),n=this.setupHelperArgs(t,e);this.decorators.push(["fn = ",this.decorators.functionCall(r,"",["fn","props","container",n])," || fn;"])},invokeHelper:function(e,t,r){var n=this.popStack(),o=this.setupHelper(e,t),i=r?[o.name," || "]:"",a=["("].concat(i,n);this.options.strict||a.push(" || ",this.aliasable("helpers.helperMissing")),a.push(")"),this.push(this.source.functionCall(a,"call",o.callParams))},invokeKnownHelper:function(e,t){var r=this.setupHelper(e,t);this.push(this.source.functionCall(r.name,"call",r.callParams))},invokeAmbiguous:function(e,t){this.useRegister("helper");var r=this.popStack();this.emptyHash();var n=this.setupHelper(0,e,t),o=this.lastHelper=this.nameLookup("helpers",e,"helper"),i=["(","(helper = ",o," || ",r,")"];this.options.strict||(i[0]="(helper = ",i.push(" != null ? helper : ",this.aliasable("helpers.helperMissing"))),this.push(["(",i,n.paramsInit?["),(",n.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",n.callParams)," : helper))"])},invokePartial:function(e,t,r){var n=[],o=this.setupParams(t,1,n);e&&(t=this.popStack(),delete o.name),r&&(o.indent=JSON.stringify(r)),o.helpers="helpers",o.partials="partials",o.decorators="container.decorators",e?n.unshift(t):n.unshift(this.nameLookup("partials",t,"partial")),this.options.compat&&(o.depths="depths"),o=this.objectLiteral(o),n.push(o),this.push(this.source.functionCall("container.invokePartial","",n))},assignToHash:function(e){var t=this.popStack(),r=void 0,n=void 0,o=void 0;this.trackIds&&(o=this.popStack()),this.stringParams&&(n=this.popStack(),r=this.popStack());var i=this.hash;r&&(i.contexts[e]=r),n&&(i.types[e]=n),o&&(i.ids[e]=o),i.values[e]=t},pushId:function(e,t,r){"BlockParam"===e?this.pushStackLiteral("blockParams["+t[0]+"].path["+t[1]+"]"+(r?" + "+JSON.stringify("."+r):"")):"PathExpression"===e?this.pushString(t):"SubExpression"===e?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:o,compileChildren:function(e,t){for(var r=e.children,n=void 0,o=void 0,i=0,a=r.length;a>i;i++){n=r[i],o=new this.compiler;var s=this.matchExistingProgram(n);if(null==s){this.context.programs.push("");var c=this.context.programs.length;n.index=c,n.name="program"+c,this.context.programs[c]=o.compile(n,t,this.context,!this.precompile),this.context.decorators[c]=o.decorators,this.context.environments[c]=n,this.useDepths=this.useDepths||o.useDepths,this.useBlockParams=this.useBlockParams||o.useBlockParams,n.useDepths=this.useDepths,n.useBlockParams=this.useBlockParams}else n.index=s.index,n.name="program"+s.index,this.useDepths=this.useDepths||s.useDepths,this.useBlockParams=this.useBlockParams||s.useBlockParams}},matchExistingProgram:function(e){for(var t=0,r=this.context.environments.length;r>t;t++){var n=this.context.environments[t];if(n&&n.equals(e))return n}},programExpression:function(e){var t=this.environment.children[e],r=[t.index,"data",t.blockParams];return(this.useBlockParams||this.useDepths)&&r.push("blockParams"),this.useDepths&&r.push("depths"),"container.program("+r.join(", ")+")"},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},push:function(e){return e instanceof n||(e=this.source.wrap(e)),this.inlineStack.push(e),e},pushStackLiteral:function(e){this.push(new n(e))},pushSource:function(e){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),e&&this.source.push(e)},replaceStack:function(e){var t=["("],r=void 0,o=void 0,i=void 0;if(!this.isInline())throw new u["default"]("replaceStack on non-inline");var a=this.popStack(!0);if(a instanceof n)r=[a.value],t=["(",r],i=!0;else{o=!0;var s=this.incrStack();t=["((",this.push(s)," = ",a,")"],r=this.topStack()}var c=e.call(this,r);i||this.popStack(),o&&this.stackSlot--,this.push(t.concat(c,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;this.inlineStack=[];for(var t=0,r=e.length;r>t;t++){var o=e[t];if(o instanceof n)this.compileStack.push(o);else{var i=this.incrStack();this.pushSource([i," = ",o,";"]),this.compileStack.push(i)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),r=(t?this.inlineStack:this.compileStack).pop();if(!e&&r instanceof n)return r.value;if(!t){if(!this.stackSlot)throw new u["default"]("Invalid stack pop");this.stackSlot--}return r},topStack:function(){var e=this.isInline()?this.inlineStack:this.compileStack,t=e[e.length-1];return t instanceof n?t.value:t},contextName:function(e){return this.useDepths&&e?"depths["+e+"]":"depth"+e},quotedString:function(e){return this.source.quotedString(e)},objectLiteral:function(e){return this.source.objectLiteral(e)},aliasable:function(e){var t=this.aliases[e];return t?(t.referenceCount++,t):(t=this.aliases[e]=this.source.wrap(e),t.aliasable=!0,t.referenceCount=1,t)},setupHelper:function(e,t,r){var n=[],o=this.setupHelperArgs(t,e,n,r),i=this.nameLookup("helpers",t,"helper"),a=this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})");return{params:n,paramsInit:o,name:i,callParams:[a].concat(n)}},setupParams:function(e,t,r){var n={},o=[],i=[],a=[],s=!r,c=void 0;s&&(r=[]),n.name=this.quotedString(e),n.hash=this.popStack(),this.trackIds&&(n.hashIds=this.popStack()),this.stringParams&&(n.hashTypes=this.popStack(),n.hashContexts=this.popStack());var u=this.popStack(),l=this.popStack();(l||u)&&(n.fn=l||"container.noop",n.inverse=u||"container.noop");for(var p=t;p--;)c=this.popStack(),r[p]=c,this.trackIds&&(a[p]=this.popStack()),this.stringParams&&(i[p]=this.popStack(),o[p]=this.popStack());return s&&(n.args=this.source.generateArray(r)),this.trackIds&&(n.ids=this.source.generateArray(a)),this.stringParams&&(n.types=this.source.generateArray(i),n.contexts=this.source.generateArray(o)),this.options.data&&(n.data="data"),this.useBlockParams&&(n.blockParams="blockParams"),n},setupHelperArgs:function(e,t,r,n){var o=this.setupParams(e,t,r);return o=this.objectLiteral(o),n?(this.useRegister("options"),r.push("options"),["options=",o]):r?(r.push(o),""):o}},function(){for(var e="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),t=o.RESERVED_WORDS={},r=0,n=e.length;n>r;r++)t[e[r]]=!0}(),o.isValidJavaScriptVariableName=function(e){return!o.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e)},t["default"]=o,e.exports=t["default"]},function(e,t,r){"use strict";function n(e,t,r){if(i.isArray(e)){for(var n=[],o=0,a=e.length;a>o;o++)n.push(t.wrap(e[o],r));return n}return"boolean"==typeof e||"number"==typeof e?e+"":e}function o(e){this.srcFile=e,this.source=[]}t.__esModule=!0;var i=r(5),a=void 0;try{}catch(s){}a||(a=function(e,t,r,n){this.src="",n&&this.add(n)},a.prototype={add:function(e){i.isArray(e)&&(e=e.join("")),this.src+=e},prepend:function(e){i.isArray(e)&&(e=e.join("")),this.src=e+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),o.prototype={isEmpty:function(){return!this.source.length},prepend:function(e,t){this.source.unshift(this.wrap(e,t))},push:function(e,t){this.source.push(this.wrap(e,t))},merge:function(){var e=this.empty();return this.each(function(t){e.add(["  ",t,"\n"])}),e},each:function(e){for(var t=0,r=this.source.length;r>t;t++)e(this.source[t])},empty:function(){var e=this.currentLocation||{start:{}};return new a(e.start.line,e.start.column,this.srcFile)},wrap:function(e){var t=arguments.length<=1||void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return e instanceof a?e:(e=n(e,this,t),new a(t.start.line,t.start.column,this.srcFile,e))},functionCall:function(e,t,r){return r=this.generateList(r),this.wrap([e,t?"."+t+"(":"(",r,")"])},quotedString:function(e){return'"'+(e+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(e){var t=[];for(var r in e)if(e.hasOwnProperty(r)){var o=n(e[r],this);"undefined"!==o&&t.push([this.quotedString(r),":",o])}var i=this.generateList(t);return i.prepend("{"),i.add("}"),i},generateList:function(e){for(var t=this.empty(),r=0,o=e.length;o>r;r++)r&&t.add(","),t.add(n(e[r],this));return t},generateArray:function(e){var t=this.generateList(e);return t.prepend("["),t.add("]"),t}},t["default"]=o,e.exports=t["default"]}])})},{}],28:[function(e,t,r){t.exports=function(e,t,r){var n={attr:e.toLowerCase()};return t&&(n.tag=t.toLowerCase()),r&&(n.valuePolicy=r),n}},{}],29:[function(e,t,r){var n=e("insane"),o=e("./insane-config-builder");t.exports=function(e){var t=o(e);return function(e){return n(e,t,!0)}}},{"./insane-config-builder":30,insane:36}],30:[function(e,t,r){function n(e){return l(e)?String(e):""}function o(e,t){var r=Object.keys(t.attrs),n=r.map(function(e){return e.toLowerCase()}),o=n.indexOf(e);return o>-1?r[o]:void 0}function i(e){return e.map(function(e){return e.name.toLowerCase()})}function a(e,t){var r=e.global.reduce(function(e,r){var n=t.map(function(e){return u(r.attr,e,r.valuePolicy)});return e.concat(n)},[]);return e.tagSpecific.concat(r).reduce(function(e,t){var r=e[t.tag],n=t.attr;return r||(r=e[t.tag]=[]),-1===r.indexOf(n)&&r.push(n),e},{})}function s(e){return e.tagSpecific.concat(e.global).filter(function(e){var t=e.valuePolicy;return t&&l(t.values)}).map(function(e){var t=e.tag,r=e.attr,i=e.valuePolicy,a=i.ignoreCase!==!1,s=[].concat(i.values).map(function(e){var t=n(e);return a?t.toLowerCase():t});return function(e){var i=o(r,e),c=n(e.attrs[i]),u=a?c.toLowerCase():c;return t&&e.tag!==t||!i||-1===s.indexOf(u)&&delete e.attrs[i],!0}})}function c(){return function(e){var t=o("rel",e),r=e.attrs[t];return"a"===e.tag&&(t||(t="rel"),l(r)||(r=""),e.attrs[t]=r+(r.length?" ":"")+"nofollow noopener noreferrer"),!0}}var u=e("./attribute-policy-builder"),l=e("./utils").isDefined;t.exports=function(e){var t={},r=i(e.tagPolicies),n=a(e.attrPolicies,r),o=s(e.attrPolicies);return e.requireNofollowOnAnchors&&o.push(c()),t.allowedTags=r,t.allowedAttributes=n,t.allowedSchemes=e.urlProtocols,o.length&&(t.filter=function(e){return o.reduce(function(t,r){return t?r(e):!1},!0)}),t}},{"./attribute-policy-builder":28,"./utils":32}],31:[function(e,t,r){function n(e){var t=c(e.elements)?[].concat(e.elements):[];return t.filter(function(e){return"string"==typeof e}).map(function(e){return{name:e.toLowerCase()}})}function o(e){var t=c(e.attributes)?[].concat(e.attributes):[],r={global:[],tagSpecific:[]};return t.filter(function(e){return c(e.names)}).forEach(function(e){var t=c(e.on)?[].concat(e.on):[];[].concat(e.names).filter(function(e){return"string"==typeof e}).forEach(function(n){t.length>0?t.forEach(function(t){r.tagSpecific.push(s(n,t,e.matching))}):r.global.push(s(n,null,e.matching))})}),r}function i(e){var t="object"==typeof e?e:{},r={};return r.tagPolicies=n(t),r.attrPolicies=o(t),r.urlProtocols=t.urlProtocols,r.requireNofollowOnAnchors=t.requireRelNofollowOnLinks!==!1,r}function a(e){var t=i(e);return u(t)}var s=e("./attribute-policy-builder"),c=e("./utils").isDefined,u=e("./insane-adapter");t.exports={create:a}},{"./attribute-policy-builder":28,"./insane-adapter":29,"./utils":32}],32:[function(e,t,r){function n(e){return void 0!==e&&null!==e}t.exports={isDefined:n}},{}],33:[function(e,t,r){"use strict";var n=e("./toMap"),o=["background","base","cite","href","longdesc","src","usemap"];t.exports={uris:n(o)}},{"./toMap":42}],34:[function(e,t,r){"use strict";var n={allowedAttributes:{a:["href","name","target","title","aria-label"],iframe:["allowfullscreen","frameborder","src"],img:["src","alt","title","aria-label"]},allowedClasses:{},allowedSchemes:["http","https","mailto"],allowedTags:["a","abbr","article","b","blockquote","br","caption","code","del","details","div","em","h1","h2","h3","h4","h5","h6","hr","i","img","ins","kbd","li","main","mark","ol","p","pre","section","span","strike","strong","sub","summary","sup","table","tbody","td","th","thead","tr","u","ul"],filter:null};t.exports=n},{}],35:[function(e,t,r){"use strict";var n=e("./toMap"),o=["area","br","col","hr","img","wbr","input","base","basefont","link","meta"];t.exports={voids:n(o)}},{"./toMap":42}],36:[function(e,t,r){"use strict";function n(e,t,r){var n=[],c=r===!0?t:o({},s,t),u=a(n,c);return i(e,u),n.join("")}var o=(e("he"),e("assignment")),i=e("./parser"),a=e("./sanitizer"),s=e("./defaults");n.defaults=s,t.exports=n},{"./defaults":34,"./parser":39,"./sanitizer":40,assignment:38,he:41}],37:[function(e,t,r){"use strict";t.exports=function(e){return"string"==typeof e?e.toLowerCase():e}},{}],38:[function(e,t,r){"use strict";function n(e){for(var t,r,o=Array.prototype.slice.call(arguments,1);o.length;){t=o.shift();for(r in t)t.hasOwnProperty(r)&&("[object Object]"===Object.prototype.toString.call(e[r])?e[r]=n(e[r],t[r]):e[r]=t[r])}return e}t.exports=n},{}],39:[function(e,t,r){"use strict";function n(){var e=[];return e.lastItem=function(){return e[e.length-1]},e}function o(e,t){function r(){v=!0,o();var t=e===_;_=e,t&&(e="")}function o(){"<!--"===e.substr(0,4)?d():f.test(e)?h(u,y):p.test(e)&&h(c,m),g()}function h(t,r){var n=e.match(t);n&&(e=e.substring(n[0].length),n[0].replace(t,r),v=!1)}function d(){var r=e.indexOf("-->");r>=0&&(t.comment&&t.comment(e.substring(4,r)),e=e.substring(r+3),v=!1)}function g(){if(v){var r,n=e.indexOf("<");n>=0?(r=e.substring(0,n),e=e.substring(n)):(r=e,e=""),t.chars&&t.chars(r)}}function m(e,r,n,o){function c(e,t,r,n,o){void 0===r&&void 0===n&&void 0===o?u[t]=void 0:u[t]=i.decode(r||n||o||"")}var u={},p=a(r),f=s.voids[p]||!!o;n.replace(l,c),f||b.push(p),t.start&&t.start(p,u,f)}function y(e,r){var n,o=0,i=a(r);if(i)for(o=b.length-1;o>=0&&b[o]!==i;o--);if(o>=0){for(n=b.length-1;n>=o;n--)t.end&&t.end(b[n]);b.length=o}}for(var v,b=n(),_=e;e;)r();y()}var i=e("he"),a=e("./lowercase"),s=(e("./attributes"),e("./elements")),c=/^<\s*([\w:-]+)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*>/,u=/^<\s*\/\s*([\w:-]+)[^>]*>/,l=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,p=/^</,f=/^<\s*\//;t.exports=o},{"./attributes":33,"./elements":35,"./lowercase":37,he:41}],40:[function(e,t,r){"use strict";function n(e,t){function r(t){e.push(t)}function n(e,t,n){function s(e){function n(e){return p&&-1!==p.indexOf(e)}var s,l=t[e],p=(g.allowedClasses||{})[c]||[],f=(g.allowedAttributes||{})[c]||[],h=i(e);"class"===h&&-1===f.indexOf(h)?(l=l.split(" ").filter(n).join(" ").trim(),s=l.length):s=-1!==f.indexOf(h)&&(a.uris[h]!==!0||u(l)),s&&(r(" "),r(e),"string"==typeof l&&(r('="'),r(o.encode(l)),r('"')))}var c=i(e);return d.ignoring?void p(c):-1===(g.allowedTags||[]).indexOf(c)?void p(c):g.filter&&!g.filter({tag:c,attrs:t})?void p(c):(r("<"),r(c),Object.keys(t).forEach(s),void r(n?"/>":">"))}function c(e){var t=i(e),n=-1!==(g.allowedTags||[]).indexOf(t);n&&d.ignoring===!1?(r("</"),r(t),r(">")):f(t)}function u(e){function t(t){return 0===e.indexOf(t+":")}var r=e[0];if("#"===r||"/"===r)return!0;var n=e.indexOf(":");if(-1===n)return!0;var o=e.indexOf("?");if(-1!==o&&n>o)return!0;var i=e.indexOf("#");return-1!==i&&n>i?!0:g.allowedSchemes.some(t)}function l(e){d.ignoring===!1&&r(g.transformText?g.transformText(e):e)}function p(e){s.voids[e]||(d.ignoring===!1?d={ignoring:e,depth:1}:d.ignoring===e&&d.depth++)}function f(e){d.ignoring===e&&--d.depth<=0&&h()}function h(){d={ignoring:!1,depth:0}}var d,g=t||{};return h(),{start:n,end:c,chars:l}}var o=e("he"),i=e("./lowercase"),a=e("./attributes"),s=e("./elements");t.exports=n},{"./attributes":33,"./elements":35,"./lowercase":37,he:41}],41:[function(e,t,r){"use strict";function n(e){return s[e]}function o(e){return c[e]}function i(e){return null==e?"":String(e).replace(l,n)}function a(e){return null==e?"":String(e).replace(u,o)}var s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},c={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},u=/(&amp;|&lt;|&gt;|&quot;|&#39;)/g,l=/[&<>"']/g;i.options=a.options={},t.exports={encode:i,escape:i,decode:a,unescape:a,version:"1.0.0-browser"}},{}],42:[function(e,t,r){"use strict";function n(e){return e.reduce(o,{})}function o(e,t){return e[t]=!0,e}t.exports=n},{}],43:[function(e,t,r){var n=e("./_getNative"),o=e("./_root"),i=n(o,"DataView");t.exports=i},{"./_getNative":110,"./_root":151}],44:[function(e,t,r){function n(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}var o=e("./_hashClear"),i=e("./_hashDelete"),a=e("./_hashGet"),s=e("./_hashHas"),c=e("./_hashSet");n.prototype.clear=o,n.prototype["delete"]=i,n.prototype.get=a,n.prototype.has=s,n.prototype.set=c,t.exports=n},{"./_hashClear":117,"./_hashDelete":118,"./_hashGet":119,"./_hashHas":120,"./_hashSet":121}],45:[function(e,t,r){function n(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}var o=e("./_listCacheClear"),i=e("./_listCacheDelete"),a=e("./_listCacheGet"),s=e("./_listCacheHas"),c=e("./_listCacheSet");n.prototype.clear=o,n.prototype["delete"]=i,n.prototype.get=a,n.prototype.has=s,n.prototype.set=c,t.exports=n},{"./_listCacheClear":132,"./_listCacheDelete":133,"./_listCacheGet":134,"./_listCacheHas":135,"./_listCacheSet":136}],46:[function(e,t,r){var n=e("./_getNative"),o=e("./_root"),i=n(o,"Map");t.exports=i},{"./_getNative":110,"./_root":151}],47:[function(e,t,r){function n(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}var o=e("./_mapCacheClear"),i=e("./_mapCacheDelete"),a=e("./_mapCacheGet"),s=e("./_mapCacheHas"),c=e("./_mapCacheSet");n.prototype.clear=o,n.prototype["delete"]=i,n.prototype.get=a,n.prototype.has=s,n.prototype.set=c,t.exports=n},{"./_mapCacheClear":137,"./_mapCacheDelete":138,"./_mapCacheGet":139,"./_mapCacheHas":140,"./_mapCacheSet":141}],48:[function(e,t,r){var n=e("./_getNative"),o=e("./_root"),i=n(o,"Promise");t.exports=i},{"./_getNative":110,"./_root":151}],49:[function(e,t,r){var n=e("./_getNative"),o=e("./_root"),i=n(o,"Set");t.exports=i},{"./_getNative":110,"./_root":151}],50:[function(e,t,r){function n(e){var t=this.__data__=new o(e);this.size=t.size}var o=e("./_ListCache"),i=e("./_stackClear"),a=e("./_stackDelete"),s=e("./_stackGet"),c=e("./_stackHas"),u=e("./_stackSet");n.prototype.clear=i,n.prototype["delete"]=a,n.prototype.get=s,n.prototype.has=c,n.prototype.set=u,t.exports=n},{"./_ListCache":45,"./_stackClear":155,"./_stackDelete":156,"./_stackGet":157,"./_stackHas":158,"./_stackSet":159}],51:[function(e,t,r){var n=e("./_root"),o=n.Symbol;t.exports=o},{"./_root":151}],52:[function(e,t,r){var n=e("./_root"),o=n.Uint8Array;t.exports=o},{"./_root":151}],53:[function(e,t,r){var n=e("./_getNative"),o=e("./_root"),i=n(o,"WeakMap");t.exports=i},{"./_getNative":110,"./_root":151}],54:[function(e,t,r){function n(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}t.exports=n},{}],55:[function(e,t,r){function n(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}t.exports=n},{}],56:[function(e,t,r){function n(e,t){for(var r=-1,n=null==e?0:e.length,o=0,i=[];++r<n;){var a=e[r];t(a,r,e)&&(i[o++]=a)}return i}t.exports=n},{}],57:[function(e,t,r){function n(e,t){var r=a(e),n=!r&&i(e),l=!r&&!n&&s(e),f=!r&&!n&&!l&&u(e),h=r||n||l||f,d=h?o(e.length,String):[],g=d.length;for(var m in e)!t&&!p.call(e,m)||h&&("length"==m||l&&("offset"==m||"parent"==m)||f&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||c(m,g))||d.push(m);return d}var o=e("./_baseTimes"),i=e("./isArguments"),a=e("./isArray"),s=e("./isBuffer"),c=e("./_isIndex"),u=e("./isTypedArray"),l=Object.prototype,p=l.hasOwnProperty;t.exports=n},{"./_baseTimes":85,"./_isIndex":126,"./isArguments":169,"./isArray":170,"./isBuffer":173,"./isTypedArray":182}],58:[function(e,t,r){function n(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}t.exports=n},{}],59:[function(e,t,r){function n(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}t.exports=n},{}],60:[function(e,t,r){function n(e,t,r){(void 0===r||i(e[t],r))&&(void 0!==r||t in e)||o(e,t,r)}var o=e("./_baseAssignValue"),i=e("./eq");t.exports=n},{"./_baseAssignValue":65,"./eq":166}],61:[function(e,t,r){function n(e,t,r){var n=e[t];s.call(e,t)&&i(n,r)&&(void 0!==r||t in e)||o(e,t,r)}var o=e("./_baseAssignValue"),i=e("./eq"),a=Object.prototype,s=a.hasOwnProperty;t.exports=n},{"./_baseAssignValue":65,"./eq":166}],62:[function(e,t,r){function n(e,t){for(var r=e.length;r--;)if(o(e[r][0],t))return r;return-1}var o=e("./eq");t.exports=n},{"./eq":166}],63:[function(e,t,r){function n(e,t){return e&&o(t,i(t),e)}var o=e("./_copyObject"),i=e("./keys");t.exports=n},{"./_copyObject":97,"./keys":183}],64:[function(e,t,r){function n(e,t){return e&&o(t,i(t),e)}var o=e("./_copyObject"),i=e("./keysIn");t.exports=n},{"./_copyObject":97,"./keysIn":184}],65:[function(e,t,r){function n(e,t,r){"__proto__"==t&&o?o(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var o=e("./_defineProperty");t.exports=n},{"./_defineProperty":104}],66:[function(e,t,r){function n(e,t,r,C,j,I){var R,T=t&k,F=t&P,D=t&O;if(r&&(R=j?r(e,C,j,I):r(e)),void 0!==R)return R;if(!x(e))return e;var B=b(e);
if(B){if(R=m(e),!T)return l(e,R)}else{var U=g(e),H=U==N||U==L;if(_(e))return u(e,T);if(U==M||U==A||H&&!j){if(R=F||H?{}:v(e),!T)return F?f(e,c(R,e)):p(e,s(R,e))}else{if(!ee[U])return j?e:{};R=y(e,U,T)}}I||(I=new o);var z=I.get(e);if(z)return z;I.set(e,R),E(e)?e.forEach(function(o){R.add(n(o,t,r,o,e,I))}):w(e)&&e.forEach(function(o,i){R.set(i,n(o,t,r,i,e,I))});var $=D?F?d:h:F?keysIn:S,q=B?void 0:$(e);return i(q||e,function(o,i){q&&(i=o,o=e[i]),a(R,i,n(o,t,r,i,e,I))}),R}var o=e("./_Stack"),i=e("./_arrayEach"),a=e("./_assignValue"),s=e("./_baseAssign"),c=e("./_baseAssignIn"),u=e("./_cloneBuffer"),l=e("./_copyArray"),p=e("./_copySymbols"),f=e("./_copySymbolsIn"),h=e("./_getAllKeys"),d=e("./_getAllKeysIn"),g=e("./_getTag"),m=e("./_initCloneArray"),y=e("./_initCloneByTag"),v=e("./_initCloneObject"),b=e("./isArray"),_=e("./isBuffer"),w=e("./isMap"),x=e("./isObject"),E=e("./isSet"),S=e("./keys"),k=1,P=2,O=4,A="[object Arguments]",C="[object Array]",j="[object Boolean]",I="[object Date]",R="[object Error]",N="[object Function]",L="[object GeneratorFunction]",T="[object Map]",F="[object Number]",M="[object Object]",D="[object RegExp]",B="[object Set]",U="[object String]",H="[object Symbol]",z="[object WeakMap]",$="[object ArrayBuffer]",q="[object DataView]",V="[object Float32Array]",W="[object Float64Array]",G="[object Int8Array]",K="[object Int16Array]",J="[object Int32Array]",Q="[object Uint8Array]",X="[object Uint8ClampedArray]",Y="[object Uint16Array]",Z="[object Uint32Array]",ee={};ee[A]=ee[C]=ee[$]=ee[q]=ee[j]=ee[I]=ee[V]=ee[W]=ee[G]=ee[K]=ee[J]=ee[T]=ee[F]=ee[M]=ee[D]=ee[B]=ee[U]=ee[H]=ee[Q]=ee[X]=ee[Y]=ee[Z]=!0,ee[R]=ee[N]=ee[z]=!1,t.exports=n},{"./_Stack":50,"./_arrayEach":55,"./_assignValue":61,"./_baseAssign":63,"./_baseAssignIn":64,"./_cloneBuffer":91,"./_copyArray":96,"./_copySymbols":98,"./_copySymbolsIn":99,"./_getAllKeys":107,"./_getAllKeysIn":108,"./_getTag":115,"./_initCloneArray":122,"./_initCloneByTag":123,"./_initCloneObject":124,"./isArray":170,"./isBuffer":173,"./isMap":176,"./isObject":177,"./isSet":180,"./keys":183}],67:[function(e,t,r){var n=e("./isObject"),o=Object.create,i=function(){function e(){}return function(t){if(!n(t))return{};if(o)return o(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();t.exports=i},{"./isObject":177}],68:[function(e,t,r){function n(e,t,r,a,s){var c=-1,u=e.length;for(r||(r=i),s||(s=[]);++c<u;){var l=e[c];t>0&&r(l)?t>1?n(l,t-1,r,a,s):o(s,l):a||(s[s.length]=l)}return s}var o=e("./_arrayPush"),i=e("./_isFlattenable");t.exports=n},{"./_arrayPush":59,"./_isFlattenable":125}],69:[function(e,t,r){var n=e("./_createBaseFor"),o=n();t.exports=o},{"./_createBaseFor":102}],70:[function(e,t,r){function n(e,t){t=o(t,e);for(var r=0,n=t.length;null!=e&&n>r;)e=e[i(t[r++])];return r&&r==n?e:void 0}var o=e("./_castPath"),i=e("./_toKey");t.exports=n},{"./_castPath":89,"./_toKey":161}],71:[function(e,t,r){function n(e,t,r){var n=t(e);return i(e)?n:o(n,r(e))}var o=e("./_arrayPush"),i=e("./isArray");t.exports=n},{"./_arrayPush":59,"./isArray":170}],72:[function(e,t,r){function n(e){return null==e?void 0===e?c:s:u&&u in Object(e)?i(e):a(e)}var o=e("./_Symbol"),i=e("./_getRawTag"),a=e("./_objectToString"),s="[object Null]",c="[object Undefined]",u=o?o.toStringTag:void 0;t.exports=n},{"./_Symbol":51,"./_getRawTag":112,"./_objectToString":147}],73:[function(e,t,r){function n(e){return i(e)&&o(e)==a}var o=e("./_baseGetTag"),i=e("./isObjectLike"),a="[object Arguments]";t.exports=n},{"./_baseGetTag":72,"./isObjectLike":178}],74:[function(e,t,r){function n(e){return i(e)&&o(e)==a}var o=e("./_getTag"),i=e("./isObjectLike"),a="[object Map]";t.exports=n},{"./_getTag":115,"./isObjectLike":178}],75:[function(e,t,r){function n(e){if(!a(e)||i(e))return!1;var t=o(e)?d:u;return t.test(s(e))}var o=e("./isFunction"),i=e("./_isMasked"),a=e("./isObject"),s=e("./_toSource"),c=/[\\^$.*+?()[\]{}|]/g,u=/^\[object .+?Constructor\]$/,l=Function.prototype,p=Object.prototype,f=l.toString,h=p.hasOwnProperty,d=RegExp("^"+f.call(h).replace(c,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=n},{"./_isMasked":130,"./_toSource":162,"./isFunction":174,"./isObject":177}],76:[function(e,t,r){function n(e){return i(e)&&o(e)==a}var o=e("./_getTag"),i=e("./isObjectLike"),a="[object Set]";t.exports=n},{"./_getTag":115,"./isObjectLike":178}],77:[function(e,t,r){function n(e){return a(e)&&i(e.length)&&!!I[o(e)]}var o=e("./_baseGetTag"),i=e("./isLength"),a=e("./isObjectLike"),s="[object Arguments]",c="[object Array]",u="[object Boolean]",l="[object Date]",p="[object Error]",f="[object Function]",h="[object Map]",d="[object Number]",g="[object Object]",m="[object RegExp]",y="[object Set]",v="[object String]",b="[object WeakMap]",_="[object ArrayBuffer]",w="[object DataView]",x="[object Float32Array]",E="[object Float64Array]",S="[object Int8Array]",k="[object Int16Array]",P="[object Int32Array]",O="[object Uint8Array]",A="[object Uint8ClampedArray]",C="[object Uint16Array]",j="[object Uint32Array]",I={};I[x]=I[E]=I[S]=I[k]=I[P]=I[O]=I[A]=I[C]=I[j]=!0,I[s]=I[c]=I[_]=I[u]=I[w]=I[l]=I[p]=I[f]=I[h]=I[d]=I[g]=I[m]=I[y]=I[v]=I[b]=!1,t.exports=n},{"./_baseGetTag":72,"./isLength":175,"./isObjectLike":178}],78:[function(e,t,r){function n(e){if(!o(e))return i(e);var t=[];for(var r in Object(e))s.call(e,r)&&"constructor"!=r&&t.push(r);return t}var o=e("./_isPrototype"),i=e("./_nativeKeys"),a=Object.prototype,s=a.hasOwnProperty;t.exports=n},{"./_isPrototype":131,"./_nativeKeys":144}],79:[function(e,t,r){function n(e){if(!o(e))return a(e);var t=i(e),r=[];for(var n in e)("constructor"!=n||!t&&c.call(e,n))&&r.push(n);return r}var o=e("./isObject"),i=e("./_isPrototype"),a=e("./_nativeKeysIn"),s=Object.prototype,c=s.hasOwnProperty;t.exports=n},{"./_isPrototype":131,"./_nativeKeysIn":145,"./isObject":177}],80:[function(e,t,r){function n(e,t,r,p,f){e!==t&&a(t,function(a,u){if(f||(f=new o),c(a))s(e,t,u,r,n,p,f);else{var h=p?p(l(e,u),a,u+"",e,t,f):void 0;void 0===h&&(h=a),i(e,u,h)}},u)}var o=e("./_Stack"),i=e("./_assignMergeValue"),a=e("./_baseFor"),s=e("./_baseMergeDeep"),c=e("./isObject"),u=e("./keysIn"),l=e("./_safeGet");t.exports=n},{"./_Stack":50,"./_assignMergeValue":60,"./_baseFor":69,"./_baseMergeDeep":81,"./_safeGet":152,"./isObject":177,"./keysIn":184}],81:[function(e,t,r){function n(e,t,r,n,b,_,w){var x=y(e,r),E=y(t,r),S=w.get(E);if(S)return void o(e,r,S);var k=_?_(x,E,r+"",e,t,w):void 0,P=void 0===k;if(P){var O=l(E),A=!O&&f(E),C=!O&&!A&&m(E);k=E,O||A||C?l(x)?k=x:p(x)?k=s(x):A?(P=!1,k=i(E,!0)):C?(P=!1,k=a(E,!0)):k=[]:g(E)||u(E)?(k=x,u(x)?k=v(x):d(x)&&!h(x)||(k=c(E))):P=!1}P&&(w.set(E,k),b(k,E,n,_,w),w["delete"](E)),o(e,r,k)}var o=e("./_assignMergeValue"),i=e("./_cloneBuffer"),a=e("./_cloneTypedArray"),s=e("./_copyArray"),c=e("./_initCloneObject"),u=e("./isArguments"),l=e("./isArray"),p=e("./isArrayLikeObject"),f=e("./isBuffer"),h=e("./isFunction"),d=e("./isObject"),g=e("./isPlainObject"),m=e("./isTypedArray"),y=e("./_safeGet"),v=e("./toPlainObject");t.exports=n},{"./_assignMergeValue":60,"./_cloneBuffer":91,"./_cloneTypedArray":95,"./_copyArray":96,"./_initCloneObject":124,"./_safeGet":152,"./isArguments":169,"./isArray":170,"./isArrayLikeObject":172,"./isBuffer":173,"./isFunction":174,"./isObject":177,"./isPlainObject":179,"./isTypedArray":182,"./toPlainObject":191}],82:[function(e,t,r){function n(e,t){return a(i(e,t,o),e+"")}var o=e("./identity"),i=e("./_overRest"),a=e("./_setToString");t.exports=n},{"./_overRest":149,"./_setToString":153,"./identity":168}],83:[function(e,t,r){var n=e("./constant"),o=e("./_defineProperty"),i=e("./identity"),a=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:n(t),writable:!0})}:i;t.exports=a},{"./_defineProperty":104,"./constant":165,"./identity":168}],84:[function(e,t,r){function n(e,t,r){var n=-1,o=e.length;0>t&&(t=-t>o?0:o+t),r=r>o?o:r,0>r&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(o);++n<o;)i[n]=e[n+t];return i}t.exports=n},{}],85:[function(e,t,r){function n(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}t.exports=n},{}],86:[function(e,t,r){function n(e){if("string"==typeof e)return e;if(a(e))return i(e,n)+"";if(s(e))return l?l.call(e):"";var t=e+"";return"0"==t&&1/e==-c?"-0":t}var o=e("./_Symbol"),i=e("./_arrayMap"),a=e("./isArray"),s=e("./isSymbol"),c=1/0,u=o?o.prototype:void 0,l=u?u.toString:void 0;t.exports=n},{"./_Symbol":51,"./_arrayMap":58,"./isArray":170,"./isSymbol":181}],87:[function(e,t,r){function n(e){return function(t){return e(t)}}t.exports=n},{}],88:[function(e,t,r){function n(e,t){return t=o(t,e),e=a(e,t),null==e||delete e[s(i(t))]}var o=e("./_castPath"),i=e("./last"),a=e("./_parent"),s=e("./_toKey");t.exports=n},{"./_castPath":89,"./_parent":150,"./_toKey":161,"./last":185}],89:[function(e,t,r){function n(e,t){return o(e)?e:i(e,t)?[e]:a(s(e))}var o=e("./isArray"),i=e("./_isKey"),a=e("./_stringToPath"),s=e("./toString");t.exports=n},{"./_isKey":128,"./_stringToPath":160,"./isArray":170,"./toString":192}],90:[function(e,t,r){function n(e){var t=new e.constructor(e.byteLength);return new o(t).set(new o(e)),t}var o=e("./_Uint8Array");t.exports=n},{"./_Uint8Array":52}],91:[function(e,t,r){function n(e,t){if(t)return e.slice();var r=e.length,n=u?u(r):new e.constructor(r);return e.copy(n),n}var o=e("./_root"),i="object"==typeof r&&r&&!r.nodeType&&r,a=i&&"object"==typeof t&&t&&!t.nodeType&&t,s=a&&a.exports===i,c=s?o.Buffer:void 0,u=c?c.allocUnsafe:void 0;t.exports=n},{"./_root":151}],92:[function(e,t,r){function n(e,t){var r=t?o(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var o=e("./_cloneArrayBuffer");t.exports=n},{"./_cloneArrayBuffer":90}],93:[function(e,t,r){function n(e){var t=new e.constructor(e.source,o.exec(e));return t.lastIndex=e.lastIndex,t}var o=/\w*$/;t.exports=n},{}],94:[function(e,t,r){function n(e){return a?Object(a.call(e)):{}}var o=e("./_Symbol"),i=o?o.prototype:void 0,a=i?i.valueOf:void 0;t.exports=n},{"./_Symbol":51}],95:[function(e,t,r){function n(e,t){var r=t?o(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var o=e("./_cloneArrayBuffer");t.exports=n},{"./_cloneArrayBuffer":90}],96:[function(e,t,r){function n(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}t.exports=n},{}],97:[function(e,t,r){function n(e,t,r,n){var a=!r;r||(r={});for(var s=-1,c=t.length;++s<c;){var u=t[s],l=n?n(r[u],e[u],u,r,e):void 0;void 0===l&&(l=e[u]),a?i(r,u,l):o(r,u,l)}return r}var o=e("./_assignValue"),i=e("./_baseAssignValue");t.exports=n},{"./_assignValue":61,"./_baseAssignValue":65}],98:[function(e,t,r){function n(e,t){return o(e,i(e),t)}var o=e("./_copyObject"),i=e("./_getSymbols");t.exports=n},{"./_copyObject":97,"./_getSymbols":113}],99:[function(e,t,r){function n(e,t){return o(e,i(e),t)}var o=e("./_copyObject"),i=e("./_getSymbolsIn");t.exports=n},{"./_copyObject":97,"./_getSymbolsIn":114}],100:[function(e,t,r){var n=e("./_root"),o=n["__core-js_shared__"];t.exports=o},{"./_root":151}],101:[function(e,t,r){function n(e){return o(function(t,r){var n=-1,o=r.length,a=o>1?r[o-1]:void 0,s=o>2?r[2]:void 0;for(a=e.length>3&&"function"==typeof a?(o--,a):void 0,s&&i(r[0],r[1],s)&&(a=3>o?void 0:a,o=1),t=Object(t);++n<o;){var c=r[n];c&&e(t,c,n,a)}return t})}var o=e("./_baseRest"),i=e("./_isIterateeCall");t.exports=n},{"./_baseRest":82,"./_isIterateeCall":127}],102:[function(e,t,r){function n(e){return function(t,r,n){for(var o=-1,i=Object(t),a=n(t),s=a.length;s--;){var c=a[e?s:++o];if(r(i[c],c,i)===!1)break}return t}}t.exports=n},{}],103:[function(e,t,r){function n(e){return o(e)?void 0:e}var o=e("./isPlainObject");t.exports=n},{"./isPlainObject":179}],104:[function(e,t,r){var n=e("./_getNative"),o=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();t.exports=o},{"./_getNative":110}],105:[function(e,t,r){function n(e){return a(i(e,void 0,o),e+"")}var o=e("./flatten"),i=e("./_overRest"),a=e("./_setToString");t.exports=n},{"./_overRest":149,"./_setToString":153,"./flatten":167}],106:[function(e,t,r){(function(e){var r="object"==typeof e&&e&&e.Object===Object&&e;t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],107:[function(e,t,r){function n(e){return o(e,a,i)}var o=e("./_baseGetAllKeys"),i=e("./_getSymbols"),a=e("./keys");t.exports=n},{"./_baseGetAllKeys":71,"./_getSymbols":113,"./keys":183}],108:[function(e,t,r){function n(e){return o(e,a,i)}var o=e("./_baseGetAllKeys"),i=e("./_getSymbolsIn"),a=e("./keysIn");t.exports=n},{"./_baseGetAllKeys":71,"./_getSymbolsIn":114,"./keysIn":184}],109:[function(e,t,r){function n(e,t){var r=e.__data__;return o(t)?r["string"==typeof t?"string":"hash"]:r.map}var o=e("./_isKeyable");t.exports=n},{"./_isKeyable":129}],110:[function(e,t,r){function n(e,t){var r=i(e,t);return o(r)?r:void 0}var o=e("./_baseIsNative"),i=e("./_getValue");t.exports=n},{"./_baseIsNative":75,"./_getValue":116}],111:[function(e,t,r){var n=e("./_overArg"),o=n(Object.getPrototypeOf,Object);t.exports=o},{"./_overArg":148}],112:[function(e,t,r){function n(e){var t=a.call(e,c),r=e[c];try{e[c]=void 0;var n=!0}catch(o){}var i=s.call(e);return n&&(t?e[c]=r:delete e[c]),i}var o=e("./_Symbol"),i=Object.prototype,a=i.hasOwnProperty,s=i.toString,c=o?o.toStringTag:void 0;t.exports=n},{"./_Symbol":51}],113:[function(e,t,r){var n=e("./_arrayFilter"),o=e("./stubArray"),i=Object.prototype,a=i.propertyIsEnumerable,s=Object.getOwnPropertySymbols,c=s?function(e){return null==e?[]:(e=Object(e),n(s(e),function(t){return a.call(e,t)}))}:o;t.exports=c},{"./_arrayFilter":56,"./stubArray":189}],114:[function(e,t,r){var n=e("./_arrayPush"),o=e("./_getPrototype"),i=e("./_getSymbols"),a=e("./stubArray"),s=Object.getOwnPropertySymbols,c=s?function(e){for(var t=[];e;)n(t,i(e)),e=o(e);return t}:a;t.exports=c},{"./_arrayPush":59,"./_getPrototype":111,"./_getSymbols":113,"./stubArray":189}],115:[function(e,t,r){var n=e("./_DataView"),o=e("./_Map"),i=e("./_Promise"),a=e("./_Set"),s=e("./_WeakMap"),c=e("./_baseGetTag"),u=e("./_toSource"),l="[object Map]",p="[object Object]",f="[object Promise]",h="[object Set]",d="[object WeakMap]",g="[object DataView]",m=u(n),y=u(o),v=u(i),b=u(a),_=u(s),w=c;(n&&w(new n(new ArrayBuffer(1)))!=g||o&&w(new o)!=l||i&&w(i.resolve())!=f||a&&w(new a)!=h||s&&w(new s)!=d)&&(w=function(e){var t=c(e),r=t==p?e.constructor:void 0,n=r?u(r):"";if(n)switch(n){case m:return g;case y:return l;case v:return f;case b:return h;case _:return d}return t}),t.exports=w},{"./_DataView":43,"./_Map":46,"./_Promise":48,"./_Set":49,"./_WeakMap":53,"./_baseGetTag":72,"./_toSource":162}],116:[function(e,t,r){function n(e,t){return null==e?void 0:e[t]}t.exports=n},{}],117:[function(e,t,r){function n(){this.__data__=o?o(null):{},this.size=0}var o=e("./_nativeCreate");t.exports=n},{"./_nativeCreate":143}],118:[function(e,t,r){function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}t.exports=n},{}],119:[function(e,t,r){function n(e){var t=this.__data__;if(o){var r=t[e];return r===i?void 0:r}return s.call(t,e)?t[e]:void 0}var o=e("./_nativeCreate"),i="__lodash_hash_undefined__",a=Object.prototype,s=a.hasOwnProperty;t.exports=n},{"./_nativeCreate":143}],120:[function(e,t,r){function n(e){var t=this.__data__;return o?void 0!==t[e]:a.call(t,e)}var o=e("./_nativeCreate"),i=Object.prototype,a=i.hasOwnProperty;t.exports=n},{"./_nativeCreate":143}],121:[function(e,t,r){function n(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=o&&void 0===t?i:t,this}var o=e("./_nativeCreate"),i="__lodash_hash_undefined__";t.exports=n},{"./_nativeCreate":143}],122:[function(e,t,r){function n(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&i.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var o=Object.prototype,i=o.hasOwnProperty;t.exports=n},{}],123:[function(e,t,r){function n(e,t,r){var n=e.constructor;switch(t){case y:return o(e);case u:case l:return new n(+e);case v:return i(e,r);case b:case _:case w:case x:case E:case S:case k:case P:case O:return c(e,r);case p:return new n;case f:case g:return new n(e);case h:return a(e);case d:return new n;case m:return s(e)}}var o=e("./_cloneArrayBuffer"),i=e("./_cloneDataView"),a=e("./_cloneRegExp"),s=e("./_cloneSymbol"),c=e("./_cloneTypedArray"),u="[object Boolean]",l="[object Date]",p="[object Map]",f="[object Number]",h="[object RegExp]",d="[object Set]",g="[object String]",m="[object Symbol]",y="[object ArrayBuffer]",v="[object DataView]",b="[object Float32Array]",_="[object Float64Array]",w="[object Int8Array]",x="[object Int16Array]",E="[object Int32Array]",S="[object Uint8Array]",k="[object Uint8ClampedArray]",P="[object Uint16Array]",O="[object Uint32Array]";t.exports=n},{"./_cloneArrayBuffer":90,"./_cloneDataView":92,"./_cloneRegExp":93,"./_cloneSymbol":94,"./_cloneTypedArray":95}],124:[function(e,t,r){function n(e){return"function"!=typeof e.constructor||a(e)?{}:o(i(e))}var o=e("./_baseCreate"),i=e("./_getPrototype"),a=e("./_isPrototype");t.exports=n},{"./_baseCreate":67,"./_getPrototype":111,"./_isPrototype":131}],125:[function(e,t,r){function n(e){return a(e)||i(e)||!!(s&&e&&e[s])}var o=e("./_Symbol"),i=e("./isArguments"),a=e("./isArray"),s=o?o.isConcatSpreadable:void 0;t.exports=n},{"./_Symbol":51,"./isArguments":169,"./isArray":170}],126:[function(e,t,r){function n(e,t){var r=typeof e;return t=null==t?o:t,!!t&&("number"==r||"symbol"!=r&&i.test(e))&&e>-1&&e%1==0&&t>e}var o=9007199254740991,i=/^(?:0|[1-9]\d*)$/;t.exports=n},{}],127:[function(e,t,r){function n(e,t,r){if(!s(r))return!1;var n=typeof t;return("number"==n?i(r)&&a(t,r.length):"string"==n&&t in r)?o(r[t],e):!1}var o=e("./eq"),i=e("./isArrayLike"),a=e("./_isIndex"),s=e("./isObject");t.exports=n},{"./_isIndex":126,"./eq":166,"./isArrayLike":171,"./isObject":177}],128:[function(e,t,r){function n(e,t){if(o(e))return!1;var r=typeof e;return"number"==r||"symbol"==r||"boolean"==r||null==e||i(e)?!0:s.test(e)||!a.test(e)||null!=t&&e in Object(t)}var o=e("./isArray"),i=e("./isSymbol"),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;t.exports=n},{"./isArray":170,"./isSymbol":181}],129:[function(e,t,r){function n(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}t.exports=n},{}],130:[function(e,t,r){function n(e){return!!i&&i in e}var o=e("./_coreJsData"),i=function(){var e=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();t.exports=n},{"./_coreJsData":100}],131:[function(e,t,r){function n(e){var t=e&&e.constructor,r="function"==typeof t&&t.prototype||o;return e===r}var o=Object.prototype;t.exports=n},{}],132:[function(e,t,r){function n(){this.__data__=[],this.size=0}t.exports=n},{}],133:[function(e,t,r){function n(e){var t=this.__data__,r=o(t,e);if(0>r)return!1;var n=t.length-1;return r==n?t.pop():a.call(t,r,1),--this.size,!0}var o=e("./_assocIndexOf"),i=Array.prototype,a=i.splice;t.exports=n},{"./_assocIndexOf":62}],134:[function(e,t,r){function n(e){var t=this.__data__,r=o(t,e);return 0>r?void 0:t[r][1]}var o=e("./_assocIndexOf");t.exports=n},{"./_assocIndexOf":62}],135:[function(e,t,r){function n(e){return o(this.__data__,e)>-1}var o=e("./_assocIndexOf");t.exports=n},{"./_assocIndexOf":62}],136:[function(e,t,r){function n(e,t){var r=this.__data__,n=o(r,e);return 0>n?(++this.size,r.push([e,t])):r[n][1]=t,this}var o=e("./_assocIndexOf");t.exports=n},{"./_assocIndexOf":62}],137:[function(e,t,r){function n(){this.size=0,this.__data__={hash:new o,map:new(a||i),string:new o}}var o=e("./_Hash"),i=e("./_ListCache"),a=e("./_Map");t.exports=n},{"./_Hash":44,"./_ListCache":45,"./_Map":46}],138:[function(e,t,r){function n(e){var t=o(this,e)["delete"](e);return this.size-=t?1:0,t}var o=e("./_getMapData");t.exports=n},{"./_getMapData":109}],139:[function(e,t,r){function n(e){return o(this,e).get(e)}var o=e("./_getMapData");t.exports=n},{"./_getMapData":109}],140:[function(e,t,r){function n(e){return o(this,e).has(e)}var o=e("./_getMapData");t.exports=n},{"./_getMapData":109}],141:[function(e,t,r){function n(e,t){var r=o(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var o=e("./_getMapData");t.exports=n},{"./_getMapData":109}],142:[function(e,t,r){function n(e){var t=o(e,function(e){return r.size===i&&r.clear(),e}),r=t.cache;return t}var o=e("./memoize"),i=500;t.exports=n},{"./memoize":186}],143:[function(e,t,r){var n=e("./_getNative"),o=n(Object,"create");t.exports=o},{"./_getNative":110}],144:[function(e,t,r){var n=e("./_overArg"),o=n(Object.keys,Object);t.exports=o},{"./_overArg":148}],145:[function(e,t,r){function n(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}t.exports=n},{}],146:[function(e,t,r){var n=e("./_freeGlobal"),o="object"==typeof r&&r&&!r.nodeType&&r,i=o&&"object"==typeof t&&t&&!t.nodeType&&t,a=i&&i.exports===o,s=a&&n.process,c=function(){try{var e=i&&i.require&&i.require("util").types;return e?e:s&&s.binding&&s.binding("util")}catch(t){}}();t.exports=c},{"./_freeGlobal":106}],147:[function(e,t,r){function n(e){return i.call(e)}var o=Object.prototype,i=o.toString;t.exports=n},{}],148:[function(e,t,r){function n(e,t){return function(r){return e(t(r))}}t.exports=n},{}],149:[function(e,t,r){function n(e,t,r){return t=i(void 0===t?e.length-1:t,0),function(){for(var n=arguments,a=-1,s=i(n.length-t,0),c=Array(s);++a<s;)c[a]=n[t+a];a=-1;for(var u=Array(t+1);++a<t;)u[a]=n[a];return u[t]=r(c),o(e,this,u)}}var o=e("./_apply"),i=Math.max;t.exports=n},{"./_apply":54}],150:[function(e,t,r){function n(e,t){return t.length<2?e:o(e,i(t,0,-1))}var o=e("./_baseGet"),i=e("./_baseSlice");t.exports=n},{"./_baseGet":70,"./_baseSlice":84}],151:[function(e,t,r){var n=e("./_freeGlobal"),o="object"==typeof self&&self&&self.Object===Object&&self,i=n||o||Function("return this")();t.exports=i},{"./_freeGlobal":106}],152:[function(e,t,r){function n(e,t){return"constructor"===t&&"function"==typeof e[t]||"__proto__"==t?void 0:e[t]}t.exports=n},{}],153:[function(e,t,r){var n=e("./_baseSetToString"),o=e("./_shortOut"),i=o(n);t.exports=i},{"./_baseSetToString":83,"./_shortOut":154}],154:[function(e,t,r){function n(e){var t=0,r=0;return function(){var n=a(),s=i-(n-r);if(r=n,s>0){if(++t>=o)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var o=800,i=16,a=Date.now;t.exports=n},{}],155:[function(e,t,r){function n(){this.__data__=new o,this.size=0}var o=e("./_ListCache");t.exports=n},{"./_ListCache":45}],156:[function(e,t,r){function n(e){var t=this.__data__,r=t["delete"](e);return this.size=t.size,r}t.exports=n},{}],157:[function(e,t,r){function n(e){return this.__data__.get(e)}t.exports=n},{}],158:[function(e,t,r){function n(e){return this.__data__.has(e)}t.exports=n},{}],159:[function(e,t,r){function n(e,t){var r=this.__data__;if(r instanceof o){var n=r.__data__;if(!i||n.length<s-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new a(n)}return r.set(e,t),this.size=r.size,this}var o=e("./_ListCache"),i=e("./_Map"),a=e("./_MapCache"),s=200;t.exports=n},{"./_ListCache":45,"./_Map":46,"./_MapCache":47}],160:[function(e,t,r){var n=e("./_memoizeCapped"),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,a=n(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(o,function(e,r,n,o){t.push(n?o.replace(i,"$1"):r||e)}),t});t.exports=a},{"./_memoizeCapped":142}],161:[function(e,t,r){function n(e){if("string"==typeof e||o(e))return e;var t=e+"";return"0"==t&&1/e==-i?"-0":t}var o=e("./isSymbol"),i=1/0;t.exports=n},{"./isSymbol":181}],162:[function(e,t,r){function n(e){if(null!=e){try{return i.call(e)}catch(t){}try{return e+""}catch(t){}}return""}var o=Function.prototype,i=o.toString;t.exports=n},{}],163:[function(e,t,r){var n=e("./_assignValue"),o=e("./_copyObject"),i=e("./_createAssigner"),a=e("./isArrayLike"),s=e("./_isPrototype"),c=e("./keys"),u=Object.prototype,l=u.hasOwnProperty,p=i(function(e,t){if(s(t)||a(t))return void o(t,c(t),e);for(var r in t)l.call(t,r)&&n(e,r,t[r])});t.exports=p},{"./_assignValue":61,"./_copyObject":97,"./_createAssigner":101,"./_isPrototype":131,"./isArrayLike":171,"./keys":183}],164:[function(e,t,r){function n(e){return o(e,i|a)}var o=e("./_baseClone"),i=1,a=4;t.exports=n},{"./_baseClone":66}],165:[function(e,t,r){function n(e){return function(){return e}}t.exports=n},{}],166:[function(e,t,r){function n(e,t){return e===t||e!==e&&t!==t}t.exports=n},{}],167:[function(e,t,r){function n(e){var t=null==e?0:e.length;return t?o(e,1):[]}var o=e("./_baseFlatten");t.exports=n},{"./_baseFlatten":68}],168:[function(e,t,r){function n(e){return e}t.exports=n},{}],169:[function(e,t,r){var n=e("./_baseIsArguments"),o=e("./isObjectLike"),i=Object.prototype,a=i.hasOwnProperty,s=i.propertyIsEnumerable,c=n(function(){return arguments}())?n:function(e){return o(e)&&a.call(e,"callee")&&!s.call(e,"callee")};t.exports=c},{"./_baseIsArguments":73,"./isObjectLike":178}],170:[function(e,t,r){var n=Array.isArray;t.exports=n},{}],171:[function(e,t,r){function n(e){return null!=e&&i(e.length)&&!o(e)}var o=e("./isFunction"),i=e("./isLength");t.exports=n},{"./isFunction":174,"./isLength":175}],172:[function(e,t,r){function n(e){return i(e)&&o(e)}var o=e("./isArrayLike"),i=e("./isObjectLike");t.exports=n},{"./isArrayLike":171,"./isObjectLike":178}],173:[function(e,t,r){var n=e("./_root"),o=e("./stubFalse"),i="object"==typeof r&&r&&!r.nodeType&&r,a=i&&"object"==typeof t&&t&&!t.nodeType&&t,s=a&&a.exports===i,c=s?n.Buffer:void 0,u=c?c.isBuffer:void 0,l=u||o;t.exports=l},{"./_root":151,"./stubFalse":190}],174:[function(e,t,r){function n(e){if(!i(e))return!1;var t=o(e);return t==s||t==c||t==a||t==u}var o=e("./_baseGetTag"),i=e("./isObject"),a="[object AsyncFunction]",s="[object Function]",c="[object GeneratorFunction]",u="[object Proxy]";t.exports=n},{"./_baseGetTag":72,"./isObject":177}],175:[function(e,t,r){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&o>=e}var o=9007199254740991;t.exports=n},{}],176:[function(e,t,r){var n=e("./_baseIsMap"),o=e("./_baseUnary"),i=e("./_nodeUtil"),a=i&&i.isMap,s=a?o(a):n;t.exports=s},{"./_baseIsMap":74,"./_baseUnary":87,"./_nodeUtil":146}],177:[function(e,t,r){function n(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}t.exports=n},{}],178:[function(e,t,r){function n(e){return null!=e&&"object"==typeof e}t.exports=n},{}],179:[function(e,t,r){function n(e){if(!a(e)||o(e)!=s)return!1;var t=i(e);if(null===t)return!0;var r=p.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&l.call(r)==f}var o=e("./_baseGetTag"),i=e("./_getPrototype"),a=e("./isObjectLike"),s="[object Object]",c=Function.prototype,u=Object.prototype,l=c.toString,p=u.hasOwnProperty,f=l.call(Object);t.exports=n},{"./_baseGetTag":72,"./_getPrototype":111,"./isObjectLike":178}],180:[function(e,t,r){var n=e("./_baseIsSet"),o=e("./_baseUnary"),i=e("./_nodeUtil"),a=i&&i.isSet,s=a?o(a):n;t.exports=s},{"./_baseIsSet":76,"./_baseUnary":87,"./_nodeUtil":146}],181:[function(e,t,r){function n(e){return"symbol"==typeof e||i(e)&&o(e)==a}var o=e("./_baseGetTag"),i=e("./isObjectLike"),a="[object Symbol]";t.exports=n},{"./_baseGetTag":72,"./isObjectLike":178}],182:[function(e,t,r){var n=e("./_baseIsTypedArray"),o=e("./_baseUnary"),i=e("./_nodeUtil"),a=i&&i.isTypedArray,s=a?o(a):n;t.exports=s},{"./_baseIsTypedArray":77,"./_baseUnary":87,"./_nodeUtil":146}],183:[function(e,t,r){function n(e){return a(e)?o(e):i(e)}var o=e("./_arrayLikeKeys"),i=e("./_baseKeys"),a=e("./isArrayLike");t.exports=n},{"./_arrayLikeKeys":57,"./_baseKeys":78,"./isArrayLike":171}],184:[function(e,t,r){function n(e){return a(e)?o(e,!0):i(e)}var o=e("./_arrayLikeKeys"),i=e("./_baseKeysIn"),a=e("./isArrayLike");t.exports=n},{"./_arrayLikeKeys":57,"./_baseKeysIn":79,"./isArrayLike":171}],185:[function(e,t,r){function n(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}t.exports=n},{}],186:[function(e,t,r){function n(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(i);var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=e.apply(this,n);return r.cache=i.set(o,a)||i,a};return r.cache=new(n.Cache||o),r}var o=e("./_MapCache"),i="Expected a function";n.Cache=o,t.exports=n},{"./_MapCache":47}],187:[function(e,t,r){var n=e("./_baseMerge"),o=e("./_createAssigner"),i=o(function(e,t,r){n(e,t,r)});t.exports=i},{"./_baseMerge":80,"./_createAssigner":101}],188:[function(e,t,r){var n=e("./_arrayMap"),o=e("./_baseClone"),i=e("./_baseUnset"),a=e("./_castPath"),s=e("./_copyObject"),c=e("./_customOmitClone"),u=e("./_flatRest"),l=e("./_getAllKeysIn"),p=1,f=2,h=4,d=u(function(e,t){var r={};if(null==e)return r;var u=!1;t=n(t,function(t){return t=a(t,e),u||(u=t.length>1),t}),s(e,l(e),r),u&&(r=o(r,p|f|h,c));for(var d=t.length;d--;)i(r,t[d]);return r});t.exports=d},{"./_arrayMap":58,"./_baseClone":66,"./_baseUnset":88,"./_castPath":89,"./_copyObject":97,"./_customOmitClone":103,"./_flatRest":105,"./_getAllKeysIn":108}],189:[function(e,t,r){function n(){return[]}t.exports=n},{}],190:[function(e,t,r){function n(){return!1}t.exports=n},{}],191:[function(e,t,r){function n(e){return o(e,i(e))}var o=e("./_copyObject"),i=e("./keysIn");t.exports=n},{"./_copyObject":97,"./keysIn":184}],192:[function(e,t,r){function n(e){return null==e?"":o(e)}var o=e("./_baseToString");t.exports=n},{"./_baseToString":86}],193:[function(e,t,r){(function(e){function r(e,t){"use strict";var r={isRejected:function(){return!e},isFulfilled:function(){return e}};return r.isResolved=r.isFulfilled,e?Object.defineProperty(r,"value",{enumerable:!0,value:t}):Object.defineProperty(r,"reason",{enumerable:!0,value:t}),r}function n(e){"use strict";return e.prototype.spread=function(t){return this.then(function(t){return e.all(t)}).then(function(e){return t.apply(null,e)})},e.prototype.delay=function(t){return this.then(function(r){return new e(function(e){setTimeout(function(){e(r)},t)})})},e.delay=function(e,t){return void 0===t&&(t=e,e=void 0),this.resolve(e).delay(t)},e.prototype["finally"]=function(t){var r=function(){},n=new e(function(e){var r;try{r=t()}finally{e(r)}}).then(r,r);return this.then(function(e){return n.then(function(){return e})},function(e){return n.then(function(){throw e})})},e.prototype.reflect=function(){return this.then(function(e){return r(!0,e)},function(e){return r(!1,e)})},e.settleAll=function(t){var r=Array.isArray(t)?t:[t];return this.all(r.map(function(t){return e.resolve(t).reflect()}))},e.prototype.done=function(){this["catch"](function(e){s(function(){throw e})})},e}function o(e,t){"use strict";t.forEach(function(t){e.prototype[t]=function(){var r=this.__instance,n=r[t].apply(r,c(arguments));return e.resolve(n)}})}function i(e,t,r){"use strict";r.forEach(function(r){e[r]=function(){var n=t[r].apply(t,c(arguments));return e.resolve(n)}})}function a(e){"use strict";var t=function(t){var r=new e(t);Object.defineProperty(this,"__instance",{value:r})};return t.resolve=function(e){var t=this;return e&&e.__instance&&"object"==typeof e.__instance?e:new t(function(t){t(e)})},i(t,e,["all","reject","race"]),o(t,["then","catch"]),n(t)}var s=function(){"use strict";return s?s:"[object process]"==={}.toString.call(e.process)?e.process.nextTick.bind(e.process):function(e){setTimeout(e,0)}}(),c=function(){"use strict";var e=Array.prototype.slice;return function(t){return t?e.call(t):[]}}();t.exports=function(t){"use strict";var r=t||e.Promise;if(!r)throw new Error("No Promise implementation found.");if("function"!=typeof r)throw new TypeError("Not supported. The argument provided is not a constructor.");return a(r)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],194:[function(e,t,r){"use strict";var n=e("../util/util"),o=e("../util/logger-factory"),i=e("browser-bunyan"),a=e("./default-widget-model"),s=function(){this.log=o.getLogger()};s.prototype.combine=function(e){var t=this.log,r=n.cloneDeep(a);
return e.forEach(function(e){n.merge(r,n.omit(e,["preferences","viewmodes"])),e.viewmodes&&(r.viewmodes=e.viewmodes),e.preferences&&(r.preferences=e.preferences)}),t.debug("Aggregated model created."),t.level()<=i.TRACE&&t.trace("Aggregated model is this:\n %s",JSON.stringify(r,null,"	")),r},t.exports=s},{"../util/logger-factory":247,"../util/util":249,"./default-widget-model":197,"browser-bunyan":2}],195:[function(e,t,r){"use strict";var n=function(e){};n.prototype.parse=function(e){throw new Error("ConfigParser#parse must be overridden.")},t.exports=n},{}],196:[function(e,t,r){"use strict";var n=function(e){};n.prototype.read=function(e){throw new Error("ConfigReader#read must be overridden.")},t.exports=n},{}],197:[function(e,t,r){"use strict";var n={id:null,version:null,height:null,width:null,viewmodes:[],name:null,shortName:null,description:null,author:null,authorHref:null,authorEmail:null,preferences:{},license:null,licenseHref:null,icons:[],content:{src:"index.html",type:"text/html",encoding:"UTF-8"},features:[]};t.exports=n},{}],198:[function(e,t,r){"use strict";var n=e("promise-extensions")(Promise),o=e("../util/util"),i=e("../util/logger-factory"),a=e("./widget-renderer"),s=e("./config-reader"),c=e("./config-parser"),u=e("./widget-storage"),l=e("./widget-instance-factory"),p=e("./widget-feature-augmenter"),f=e("./config-aggregator"),h=e("../util/verror"),d=e("../events/destroy-event"),g="model.xml",m={POST_READ:"postRead",PRE_RENDER:"preRender",POST_RENDER:"postRender"},y={html:"text/html",hbs:"text/x-handlebars-template",handlebars:"text/x-handlebars-template","hbs.js":"application/x-handlebars-template"},v=function(e){this.config=e,this.plugins=[],this.features=[],this.widgetInstanceFactory=new l,this.widgetFeatureAugmenter=new p,this._widgetInstance=null,this.log=i.getLogger();var t=b(this.config);if(t.warnings.length&&this.log.debug(t.warnings.join("\n")),t.errors.length){var r="Problems with widget config:\n	"+t.errors.join("	\n");throw new h(r)}};v.prototype.start=function(){var e=(new Date).getTime(),t=this.log,r=this.config,i=this.plugins,s=this.features,c=r.initialModel||{},u=r.widgetPath,l=r.configFile||g;""===u&&(u=".");var p=this.widgetInstanceFactory,d=this.widgetFeatureAugmenter;t.info("Starting widget @ %s...",u),t.info("Entering READ phase.");var v=Promise.resolve({});return r.reader&&(v=v.then(function(){var e=(o.endsWith(u,"/")?u:u+"/")+l;return r.reader.read(e)})),r.parser&&(v=v.then(function(e){return r.parser.parse(e)})),n.all([c,v]).then(function(e){t.debug("Aggregating models...");var r=new f({log:t});return r.combine(e)}).then(function(e){return t.info("Invoking plugins for POST READ phase..."),_(i,t,m.POST_READ,[e])}).spread(function(e){e.content.type&&e.content.type!==y.html||(e.content.type=w(e),t.debug("The start file type was inferred as [%s]",e.content.type)),e.content.src=a.getResolvedStartFilePath(u,e),t.info("Widget config read for: %s (%s).",e.id,e.name),t.info("Entering INSTANCE CREATION phase...");var n=r.renderer,i=r.storage;e.id=e.id||o.randomId(),i.init(e.name,e.preferences,e.type),t.debug("Widget storage initialized.");var c=p.makeWidget(e,i,n,u);return t.debug("Widget instance created."),d.addFeaturesToWidget(c,s,e),t.debug("%s feature(s) added to widget.",s.length),[c,n,e]}).spread(function(e,r,n){t.info("Invoking plugins for PRE RENDER phase...");var o=_(i,t,m.PRE_RENDER,[e,r,n]);return o}).spread(function(e,r,n){t.info("Entering RENDERING phase...");var o=r.render(n,e);return[e,r,n,o]}).spread(function(e,r,n){t.info("Invoking plugins for POST RENDER phase...");var o=_(i,t,m.POST_RENDER,[e,r,n]);return o}).spread(function(r,n,o){this._widgetInstance=r;var i={},a=(new Date).getTime();return i.time=a-e,i.id=o.id,i.message="Widget rendering for ["+o.name+"] completed in "+i.time+"ms.",i.areaNodes="function"==typeof n.getAreaNodes?n.getAreaNodes():null,t.info(i.message),i}.bind(this))["catch"](function(e){throw t.error(e),new h(e,"An error occurred whilst starting the widget")})},v.prototype.addFeature=function(e){return this.log.info("Adding feature for widget, %s",e.name||"[Anonymous feature]"),"object"==typeof e&&this.features.push(e),this},v.prototype.addPlugin=function(e){return this.log.info("Adding plugin for widget, %s",e.name||"[Anonymous plugin]"),"object"==typeof e&&this.plugins.push(e),this},v.prototype.destroy=function(){var e=this._widgetInstance;if(e&&e.dispatchEvent){var t=new d;this._widgetInstance.dispatchEvent(t),this._widgetInstance=null}this.plugins.forEach(function(e){"function"==typeof e.destroy&&e.destroy()}),this.config.renderer.destroy()};var b=function(e){var t={warnings:[],errors:[]};return"string"!=typeof e.widgetPath?t.errors.push("You must supply a valid widget path"):e.widgetPath.indexOf(g)>=0&&t.errors.push("Please supply the base path of your widget, not its configuration file path"),e.initialModel||e.reader||t.warnings.push("No initial model or widget reader was provided. Can't get any config"),e.reader&&!e.parser&&t.warnings.push("A widget reader was provided, but not a widget config parser"),!e.reader||e.reader instanceof s||t.warnings.push("The configured widget reader might not be a valid ConfigReader instance"),!e.parser||e.parser instanceof c||t.warnings.push("The configured widget parser might not be a valid ConfigParser instance"),e.storage?e.storage instanceof u||t.warnings.push("The configured widget storage might not be a valid WidgetStorage instance"):t.errors.push("No widget storage is configured"),e.renderer?e.renderer instanceof a||t.warnings.push("The configured widget renderer might not be a valid WidgetRenderer instance"):t.errors.push("No widget renderer is configured"),t},_=function(e,t,r,o){var i=n.all(o);return e.filter(function(e){return"function"==typeof e[r]}).forEach(function(e){var n,o=e.name||"Anonymous plugin";i=i.then(function(t){n=t;var o=e[r].apply(e,t);return[o,t]}).spread(function(e,t){return void 0===e?t:[e].concat(t.slice(1))})["catch"](function(e){var i="Failed to invoke plugin ["+o+"] for ["+r+"]";return t.error(e,i),n})}),i},w=function(e){var t=e.content.src.match(/\.([A-z0-9]+)$/);return t&&t[1]&&y[t[1]]||e.content.type};t.exports=v},{"../events/destroy-event":209,"../util/logger-factory":247,"../util/util":249,"../util/verror":250,"./config-aggregator":194,"./config-parser":195,"./config-reader":196,"./widget-feature-augmenter":199,"./widget-instance-factory":200,"./widget-renderer":201,"./widget-storage":202,"promise-extensions":193}],199:[function(e,t,r){"use strict";var n=function(){};n.prototype.addFeaturesToWidget=function(e,t,r){function n(e,t){return t.filter(function(t){return t.name===e})[0]||null}function o(e,t){return t.features.filter(function(t){return t.name===e})[0]||null}t=t||[],r.features=r.features||[],t.forEach(function(e){e.name&&!o(e.name,r)&&r.features.push({name:e.name,params:[],required:!1})});for(var i={},a=0;a<r.features.length;a++){var s=r.features[a],c=n(s.name,t);if(c)"function"==typeof c._init&&c._init(s.params,e,r),Object.defineProperty(i,c.name,{enumerable:!0,value:c});else if(s.required){var u="Unable to render widget. A required feature is not available ("+s.name+")";throw new Error(u)}}return Object.defineProperty(e,"features",{enumerable:!1,value:i}),e},t.exports=n},{}],200:[function(e,t,r){"use strict";var n=e("../util/util"),o=["author","version","id","authorEmail","authorHref","locale"],i=["description","name","shortName"],a=function(){};a.prototype.makeWidget=function(e,t,r,a){var s={},c=e.locale||null;return Object.defineProperty(s,"baseURI",{enumerable:!0,value:a}),o.forEach(function(t){Object.defineProperty(s,t,{enumerable:!0,value:"undefined"!=typeof e[t]?e[t]:""})}),i.forEach(function(t){var r=null;if(c&&e._lang){var o=n.getDescendantLocales(c),i=o.map(function(t){return e._lang[t]}),a=function(e){var r;if(e.length){var n=e.pop();if(n&&(r=n[t]),"string"!=typeof r)return a(e)}return r};r=a(i)}if("string"!=typeof r&&"string"==typeof e[t])r=e[t];else if("string"!=typeof r&&e.defaultlocale){var u=e._lang[e.defaultlocale];u&&(r=u[t])}Object.defineProperty(s,t,{enumerable:!0,value:"string"==typeof r?r:""})}),Object.defineProperty(s,"width",{enumerable:!0,get:function(){return r.getWidth()}}),Object.defineProperty(s,"height",{enumerable:!0,get:function(){return r.getHeight()}}),Object.defineProperty(s,"preferences",{enumerable:!1,value:t}),s},t.exports=a},{"../util/util":249}],201:[function(e,t,r){"use strict";function n(e,t){var r=o.isUrlAbsolute(t)||o.isUrlSiteRelative(e)&&o.isUrlSiteRelative(t)||e&&o.startsWith(t,e);if(r)return t;var n=!o.endsWith(e,"/")&&!o.startsWith(t,"/");return n?e+"/"+t:e+t}var o=e("../util/util"),i=function(e){};i.prototype.render=function(e,t){throw new Error("WidgetRenderer#render must be overridden.")},i.prototype.process=function(e,t,r){throw new Error("WidgetRenderer#process must be overridden.")},i.prototype.getWidth=function(){throw new Error("WidgetRenderer#getWidth must be overridden.")},i.prototype.getHeight=function(){throw new Error("WidgetRenderer#getHeight must be overridden.")},i.prototype.getWidgetNode=function(){throw new Error("WidgetRenderer#getWidgetNode must be overridden.")},i.prototype.getParentNode=function(){throw new Error("WidgetRenderer#getContainerNode must be overridden.")},i.prototype.setParentNode=function(){throw new Error("WidgetRenderer#setContainerNode must be overridden.")},i.prototype.getAreaNodes=function(){if(this.isContainer)throw new Error("WidgetRenderer#getAreaNodes must be overridden.")},i.prototype.destroy=function(){throw new Error("WidgetRenderer#destroy must be overriden.")},i.prototype.isRendered=function(){throw new Error("WidgetRenderer#isRendered must be overridden.")},i.prototype.getType=function(){return"text/html"},i.getResolvedStartFilePath=function(e,t){var r=t.content&&t.content.src?t.content.src:"index.html";return n(e,r)},t.exports=i},{"../util/util":249}],202:[function(e,t,r){"use strict";function n(e){}n.prototype.init=function(e,t){throw new Error("WidgetStorage#init must be overridden.")},n.prototype.getItem=function(e){throw new Error("WidgetStorage#getItem must be overridden.")},n.prototype.setItem=function(e,t,r){throw new Error("WidgetStorage#setItem must be overridden.")},n.prototype.removeItem=function(e){throw new Error("WidgetStorage#removeItem must be overridden.")},n.prototype.clear=function(e){throw new Error("WidgetStorage#removeItem must be overridden.")},n.prototype.key=function(e){throw new Error("WidgetStorage#key must be overridden.")},t.exports=n},{}],203:[function(e,t,r){"use strict";function n(){this._resolvers=[]}t.exports=n,n.prototype.addResolver=function(e){if("function"!=typeof e)throw new TypeError("resolverFunc argument must be a function");this._resolvers.push(e)},n.prototype.getResolver=function(e){var t=this._resolvers.map(function(t){return t(e)}).filter(function(e){return!!e}),r=t.length;if(0===r)throw new Error("No datasource resolver found which can handle ["+e.uri+"] URI");return t[r-1]}},{}],204:[function(e,t,r){(function(e){"use strict";function r(e,t){return t?t.replace(u,function(t,r){var o=n(e,r);return void 0===o||null===o?"":o}):""}function n(e,t){for(var r="string"==typeof t?t.split("."):t,n=0,o=e,i=r.length;null!=o&&i>n;)o=o[r[n++]];return n&&n===i?o:void 0}function o(t){var r=t;try{r=e.decodeURIComponent(t)}catch(n){}return e.encodeURIComponent(r)}function i(e){return e.trim().replace(l,"")}function a(e,t){var n=t||{},o=n.value;return{name:r(e,n.name),value:"string"==typeof o?r(e,o):o}}function s(e){return(e||[]).map(function(e){return o(e.name)+"="+o(e.value)}).join("&")}function c(e,t){var r=(t||[]).map(function(t){return a(e,t)}).filter(function(e){return!!e.name});return s(r)}var u=/\$\{([^}\s]+)}/g,l=/^\/+|\/+$/g;t.exports={resolveExpression:r,resolveParameter:a,buildQueryString:s,resolveQueryString:c,encodeURIComponent:o,trimSlashes:i}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],205:[function(e,t,r){"use strict";function n(e,t){var r=t&&t.uri;return r&&r.slice(0,e.length).toLowerCase()===e}function o(e){this._resolverImpl=e;var t=i.getLogger();this._log=t.child({childName:"datasource-resolver"})}var i=e("../util/logger-factory"),a=e("../fetch/filtering-fetch"),s=e("../util/response-helpers");t.exports=o,o.prototype.loadData=function(e){var t=this._resolverImpl,r=t.resolveUrl(e);return a(r,{headers:{"Cache-control":"no-cache, no-store, must-revalidate",Pragma:"no-cache"}}).then(function(e){return s.isResponseOk(e)?Promise.resolve(e):Promise.reject(s.createError(e))}).then(function(r){return t.processResponse(r,e)})},o.createFactoryFunction=function(e,t){var r=this._log,i="function"==typeof e?e:n.bind(null,e);return function(e){if(i(e)){var n=new t(e,r);return new o(n)}}}},{"../fetch/filtering-fetch":213,"../util/logger-factory":247,"../util/response-helpers":248}],206:[function(e,t,r){"use strict";function n(e,t,r,n){var o=s.normalizeListener(r);if(!o)throw new TypeError('Unrecognized "listener" argument. It must be a function or an object with handleEvent method.');var i,a=s.normalizeOptions(n);Object.prototype.hasOwnProperty.call(e,t)?i=e[t]:(i=[],Object.defineProperty(e,t,{writable:!0,configurable:!0,value:i}));var c=i.some(function(e){return e.func===o&&e.opts.capture===a.capture});c||i.push({func:o,opts:a})}function o(e,t,r,n){var o=s.normalizeListener(r);if(!o)throw new TypeError('Unrecognized "listener" argument. It must be a function or an object with handleEvent method.');var i=s.normalizeOptions(n);if(Object.prototype.hasOwnProperty.call(e,t)){var a=e[t]=e[t].filter(function(e){return e.func!==o||e.opts.capture!==i.capture});0===a.length&&delete e[t]}}function i(e,t,r){if(!Object.prototype.hasOwnProperty.call(e,t))return!0;var n=e[t],o=c(r,e),i=n.filter(function(e){return!e.opts.capture}).reduce(function(t,r){return o[u]?t:(o[l]=r.opts.passive,r.func.call(e,o),r.opts.once&&(r.remove=!0),!o.defaultPrevented)},!0);return n=e[t]=n.filter(function(e){return!e.remove}),0===n.length&&delete e[t],i}var a=e("./event-wrapper"),s=e("./helpers"),c=a.createEventWrapper,u=a.STOP_IMMEDIATE_PROPAGATION_FLAG,l=a.PASSIVE_LISTENER_FLAG,p="@@";t.exports=Object.create(Object.prototype,{addEventListener:{value:function(e,t,r){if(s.isEmpty(e))throw TypeError("Type argument cannot be empty");if("undefined"==typeof t)throw TypeError("Listener argument is required");n(this,p+e,t,r)}},removeEventListener:{value:function(e,t,r){if(s.isEmpty(e))throw TypeError("Type argument cannot be empty");if("undefined"==typeof t)throw TypeError("Listener argument is required");o(this,p+e,t,r)}},dispatchEvent:{value:function(e){if(!s.isObject(e))throw new TypeError("Event argument is not an object");if(s.isEmpty(e.type))throw new TypeError('Event object must have non-empty "type" property');return i(this,p+e.type,e)}}})},{"./event-wrapper":207,"./helpers":208}],207:[function(e,t,r){"use strict";var n="__STOP_IP",o="__CANCELED",i="__PASSIVE_LISTENER",a="__ORIG_EVENT",s={stopPropagation:{value:function(){var e=this[a];"function"==typeof e.stopPropagation&&e.stopPropagation()},writable:!0,configurable:!0},stopImmediatePropagation:{value:function(){this[n]=!0;var e=this[a];"function"==typeof e.stopImmediatePropagation&&e.stopImmediatePropagation()},writable:!0,configurable:!0},preventDefault:{value:function(){if(!this[i]){this.cancelable===!0&&(this[o]=!0);var e=this[a];"function"==typeof e.preventDefault&&e.preventDefault()}},writable:!0,configurable:!0},defaultPrevented:{get:function(){return this[o]},enumerable:!0,configurable:!0}};t.exports.STOP_IMMEDIATE_PROPAGATION_FLAG=n,t.exports.PASSIVE_LISTENER_FLAG=i,t.exports.createEventWrapper=function(e,t){var r="number"==typeof e.timeStamp?e.timeStamp:Date.now(),c={target:{value:t},currentTarget:{value:t},eventPhase:{value:2},bubbles:{value:e.bubbles===!0},cancelable:{value:e.cancelable===!0},timeStamp:{value:r},isTrusted:{value:!1,enumerable:!0}};return c[n]={value:!1,writable:!0},c[o]={value:!1,writable:!0},c[i]={value:!1,writable:!0},c[a]={value:e},Object.create(Object.create(e,s),c)}},{}],208:[function(e,t,r){"use strict";function n(e){return null!==e&&"object"==typeof e}function o(e){return"undefined"==typeof e||null===e||""===e}function i(e){var t="function"==typeof e?e:null;return n(e)&&"function"==typeof e.handleEvent&&(t=e.handleEvent),t}function a(e){var t={capture:!1,passive:!1,once:!1};return"boolean"==typeof e?t.capture=e===!0:n(e)&&(t.capture=e.capture===!0,t.passive=e.passive===!0,t.once=e.once===!0),t}t.exports={isEmpty:o,isObject:n,normalizeListener:i,normalizeOptions:a}},{}],209:[function(e,t,r){(function(e){"use strict";function r(t){var r="destroy";if("function"==typeof e.Event)return new e.Event(r,t);var n=e.document.createEvent("Event"),o=t||{};return n.initEvent(r,o.bubbles===!0,o.cancelable===!0),n}t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],210:[function(e,t,r){"use strict";var n=e("../util/util");t.exports=function(e){if("omit"!==e.credentials)return e;var t=n.isRunningOnFilesystem()?"include":"same-origin";return new Request(e,{credentials:t})}},{"../util/util":249}],211:[function(e,t,r){(function(r){"use strict";function n(e,t,r){var n=s(t);d[e]=n,r>0&&(n.timeoutId=i(e,r))}function o(e){var t,r=d[e];return r&&(r.setLastAccessedTime(),t=r.value),t}function i(e,t,r){var n;return"undefined"==typeof r?(n=t,c.debug("setting sliding expire handler to purge item [%s] in %sms",e,n)):(n=r,c.debug("%sms elapsed since last access to item [%s]. Extending expiration time by %sms",t-r,e,n)),setTimeout(function(){var r=d[e];if(r){var n=(new Date).getTime()-r.lastAccessed;n>=t?(c.debug("purging expired item [%s]",e),delete d[e]):r.timeoutId=i(e,t,t-n)}},n)}function a(){Object.keys(d).forEach(function(e){var t=d[e].timeoutId;"undefined"!=typeof t&&clearTimeout(t),delete d[e]})}function s(e){var t=(new Date).getTime(),r=Object.create(g);return r.value=e,r.created=t,r.lastAccessed=t,r}var c,u=e("../util/logger-factory"),l=e("../util/util"),p=e("./fetch-file"),f=e("../util/response-helpers"),h=1e3,d={},g={setLastAccessedTime:function(){this.lastAccessed=(new Date).getTime()}};t.exports=function(e,t){var i="string"==typeof e?e:e.url,s=i,g=e.method||t&&t.method||"GET",m="string"==typeof g&&"GET"===g.toUpperCase();c||(c=u.getLogger()),m||a();var y=o(s);if(y&&m)c.debug("returning data for [%s] from cache",s);else{c.debug("data from [%s] not found in cache. Requesting it from remote resource...",s);var v=l.isUrlForFile(i)?p:r.fetch;y=v(e,t).then(function(e){var t=e.status;if(c.debug("response from [%s] received. Status: [%s]",s,t),!f.isResponseOk(e)){var r=f.createError(e);throw r._response=e,r}return e}).then(function(e){var t=o(s);return t&&(c.debug("holding data from [%s] in cache for %sms",s,h),n(s,t,h)),e})["catch"](function(e){if(c.debug("removing data for [%s] from cache as the following error occurred: [%s]",s,e.message),delete d[s],e._response)return e._response;throw e}),m&&n(s,y)}return y.then(function(e){return e.clone()})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../util/logger-factory":247,"../util/response-helpers":248,"../util/util":249,"./fetch-file":212}],212:[function(e,t,r){(function(e){"use strict";var r="Content-Type";t.exports=function(t){return new Promise(function(n,o){var i="string"==typeof t?t:t.url,a=new e.XMLHttpRequest;a.onload=function(){var t={status:0===a.status?200:a.status},o=a.getResponseHeader(r);o&&(t.headers={},t.headers[r]=o),n(new e.Response(a.responseText,t))},a.onerror=function(){o(new Error("Local request failed for "+t))},a.open("GET",i),a.send(null)})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],213:[function(e,t,r){"use strict";function n(e,t){var r=s.reduce(function(e,t){return t(e)||e},new Request(e,t));return o(r)}var o=e("./deduping-fetch"),i=e("./credentials-filter"),a=e("./xsrf-filter"),s=[i,a];n.addRequestFilter=function(e){if("function"!=typeof e)throw new TypeError("The filter argument must be a function");return s.push(e),function(){s=s.filter(function(t){return t!==e})}},n.clearRequestFilters=function(){s=[]},t.exports=n},{"./credentials-filter":210,"./deduping-fetch":211,"./xsrf-filter":214}],214:[function(e,t,r){"use strict";function n(){var e=document.cookie.match(a);return e&&e[1]||void 0}var o="XSRF-TOKEN",i="X-XSRF-TOKEN",a=new RegExp("(?:^|;\\s*)"+o+"=([^;]+)");t.exports=function(e){if(!e.headers.has(i)&&"GET"!==e.method){var t=n();t&&e.headers.set(i,t)}return e}},{}],215:[function(e,t,r){(function(r){"use strict";var n=e("./core/widget-engine"),o=e("./strategies/parser/auto-config-parser"),i=e("./strategies/reader/fetch-widget-reader"),a=e("./strategies/renderer/html5-seamless-renderer"),s=e("./strategies/storage/html5-local-storage"),c=e("./strategies/renderer/preprocessors/handlebars-preprocessor"),u=e("./datasource/datasource-resolver-factory"),l=e("./strategies/datasource/resource-datasource-resolver"),p=e("./strategies/datasource/http-datasource-resolver"),f=e("./plugins/cxp-additions-plugin"),h=e("./plugins/replace-config-vars-plugin"),d=e("./plugins/backbase-format-plugin"),g=e("./util/logger-factory"),m=e("./util/util"),y=null,v=function(e){return y||(y=new c(e))},b=function(e){e=e||{},g.createLogger({parentLog:e.log,loggerName:"widget",logLevel:e.logLevel,appendId:!0})};b.prototype.init=function(e){e=e||{};var t=e.widgetPath,c=e.widgetEl,d=this.configVars=e.configVars||{},g=e.reader||(e.initialModel?null:new i),y=e.parser||new o,b=e.storage||new s,_=e.renderer;if(!_){var w=new u;w.addResolver(l.getInstance),w.addResolver(p.getInstance),this._datasourceResolverFactory=w,_=new a(c,w,{configVars:d})}var x;if("string"!=typeof t?x="You must provide a widget path":c||(x="You must provide a widget parent node"),x)throw new Error(x);var E=v(d);_.addPreprocessor("text/x-handlebars-template",E),_.addPreprocessor("application/x-handlebars-template",E),this.widgetEngine=new n({configFile:e.configFile,widgetPath:t,parser:y,reader:g,renderer:_,storage:b,initialModel:e.initialModel}),this.widgetEngine.addPlugin(new f),this.widgetEngine.addPlugin(new h({contextRoot:d.contextRoot,remoteContextRoot:d.remoteContextRoot||d.contextRoot,apiRoot:d.apiRoot,itemRoot:d.itemRoot||"",staticResourcesRoot:d.staticResourcesRoot},{full:!!d.fullConfigReplacement})),this.widgetEngine.addPlugin({name:"Angular JS",postRender:function(e,t){var n=r.angular;if(n){var o=t.getWidgetNode(),i=o.getAttribute("widget-ng-app")||o.getAttribute("data-widget-ng-app");if(i){var a=o.getAttribute("ng-strict-di")||o.getAttribute("data-ng-strict-di");n.element(document).ready(function(){n.module(i).value("widget",e),n.bootstrap(e.body,[i],{strictDi:m.parseBoolean(a)})})}}return e}})},b.prototype.enableCompatibility=function(){var e=this.configVars||{},t={apiRoot:e.apiRoot||"",contextRoot:e.contextRoot||"",remoteContextRoot:e.remoteContextRoot||""};this.widgetEngine.addPlugin(new d(t))},b.prototype.start=function(){return this.widgetEngine.start()},b.prototype.addPlugin=function(e){return this.widgetEngine.addPlugin(e),this},b.prototype.addFeature=function(e){return this.widgetEngine.addFeature(e),this},b.prototype.getLogger=function(){return this.log},b.prototype.destroy=function(){return this.widgetEngine.destroy()},b.prototype.addDatasourceResolver=function(e){if(this._datasourceResolverFactory)return this._datasourceResolverFactory.addResolver(e),this;throw new Error("This method cannot be called when custom renderer is provided")},t.exports=b}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./core/widget-engine":198,"./datasource/datasource-resolver-factory":203,"./plugins/backbase-format-plugin":216,"./plugins/cxp-additions-plugin":223,"./plugins/replace-config-vars-plugin":224,"./strategies/datasource/http-datasource-resolver":225,"./strategies/datasource/resource-datasource-resolver":226,"./strategies/parser/auto-config-parser":227,"./strategies/reader/fetch-widget-reader":237,"./strategies/renderer/html5-seamless-renderer":238,"./strategies/renderer/preprocessors/handlebars-preprocessor":239,"./strategies/storage/html5-local-storage":242,"./util/logger-factory":247,"./util/util":249}],216:[function(e,t,r){"use strict";function n(e){e=e||{},this.opts=e,this.name="Backbase Format",this.portalConf=e.portalConf||{},this.window="undefined"==typeof window?e.window:window,this.log=i.getLogger(),this.opts.log=this.log}function o(e){for(var t=e;t;){if("function"==typeof t.hasAttribute&&t.hasAttribute("data-chrome"))return t;t=t.parentNode}return null}var i=e("../util/logger-factory"),a=e("../util/util"),s=e("promise-extensions")(),c=e("./backbase-format/widget-handlers"),u=e("./backbase-format/legacy-widget-api"),l=e("./backbase-format/include-object"),p=Array.prototype.slice.call.bind(Array.prototype.slice);t.exports=n,n.prototype.preRender=function(e,t,r){this.log.info("Backbase format plugin is running in PRE RENDER phase..."),e.preferences.getItem("src")||e.preferences.defineItem({name:"src",value:r.content.src,readonly:!1}),e.preferences.getItem("thumbnailUrl")||e.preferences.defineItem({name:"thumbnailUrl",value:r.icons[0],readonly:!1}),e.preferences.getItem("title")||e.preferences.defineItem({name:"title",value:r.title,readonly:!1});var n=u.buildWidget(e,r,this.log,this.portalConf.tags),o=n.preferences.eventTarget?n.preferences.eventTarget.indexOf(e):-1;return o>-1&&(n.preferences.eventTarget[o]=n),this.log.info("Backbase format plugin PRE RENDER done."),n},n.prototype.postRender=function(e,t,r){var n,i=this,f=this.log,h=this.window;f.info("Backbase format plugin is running in POST RENDER phase..."),u.applyPresentationApi(e,t,r,f);var d=p(e.body.getElementsByTagName("g:include")),g=d.filter(function(t){return a.ensureElementBelongsToItem(e.name,t)}).map(function(t){return new l(t,e,r,i.opts)});return g.length?(e.includes=g,e.refreshIncludes=function(){var e=this.includes.map(function(e){return e.refresh()});return s.settleAll(e).then(function(e){var t=e.filter(function(e){return e.isRejected()}).length;t>0&&f.warn("%s includes failed to resolve.",t)})},g.forEach(function(e,t){var r=d[t];r.parentNode.replaceChild(e.htmlNode,r)}),n=e.refreshIncludes()):n=s.resolve(),n.then(function(){var t=o(e.body)||e.body;return c.handleLoad(h,e,f),c.handlePrefModified(h,e,f),c.handleMaximize(h,e,t,f),c.handleRestore(h,e,t,f),f.info("Backbase format plugin POST RENDER done."),e})}},{"../util/logger-factory":247,"../util/util":249,"./backbase-format/include-object":218,"./backbase-format/legacy-widget-api":220,"./backbase-format/widget-handlers":222,"promise-extensions":193}],217:[function(e,t,r){"use strict";function n(e,t){var r=e.replace(/\/[^\/]+$/,"");r=r.replace(/\$\(contextRoot\)/,t);var n=s.isUrlAbsolute(e)?e:r+"/"+e;return n.substring(0,n.lastIndexOf("/")+1)}function o(e,t){if("undefined"!=typeof DOMParser){var r=new DOMParser,n=r.parseFromString(e,"text/html"),o=c(n.getElementsByTagName("img"));return o.forEach(function(e){var r=e.getAttribute("src");r&&s.isUrlSiteRelative(r)&&(r=new URL(r,t).href,e.setAttribute("src",r))}),n.body.innerHTML}return e}function i(e,t){function r(e,t){return t=t[e.shift()],e.length>0&&t&&"object"==typeof t?r(e,t):t}var n=e.split(".");return r(n,t)}function a(e){return void 0===e||null===e||""===e}var s=e("../../util/util"),c=Array.prototype.slice.call.bind(Array.prototype.slice);t.exports={getStartFileFolder:n,makeReferenceAbsolute:o,resolveExpression:i,isEmpty:a,convertToArray:c}},{"../../util/util":249}],218:[function(e,t,r){(function(r){"use strict";function n(e,t,n,o){o=o||{};var i=o.contextRoot||"",c=o.remoteContextRoot||"",u="true"===e.getAttribute("local"),l={replaceRegex:/\$\{([a-zA-Z0-9-_.]+)\}/g,log:o.log,startFileFolder:a.getStartFileFolder(n.content.src,i),contextRoot:u||!c?i:c};Object.defineProperty(this,"_config",{value:l}),this.widget=t,this.uri={template:e.getAttribute("src")},this.proxy="true"===e.getAttribute("proxy"),this.method=e.getAttribute("method")||"GET";var p=r.document.createElement("div");p.className="bp-g-include",this.htmlNode=p;var f=new s(n,o);this.params=f.buildParameters(this,e)}var o=e("../../util/util"),i=e("browser-bunyan"),a=e("./include-helpers"),s=e("./include-param-builder"),c=e("../../fetch/filtering-fetch"),u=e("../../util/response-helpers"),l=r.FormData;t.exports=n,n.prototype.setURI=function(e){e&&"string"==typeof e&&(this.uri.template=e)},n.prototype.getContentURI=function(){var e=this.uri.template;if(!e)return"";var t=this._config,r=this;return e=e.replace(t.replaceRegex,function(e,t){return r.widget.getPreference(t)}),e=e.replace("$(contextRoot)",t.contextRoot),o.isUrlDocumentRelative(e)&&(e=t.startFileFolder+e,t.log.debug("g:include src after resolution is [%s]",e)),e},n.prototype.refresh=function(){var e=this._config,t=e.log,r=this._getRequestParams(),n=this._resolveRequestUrl(r),s=this._getRequestOptions(r);if(t.level()<=i.DEBUG){var l=JSON.stringify(s,null,"	");t.debug("Making g:include http request to [%s] with fetch opts: [%s]",n,l)}return c(n,s).then(function(e){return t.debug("g:include request to [%s] completed with status: %s",n,e.status),u.isResponseOk(e)?Promise.resolve(e.text()):Promise.reject(u.createError(e))})["catch"](function(e){return"Unable to resolve g:include ( "+e.message+" )"}).then(function(r){return t.trace("Received html response:\n%s",r),o.isRunningOnFilesystem()&&o.isUrlAbsolute(e.contextRoot)&&(r=a.makeReferenceAbsolute(r,e.contextRoot)),this.htmlNode.innerHTML=r,this.htmlNode.setAttribute("data-src",n),this.htmlNode}.bind(this))},n.prototype._getRequestParams=function(){var e=[];if(this.proxy){e=this.params.filter(function(e){return"proxy"===e.destination});var t=this.getContentURI();if(t){var r=this.params.filter(function(e){return"target"===e.destination}).map(function(e){return e.toQueryString()}).filter(function(e){return!!e}).join("&"),n={name:"url",getQueryParams:function(){return[{name:this.name,value:t+(-1!==t.indexOf("?")?"&":"?")+r}]},toQueryString:function(){var e=this.getQueryParams()[0];return e.name+"="+encodeURIComponent(e.value)}};e.push(n)}}else e=this.params.filter(function(e){return"target"===e.destination});return e},n.prototype._resolveRequestUrl=function(e){var t=this.proxy?this._config.contextRoot+"/proxy":this.getContentURI();if(this.method&&"POST"!==this.method.toUpperCase()){var r=e.map(function(e){return e.toQueryString()}).join("&");t+=(t.indexOf("?")>=0?"&":"?")+r}return t},n.prototype._getRequestOptions=function(e){var t={};return this.method&&"POST"===this.method.toUpperCase()&&(t.method=this.method,t.body=this._constructFormData(e)),t},n.prototype._constructFormData=function(e){var t=new l;return e.reduce(function(e,t){return e.concat(t.getQueryParams())},[]).forEach(function(e){t.append(e.name,e.value)}),t},["getContentIterator","hasContent","setContent"].forEach(function(e){n.prototype[e]=function(){this._config.log.warn("%s method is no longer supported in CXP6",e)}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../fetch/filtering-fetch":213,"../../util/response-helpers":248,"../../util/util":249,"./include-helpers":217,"./include-param-builder":219,"browser-bunyan":2}],219:[function(e,t,r){"use strict";function n(e,t){this._widgetModel=e,this._log=t.log,this._remoteContextRoot=t.remoteContextRoot||"",this._contextRoot=t.contextRoot||"",this._apiRoot=t.apiRoot||"",this._paramFactoryMap={"g:http-param":this._buildHttpParam,"g:http-proxy-param":this._buildHttpProxyParam,"g:http-preference-param":this._buildPreferenceParam,"g:http-preference-param-map":this._buildPreferenceParamMap}}function o(e,t,r,n){this.name={template:e.getAttribute("name")},this.value={template:e.getAttribute("value")},this.destination=n||"target",this.method=(e.getAttribute("method")||t.method||"GET").toUpperCase(),
Object.defineProperty(this,"_include",{value:t}),Object.defineProperty(this,"_log",{value:r})}function i(e,t,r,n){o.call(this,e,t,r);var i=e.getAttribute("dataType")||e.getAttribute("datatype");Object.defineProperty(this,"_typeName",{value:i});var a=n.preferences||{},s=Object.keys(a).filter(function(e){return a[e].type===i});Object.defineProperty(this,"_prefs",{value:s})}function a(e,t,r){o.call(this,e,t,r)}function s(e,t,r,n,i,a){var s=n?"proxy":"target";o.call(this,e,t,r,s),Object.defineProperty(this,"_replaceRegex",{value:/\$\{([a-zA-Z0-9-_]+)\}/}),Object.defineProperty(this,"_contextRoot",{value:i}),Object.defineProperty(this,"_apiRoot",{value:a})}var c=e("./include-helpers");t.exports=n,n.prototype.buildParameters=function(e,t){var r=this,n=this._flattenElementTree(t).filter(function(e){var t=e.nodeName.toLowerCase();return t in r._paramFactoryMap}).map(function(t){var n=t.nodeName.toLowerCase(),o=r._paramFactoryMap[n];return o.call(r,t,e)}).filter(function(e){return!!e});return n.forEach(function(e){["getName","getValues"].forEach(function(t){e[t]=function(){this._log.warn("%s method is no longer supported in CXP6",t)}})}),n},n.prototype._flattenElementTree=function(e){for(var t=[],r=e.firstChild;r;)1===r.nodeType&&t.push(r),r=r.hasChildNodes()?r.firstChild:r.nextSibling;return t},n.prototype._buildHttpParam=function(e,t,r){var n=this._remoteContextRoot||this._contextRoot,o=new s(e,t,this._log,r,n,this._apiRoot);return o.value.template?o:null},n.prototype._buildHttpProxyParam=function(e,t){return this._buildHttpParam(e,t,!0)},n.prototype._buildPreferenceParam=function(e,t){var r=new a(e,t,this._log);return r.name.template?r:null},n.prototype._buildPreferenceParamMap=function(e,t){var r=new i(e,t,this._log,this._widgetModel);return r._typeName?r:null},o.prototype.getQueryParams=function(){return[]},o.prototype.toQueryString=function(){return this.getQueryParams().map(function(e){return e.name+"="+encodeURIComponent(e.value)}).join("&")},i.prototype=Object.create(o.prototype),i.prototype.getQueryParams=function(){var e=this._typeName,t=this;return this._prefs.map(function(r){return{name:e+"."+r,value:t._include.widget.getPreference(r)}})},a.prototype=Object.create(o.prototype),a.prototype.getQueryParams=function(){var e=this.name?this.name.template:null;if(c.isEmpty(e))return[];var t=this._include.widget.getPreference(e);return c.isEmpty(t)&&this._log.warn("Failed to resolve g:include parameter value. Parameter - [%s]",e),[{name:e,value:t}]},s.prototype=Object.create(o.prototype),s.prototype.getQueryParams=function(){var e=this.name?this.name.template:null,t=this.value?this.value.template:null,r=t,n=this._include.widget,o=this._contextRoot,i=this._apiRoot;if(c.isEmpty(e)||c.isEmpty(t))return[];if(t=t.replace(this._replaceRegex,function(e,t){return"contextRoot"===t?o:"apiRoot"===t?i:n.getPreference(t)}),0===t.indexOf("__WIDGET__")){var a=t.split(".").filter(function(e,t){return 0!==t}).join(".");t=c.resolveExpression(a,n),c.isEmpty(t)&&this._log.warn("Failed to resolve g:include parameter value. Parameter - [%s], unresolved value - [%s], resolved value - [%s]",e,r,t)}return[{name:e,value:t}]}},{"./include-helpers":217}],220:[function(e,t,r){(function(r,n){"use strict";function o(e,t,r,n){var o="backbaseWidget",i=l.cloneWidgetInstance(e);return i.id=t.id||Math.random().toString(36).substr(2,5),i.name=t.name,i.nodeType=1,i.nodeValue=o,i.margins={top:0,right:0,bottom:0,left:0},Object.getOwnPropertyNames(e).forEach(function(t){l.startsWith(t,"@@")&&(i[t]=e[t])}),i.myDefinition={sUrl:t.content.src},i.nodeName=o,i.tagName=o,i.tags=Array.isArray(n)?n:[],i.model=a(i,t),f(i,r),s(i),i.addEventListener&&i.dispatchEvent&&i.addEventListener("storage",function(e){r.debug("Chaining StorageEvent to Backbase 'PrefModified' event...");var t="PrefModified",n=new h(t);n.initStorageEvent(t,!1,!1,e.key,e.oldValue,e.newValue,e.url,i.preferences),n.attrName=e.key,n.prevValue=e.oldValue,i.model.dispatchEvent(n)}),i}function i(e,t,r,o){var i=e.body||t.getWidgetNode(),a=i.getAttribute("g:onload");if(a){var s=n.document.createElement("div"),c=i.parentNode,l=i.nextSibling;s.appendChild(i),s.className="bp-widget-body",l?c.insertBefore(s,l):c.appendChild(s),e.body=s}e.htmlNode=u(i),e.refreshHtml=function(){var e=this.features&&this.features.cxp;return e?e.model.item(r.name,r.type).get().then(function(t){return e.render.rerenderItem(t.id,t.name,t)}):(o.warn('A widget is required to have "CXP" feature in order to be able to refresh its view.'),Promise.resolve())}}function a(e,t){var o={jxid:"VIEW-"+t.name,localName:"Widget",name:t.name,tag:"widget",tagName:"Widget",contextItemName:e.features&&e.features.cxp&&e.features.cxp.config?e.features.cxp.config.get("portalName"):null,extendedItemName:t.extendedItemName||null,parentItemName:t.parentItemName||null,securityProfile:t.securityProfile||null,uuid:t.id||null,preferences:c(e.preferences),tags:Array.isArray(t.tags)?t.tags:[],addEventListener:p.addEventListener,removeEventListener:p.removeEventListener,dispatchEvent:p.dispatchEvent};return o.save=function(e){var t=this;r.nextTick(function(){if("function"==typeof e){var r={contextItemName:t.contextItemName,name:t.name,preferences:t.preferences,tag:t.tag},o={status:204,statusText:"No Content",readyState:4};e.call(n,r,o)}})},o.getPreference=function(t){return e.preferences.getItem(t)},o.setPreference=function(t,r){e.preferences.setItem(t,r)},o}function s(e){e.getPreference=function(e){return this.preferences.getItem(e)},e.getPreferenceFromParents=e.getPreference,e.getAreaPreference=function(){return this.preferences.getItem("area")||0},e.getOrderPreference=function(){return this.preferences.getItem("order")},e.setPreference=function(e,t){this.preferences.setItem(e,t)},e.getDefinition=function(){return e.myDefinition},e.setAreaPreference=function(e){this.preferences.setItem("area",e)},e.setOrderPreference=function(e){this.preferences.setItem("order",e)}}function c(e){return e._items}function u(e){for(var t=e;t;){if("function"==typeof t.hasAttribute&&t.hasAttribute("data-chrome"))return t;t=t.parentNode}return null}var l=e("../../util/util"),p=e("../../event-target/event-target"),f=e("./warn-deprecated-access"),h=e("../../strategies/storage/storage-event");t.exports={buildWidget:o,applyPresentationApi:i}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../event-target/event-target":206,"../../strategies/storage/storage-event":243,"../../util/util":249,"./warn-deprecated-access":221,_process:419}],221:[function(e,t,r){"use strict";function n(e,t,r){return function(){var n="COMPATIBILITY: %s is a widget %s that is no longer supported in CXP6";e.warn(n,t,r?"method":"property")}}function o(e,t){var r=i.reduce(function(e,r){return e[r]={enumerable:!0,get:n(t,r),set:n(t,r)},e},{});return Object.defineProperties(e,r),a.reduce(function(e,r){return e[r]=n(t,r,!0),e},e),e}t.exports=o;var i=["attributes","childNodes","cls_custom","cnBase","firstChild","flex","htmlArea","htmlDoc","htmlFoot","htmlHead","lastChild","layout","local_listeners","localName","namespaceURI","nextSibling","node","ownerDocument","parentNode","perspective","prefix","previousSiblings"],a=["appendChild","cloneNode","createDisplay","createPerspective","destroy","disableDesignMode","dragIsTarget","enableDesignMode","getAreaOrderedChildren","getAttribute","getAttributeNS","getClassID","getCurrentPerspective","getDisplay","getDisplayEventTarget","getDisplayModel","getElementsByTagName","getElementsByTagNameNS","getHTMLArea","hasAttribute","hasAttributeNS","hasAttributes","hasChildNodes","hideDesignTools","hideDragTargets","insertBefore","insertDisplayChild","loadChildren","lookupNamespaceURI","refreshIncludes","removeAttribute","removeAttributeNS","removeChild","renderDisplay","replaceChild","setAttribute","setAttributeNS","setCurrentPerspective","showDesignTools","showDragTargets","template"]},{}],222:[function(e,t,r){"use strict";function n(e,t,r){var n="onload",o=s(n,t.body,t.name);o&&c(e,t.id,o,n,r)}function o(e,t,r){var n="onPrefModified",o=s(n,t.body,t.name);o&&t.model.addEventListener("PrefModified",function(){c(e,t.id,o,n,r)})}function i(e,t,r,n){var o="onmaximize",i=s(o,t.body,t.name);i&&r.addEventListener("click",function(r){"maximized"===r.target.getAttribute("data-cxp-viewmode")&&c(e,t.id,i,o,n)})}function a(e,t,r,n){var o="onrestore",i=s(o,t.body,t.name);i&&r.addEventListener("click",function(r){"windowed"===r.target.getAttribute("data-cxp-viewmode")&&c(e,t.id,i,o,n)})}function s(e,t,r){var n=t.querySelector("div[g\\:"+e+"]");return n&&u.ensureElementBelongsToItem(r,n)?n.getAttribute("g:"+e):null}function c(e,t,r,n,o){try{o.debug("Executing g:%s script...",n);var i=e.cxp._widgets?"window.cxp._widgets['"+t+"']":"window.widget",a=r.replace(/(__WIDGET__|__GADGET__)/,i);e.eval("(function() {"+a+"})()")}catch(s){var c=/is not defined$/.test(s.message)?"This maybe because in CXP6 functions in start files must be explicitly declared on the global scope":"";o.warn("g:%s failed! %s",n,c),o.error(s)}}var u=e("../../util/util");t.exports={handleLoad:n,handleMaximize:i,handleRestore:a,handlePrefModified:o}},{"../../util/util":249}],223:[function(e,t,r){"use strict";var n=e("../event-target/event-target"),o=function(){this.name="CXP Additions Plugin"};o.prototype.postRead=function(e){var t=e.preferences;return Array.isArray(t)&&(e.preferences=t.reduce(function(e,t){return e[t.name]=t,e},{})),e},o.prototype.preRender=function(e,t,r){r.type&&Object.defineProperty(e,"type",{value:r.type}),e.addEventListener=n.addEventListener,e.removeEventListener=n.removeEventListener,e.dispatchEvent=n.dispatchEvent;var o=e.preferences.eventTarget=e.preferences.eventTarget||[];return-1===o.indexOf(e)&&(o.push(e),e.addEventListener("destroy",function(){var e=this,t=e.preferences;t.eventTarget=t.eventTarget.filter(function(t){return t!==e})},{once:!0})),e},t.exports=o},{"../event-target/event-target":206}],224:[function(e,t,r){"use strict";var n=e("../util/logger-factory"),o=e("browser-bunyan"),i=function(e,t){t=t||{},this.name="Replace Config Vars",this.varMap=e,this.full=!!t.full,this.interpolateStartRegex=t.interpolateStartRegex||"\\$\\(",this.interpolateEndRegex=t.interpolateEndRegex||"\\)",this.log=n.getLogger()};i.prototype.postRead=function(e){var t=this,r=this.log;r.info("Replace config vars plugin is running is POST READ phase...");var n=this._getExcludeObjects(e);if(n.length&&n.forEach(function(e){e.value=e.value.replace("contextRoot","__contextRoot__")}),t.full)r.debug("Doing full config vars replacement..."),t._traverse(e);else{r.debug("Doing minimal config vars replacement..."),e.content&&e.content.src&&(e.content.src=t._replaceVars("src",e.content.src)),e.content&&e.content.config&&(e.content.config=t._replaceVars("config",e.content.config)),e.icons&&e.icons.forEach(function(e,r,n){n[r]=t._replaceVars("icons["+r+"]",e)});var o=e.preferences.messages;o&&(o.value=t._replaceVars("messages",o.value));var i=e.preferences.options;if(i&&(i.value=t._replaceVars("options",i.value)),e.datasources&&t._traverse(e.datasources),e.altContent){var a=Object.keys(e.altContent);a.forEach(function(r){var n=e.altContent[r];n.src=t._replaceVars("src."+r,n.src)})}}return n.length&&n.forEach(function(e){e.value=e.value.replace("__contextRoot__","contextRoot")}),r.info("Replace config vars plugin in POST READ is DONE."),e},i.prototype._traverse=function(e){Object.keys(e).forEach(function(t){e[t]=this._replaceVars(t,e[t]),e[t]&&"object"==typeof e[t]&&this._traverse(e[t])},this)},i.prototype._getExcludeObjects=function(e){var t=e.datasources||{},r=Object.keys(t).map(function(e){return t[e]}).reduce(function(e,t){return e.concat(t.params)},[]).filter(function(e){return"template"===e.name&&"string"==typeof e.value}),n=e.preferences||{},o=Object.keys(n).map(function(e){return n[e]}).filter(function(e){return"templateUrl"===e.name&&"string"==typeof e.value});return r.concat(o)},i.prototype._replaceVars=function(e,t){if("string"!=typeof t)return t;var r=this,n=r.log,i=r.varMap,a=Object.keys(i);return t=t.replace(/\$\(contextRoot\)\/static/g,"$(staticResourcesRoot)/static"),a.forEach(function(a){var s=new RegExp(r.interpolateStartRegex+a+r.interpolateEndRegex,"g");n.level()<=o.DEBUG&&s.test(t)&&n.debug("Replacing occurences of [%s] with [%s] where [%s=%s]",s,i[a],e,t),t=t.replace(s,i[a])}),t},t.exports=i},{"../util/logger-factory":247,"browser-bunyan":2}],225:[function(e,t,r){"use strict";function n(e){var t=e&&e.uri;return t&&u.test(t)}function o(e){this._datasource=e}var i=e("../../datasource/datasource-resolver"),a=e("../../datasource/datasource-resolver-helpers"),s=e("../../util/util"),c=e("lib-bb-html-sanitizer"),u=/^https?:/i;t.exports=o,o.prototype.resolveUrl=function(e){var t=a.resolveQueryString(e,this._datasource.params),r=a.resolveExpression(e,this._datasource.uri);return t&&(r+="?"+t),r},o.prototype.processResponse=function(e,t){var r=this;return s.getContentBodyAndTypeFromResponse(e).then(function(e){return"html"===e.type?r._sanitize(t,e.body):e.body})},o.prototype._sanitize=function(e,t){return this._sanitizer||(this._sanitizer=c.create(e.htmlSanitizerWhitelist)),this._sanitizer(t)},o.getInstance=i.createFactoryFunction(n,o)},{"../../datasource/datasource-resolver":205,"../../datasource/datasource-resolver-helpers":204,"../../util/util":249,"lib-bb-html-sanitizer":31}],226:[function(e,t,r){"use strict";function n(e){this._datasource=e,this._sanitizeParamName="sanitize"}var o=e("../../datasource/datasource-resolver"),i=e("../../datasource/datasource-resolver-helpers"),a=e("../../util/util"),s=e("lib-bb-html-sanitizer");t.exports=n,n.prototype.resolveUrl=function(e){var t=this._datasource.uri,r=this._sanitizeParamName,n=e.contextRoot||"",o=e.itemRoot||"",s=t.split(":");if(2!==s.length)throw new Error("Invalid resource datasource uri: ",t);var c,u=(this._datasource.params||[]).filter(function(e){return e.name!==r}),l=i.resolveQueryString(e,u),p=i.resolveExpression(e,s[1]);return c=a.isUrlDocumentRelative(p)?o+"/"+p:n+p,l&&(c+="?"+l),c},n.prototype.processResponse=function(e,t){var r=this._datasource.params||[],n=this._sanitizeParamName,o=this;return a.getContentBodyAndTypeFromResponse(e).then(function(e){var i;return i="html"===e.type?r.some(function(e){return e.name===n&&"false"===e.value}):!0,i?e.body:o._sanitize(t,e.body)})},n.prototype._sanitize=function(e,t){return this._sanitizer||(this._sanitizer=s.create(e.htmlSanitizerWhitelist)),this._sanitizer(t)},n.getInstance=o.createFactoryFunction("resource",n)},{"../../datasource/datasource-resolver":205,"../../datasource/datasource-resolver-helpers":204,"../../util/util":249,"lib-bb-html-sanitizer":31}],227:[function(e,t,r){"use strict";var n=e("../../core/config-parser"),o=e("../../util/verror"),i=e("../../util/logger-factory"),a={json:{parser:e("./commonjs-package-config-parser"),testFn:function(e){return"string"==typeof e&&0===e.trim().indexOf("{")}},backbaseXml:{parser:e("./backbase-dom-config-parser"),testFn:function(e){return"string"==typeof e&&e.trim().indexOf("<catalog")>=0}},jsObject:{parser:e("./js-object-parser"),testFn:function(e){return"object"==typeof e}}},s=function(){this.log=i.getLogger(),this.parserMap=a};s.prototype=Object.create(n.prototype),s.prototype.parse=function(e){var t=null;for(var r in this.parserMap)if(this.parserMap.hasOwnProperty(r)){var n=this.parserMap[r];if(n.testFn(e)){this.log.debug("Parsing widget config as: %s",r),t=n.parser;break}}if(null===t)throw new o("Could not determine the config parser to use");var i=new t;return i.parse(e)},s.prototype.addParserStrategy=function(e,t,r){this.parserMap[e]={parser:t,testFn:r}},t.exports=s},{"../../core/config-parser":195,"../../util/logger-factory":247,"../../util/verror":250,"./backbase-dom-config-parser":228,"./commonjs-package-config-parser":229,"./js-object-parser":230}],228:[function(e,t,r){"use strict";var n=e("../../core/config-parser"),o=e("./xml/widget"),i=e("./xml/helpers"),a=function(){};a.prototype=Object.create(n.prototype),a.prototype.parse=function(e){try{var t=new DOMParser,r=t.parseFromString(e,"application/xml"),n=r.documentElement,a="catalog"===n.tagName?i.getChildElements(n)[0]:n;return Promise.resolve(o(a))}catch(s){return Promise.reject(s)}},t.exports=a},{"../../core/config-parser":195,"./xml/helpers":233,"./xml/widget":236}],229:[function(e,t,r){"use strict";var n=e("../../core/config-parser"),o=e("../../util/util"),i=function(){};i.prototype=Object.create(n.prototype),i.prototype.parse=function(t){try{var r=JSON.parse(t),n=o.cloneDeep(e("../../core/default-widget-model"));return n.id=r.name||n.id,n.version=r.version||n.version,n.description=r.description||n.description,n._lang=r.locales||n._lang,Array.isArray(r.contributors)&&r.contributors.length>0&&(n.author=r.contributors[0].name||n.author,n.authorEmail=r.contributors[0].email||n.authorEmail,n.authorHref=r.contributors[0].web||n.authorHref),Array.isArray(r.licenses)&&r.licenses.length>0?(n.license=r.licenses[0].type||n.license,n.licenseHref=r.contributors[0].url||n.licenseHref):"string"==typeof n.license&&(n.license=r.license),n.defaultlocale=r.defaultlocale||n.defaultlocale,n.width=r.width||n.width,n.height=r.height||n.height,n.viewmodes=r.viewmodes||n.viewmodes,n.name=r.fullName||n.name,n.shortName=r.shortName||n.shortName,n.preferences=r.preferences||n.preferences,n.features=r.features||n.features,n.icons=r.icons||n.icons,n.content=r.content||n.content,Promise.resolve(n)}catch(i){return Promise.reject(i)}},t.exports=i},{"../../core/config-parser":195,"../../core/default-widget-model":197,"../../util/util":249}],230:[function(e,t,r){"use strict";var n=e("../../core/config-parser"),o=function(){};o.prototype=Object.create(n.prototype),o.prototype.parse=function(e){return e},t.exports=o},{"../../core/config-parser":195}],231:[function(e,t,r){"use strict";function n(e){var t=[];return s.pushIfExists(t,e.thumbnailUrl),s.pushIfExists(t,e.icon),t}function o(e,t){var r=s.getChildElementByName(e,"children"),n=r&&s.getChildElements(r);return n&&n.map(t).sort(i)}function i(e,t){var r=a(e,"area"),n=a(t,"area"),o=a(e,"order"),i=a(t,"order"),s=0;return n>r?s=-1:r>n?s=1:i>o?s=-1:o>i&&(s=1),s}function a(e,t){if("undefined"==typeof e.preferences[t])return null;var r=e.preferences[t].value,n=parseFloat(r);return isNaN(n)?r:n}var s=e("./helpers");t.exports={parseIcons:n,parseChildren:o}},{"./helpers":233}],232:[function(e,t,r){t.exports.PROPERTY_BLACKLIST=["description","shortName","thumbnailUrl","icon","viewmodes","author","authorEmail","authorHref","license","licenseHref","widgetChrome","config","src","isManageableArea","version","width","height"],t.exports.SPECIAL_TYPES=["contentRef","linkRef","datasource"],t.exports.NO_LOCALE_NAME="no_locale"},{}],233:[function(e,t,r){"use strict";function n(e){return e&&e.value.length?e.value:void 0}function o(e){var t=n(e);return t?t.split(/[,\s]/).filter(function(e){return e.trim().length>0}):[]}function i(e){return"undefined"!=typeof e&&null!==e}function a(e,t,r,n){i(r)&&(e[t]=n?n(r):r)}function s(e,t){i(t)&&e.push(t)}function c(e){return i(e)?"string"==typeof e?"true"===e:e&&"true"===e.value:void 0}function u(e){return[].slice.call(e)}function l(e){return"string"==typeof e?parseFloat(e):void 0}function p(e){if("string"==typeof e){var t=parseInt(e,10);return isNaN(t)?void 0:t}}function f(e,t){for(var r=d(e),n=0;n<r.length;n++)if(r[n].tagName===t)return r[n]}function h(e,t,r){var n=f(e,t);return"undefined"==typeof r&&(r=null),n&&n.textContent||r}function d(e){return"undefined"!=typeof e.children?u(e.children):u(e.childNodes).filter(function(e){return 1===e.nodeType})}t.exports={assignIfExists:a,content:h,isExists:i,parseBool:c,parseString:n,parseFloat:l,parseInt:p,parseViewhint:o,pushIfExists:s,toArray:u,getChildElementByName:f,getChildElements:d}},{}],234:[function(e,t,r){(function(r){"use strict";function n(e){var t=f.getChildElementByName(e,"properties"),r=f.getChildElements(t),n=f.content(e,"locale")||c(),a={},s=r.reduce(function(e,t){var r=o(t,n);return a[r.name]=r.value,-1===h.indexOf(r.name)&&(e[r.name]=r),e},{}),u={id:f.content(e,"uuid"),name:f.content(e,"name",""),shortName:a.shortName,preferences:s,preferencesDict:a,type:e.tagName,locale:n,dir:f.content(e,"dir","ltr")};return f.assignIfExists(u,"tags",i(e)),f.assignIfExists(u,"extendedItemName",f.content(e,"extendedItemName")),f.assignIfExists(u,"parentItemName",f.content(e,"parentItemName")),f.assignIfExists(u,"contextItemName",f.content(e,"contextItemName")),f.assignIfExists(u,"lockState",f.content(e,"lockState")),f.assignIfExists(u,"securityProfile",f.content(e,"securityProfile")),f.assignIfExists(u,"manageable",f.parseBool(f.content(e,"manageable"))),f.assignIfExists(u,"path",f.content(e,"path")),u}function o(e,t){var r=e.attributes,n=f.parseString(r.name),o=f.parseString(r.label),i=f.parseString(r.itemName),a=r.manageable,c=f.parseBool(r.readonly),u=f.parseBool(r.localizable),l=r.viewHint&&f.parseViewhint(r.viewHint),p=f.toArray(e.getElementsByTagName("value")),h=p.map(function(e){return s(e)}),g=h.filter(function(e){return e.locale===t})[0];g||(g=h.sort(function(e,t){var r=1;return e.locale&&(r=t.locale?t.locale.localeCompare(e.locale):-1),r}).filter(function(e){return 0===t.indexOf(e.locale)||!e.locale})[0]||{});var m=r.type&&r.type.value||g.type,y={name:n,readonly:c||!1,value:g.value};return o&&(y.label=o),a&&(y.manageable=f.parseBool(a)),l&&(y.viewhints=l),i&&(y.itemName=i),m&&(y.type=m),u&&(y.localizable=u,y._lang=h.reduce(function(e,t){var r=t.locale||d;return e[r]={value:t.value},e},{}),Object.defineProperty(y,"value",{enumerable:!0,set:function(e){var r=this._lang||(this._lang={}),n=r[t]||(r[t]={});n.value=e,g=n},get:function(){return g.value}})),y}function i(e){var t=f.getChildElementByName(e,"tags"),r=t&&f.getChildElements(t);return r&&r.map(a)}function a(e){return{type:e.attributes.type.value,name:f.parseString({value:e.textContent})}}function s(e){return{value:e.textContent,type:e.getAttribute("type"),locale:e.getAttribute("locale")}}function c(){var e,t=u();return t&&(e=t.getItem("bb:locale")),e||p.defaultLocale}function u(){var e="bb:__test";try{var t=r.localStorage;return t.setItem(e,e),t.removeItem(e),t}catch(n){return null}}var l=e("./constants"),p=e("../../../util/i18n"),f=e("./helpers"),h=l.PROPERTY_BLACKLIST,d=l.NO_LOCALE_NAME;t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../util/i18n":246,"./constants":232,"./helpers":233}],235:[function(e,t,r){"use strict";function n(e){var t=c(e);return this._parseXmlItemModel(t.documentElement)}function o(e){var t=c(e),r=this;return f.getChildElements(t.documentElement).map(function(e){return r._parseXmlItemModel(e)}).filter(function(e){return!!e})}function i(e){var t=u(),r=e.tagName.toLowerCase(),n=this.getParser(r);return n?n(e,t):(t.warn("Unsupported item type [%s]",r),null)}function a(e,t){this._typeSpecificParser||(this._typeSpecificParser={}),this._typeSpecificParser[e]=t}function s(e){return this._typeSpecificParser&&this._typeSpecificParser[e]}function c(e){var t=new DOMParser;return t.parseFromString(e,"application/xml")}function u(){if(!p){var e=d.getLogger();p=e.child({childName:"model-parser"})}return p}function l(){var e=Object.create(g);return e.setParser("widget",h),e.setParser("container",h),e}var p,f=e("./helpers"),h=e("./widget"),d=e("../../../util/logger-factory"),g={parse:n,parseList:o,setParser:a,getParser:s,_parseXmlItemModel:i};t.exports={createInstance:l}},{"../../../util/logger-factory":247,"./helpers":233,"./widget":236}],236:[function(e,t,r){"use strict";function n(e){var t=f(e),r=t.preferencesDict,i={content:a(r),description:r.description,icons:h.parseIcons(r),title:r.title};d.assignIfExists(i,"width",d.parseInt(r.width,10)),d.assignIfExists(i,"height",d.parseInt(r.height,10)),d.assignIfExists(i,"isManageableArea",d.parseBool(r.isManageableArea)),d.assignIfExists(i,"viewmodes",c(r)),d.assignIfExists(i,"author",r.author),d.assignIfExists(i,"authorEmail",r.authorEmail),d.assignIfExists(i,"authorHref",r.authorHref),d.assignIfExists(i,"version",r.version),d.assignIfExists(i,"license",r.license),d.assignIfExists(i,"licenseHref",r.licenseHref),i.altContent=s(t);var u=o(t);Object.keys(u).length>0&&(i.datasources=u);var l=h.parseChildren(e,n);return(l||[]).length>0&&(i.children=l),delete t.preferencesDict,p(t,i)}function o(e){var t=e.preferences,r=Object.keys(t);return r.map(function(e){return t[e]}).filter(function(e){return"datasource"===e.type}).reduce(function(e,t){var r=i(t.value);return r.uri&&(r.name=t.name,e[t.name]=r),e},{})}function i(e){var t={};if(e){var r,n=u();try{r=m.parse(e,!0),t.params=Object.keys(r.query).map(function(e){return{name:e,value:r.query[e]}}),t.uri=t.params.length>0?e.slice(0,e.indexOf("?")):e}catch(o){n.error(o)}}return t}function a(e){var t={src:"",type:"text/html",encoding:"UTF-8"};return d.assignIfExists(t,"src",e.src),d.assignIfExists(t,"config",e.config),t}function s(e){var t=e.preferences,r=Object.keys(t),n=r.filter(function(e){return/^src\..*/.test(e)}),o=n.reduce(function(e,r){var n=t[r].value,o=r.replace(/^src\./,"");return e[o]={src:n,encoding:"UTF-8"},e},{});return n.forEach(function(t){delete e.preferences[t]}),o}function c(e){var t=e.viewmodes;return t?t.split(/\s+/).filter(function(e){return e.trim().length>0}):[]}function u(){if(!l){var e=g.getLogger();l=e.child({childName:"xml-widget-parser"})}return l}var l,p=e("../../../util/util").merge,f=e("./item"),h=e("./common"),d=e("./helpers"),g=e("../../../util/logger-factory"),m=e("url");t.exports=n},{"../../../util/logger-factory":247,"../../../util/util":249,"./common":231,"./helpers":233,"./item":234,url:424}],237:[function(e,t,r){"use strict";var n=e("../../fetch/filtering-fetch"),o=e("../../core/config-reader"),i=e("../../util/verror"),a=e("../../util/logger-factory"),s=e("../../util/response-helpers"),c=function(e){e=e||{},this.log=a.getLogger(),this.useCache="boolean"==typeof e.useCache?e.useCache:!0,this.responseCache={}};c.prototype=Object.create(o.prototype),c.prototype.read=function(e){var t=this,r=this.log;return r.debug("Making http request for widget config to [%s]...",e),this.responseCache[e]?(this.log.debug("Using cached response for [%s]",e),this.responseCache[e]):n(e).then(function(t){return r.debug("Response received for [%s]. Status: %s.",e,t.status),s.isResponseOk(t)?Promise.resolve(t):Promise.reject(s.createError(t))}).then(function(e){return e.text()}).then(function(n){return r.trace("Received config:\n%s",n),t.useCache&&(t.responseCache[e]=n),n})["catch"](function(t){throw new i(t,"Failed to XHR get from "+e)})},t.exports=c},{"../../core/config-reader":196,"../../fetch/filtering-fetch":213,"../../util/logger-factory":247,"../../util/response-helpers":248,"../../util/verror":250}],238:[function(e,t,r){(function(r){"use strict";var n=e("../../util/verror"),o=e("./seamless/start-file-processor"),i=e("../../fetch/filtering-fetch"),a=e("../../util/logger-factory"),s=e("../../util/util"),c=e("../../core/widget-renderer"),u=e("../../util/response-helpers"),l=function(e,t,r){if("undefined"==typeof DOMParser)throw new Error("DOMParser is not shimmed or a native object. This renderer will not work");this._domParser=new DOMParser,this.widgetEl=null,this.areaMap=null,this.preprocessorMap={},this.log=a.getLogger(),this._datasourceResolverFactory=t,this.widgetContainerEl=e,this.opts=r||{},this.configVars=this.opts.configVars||{},this.parsingFormat=this.opts.parsingFormat||null,this.useFolderLocalization=this.opts.useFolderLocalization||!1};l.prototype=Object.create(c.prototype),l.prototype.render=function(e,t){var r,o=this;if(this.isRendered())r=Promise.resolve(o.process(e,t,null));else{var i=[];i.push(this._fetchStartFile(e).then(function(e){return{name:"startFile",data:e}}));var a=e.preferences.messages&&e.preferences.messages.value,c=e.preferences.options&&e.preferences.options.value;a&&i.push(this._fetchStaticJSON(a).then(function(e){return{name:"messages",data:e}})),c&&i.push(this._fetchStaticJSON(c).then(function(e){return{name:"options",data:e}}));var u=Object.keys(e.datasources||{}).map(function(t){return e.datasources[t]});if(u.length>0){var p=l._buildDatasourceContext(e,t,o.configVars),f=u.map(function(e){return o._fetchDatasource(e,p).then(function(e){return e})});i=i.concat(f)}r=Promise.all(i).then(function(t){var r,n,i,a=t.map(function(e){if("startFile"===e.name)r=e.data;else if("messages"===e.name)n=e.data;else{if("options"!==e.name)return e;i=e.data}}).filter(function(e){return e}).reduce(function(e,t){return e[t.name]=t.data,e},{}),c=s.merge({},e,{datasources:a}),u={messageBundle:n,optionsBundle:i};return o.preprocess(e,r,c,u)}).then(function(r){return o.process(e,t,r)})["catch"](function(t){throw new n(t,"The widget ["+e.name+"] could not be rendered:\n	"+t.message)})}return r.then(function(){return o.postprocess(e,t)})},l.prototype.preprocess=function(e,t,r,n){var o=e.content.type;if(t&&this.preprocessorMap.hasOwnProperty(o)){var i=this.preprocessorMap[o];return this.log.debug("Applying preprocessor for [%s] for [%s (%s)] ",i.name,e.content.src,o),i.process(e,t,r,n)}return t},l.prototype._fetchStartFile=function(e){var t=this.log;return t.debug("Starting HTML5 seamless rendering..."),t.debug("Requesting start file [%s] ...",e.content.src),i(e.content.src).then(function(e){if(t.debug("Start file request resolved/ Status: %s",e.status),u.isResponseOk(e))return e.text();var r=u.createError(e);throw r.code=e.status,r}).then(function(e){return t.trace("Received HTML\n: %s",e),e})["catch"](function(t){var r=new n(t,"Failed to fetch: "+e.content.src);throw 404===t.code&&(r.code="STARTFILE_NOT_FOUND"),r})},l.prototype.process=function(e,t,n){var i,a=this.startFileProcessor=new o({document:document,configVars:this.configVars,log:this.log,startFileSrc:e.content.src});if(n){var s=this._domParser.parseFromString(n,"text/html");s=a.aggregateStylesheets(e,s),s=a.normalizeMediaUrls(e,s);var c=a.collateInvokableScripts(e,s);i=a.createWidgetRootNode(e,s),i=a.setDimensions(e,i),a.prepareScripts(e,i,c),this.widgetContainerEl.appendChild(i)}else for(var u=0;u<this.widgetContainerEl.children.length;u++)if(this.widgetContainerEl.children[u].hasAttribute("data-widget")){i=this.widgetContainerEl.children[u];break}Object.defineProperty(t,"body",{enumerable:!0,writable:!!this.configVars.compat,value:i}),r.cxp&&(r.cxp._widgets=r.cxp._widgets||{},r.cxp._widgets[e.id]=t),this.widgetEl=i},l.prototype.postprocess=function(e,t){return this.startFileProcessor.invokeScripts(e,t,this.widgetEl)},l.prototype.getWidgetNode=function(){return this.widgetEl||null},l.prototype.getParentNode=function(){return this.widgetContainerEl||null},l.prototype.setParentNode=function(e){this.widgetContainerEl=e},l.prototype.getWidth=function(){return this.getWidgetNode()?this.getWidgetNode().offsetWidth:"auto"},l.prototype.getHeight=function(){return this.getWidgetNode()?this.getWidgetNode().offsetHeight:"auto"},l.prototype.isRendered=function(){return!!this.widgetContainerEl.innerHTML.trim()},l.prototype.destroy=function(){for(var e=this.widgetEl.getAttribute("data-widget"),t=this.widgetEl.parentElement,n=null;t;){var o=t.getAttribute("data-chrome");if(o===e){n=t;break}t=t.parentElement}this.startFileProcessor.removeInlineScripts(this.widgetEl.id,this.widgetEl),n&&n.parentElement?n.parentElement.removeChild(n):this.widgetEl.parentElement&&this.widgetEl.parentElement.removeChild(this.widgetEl),r.cxp&&r.cxp._widgets&&this.widgetEl.id&&delete r.cxp._widgets[this.widgetEl.id],this.widgetEl=null},l.prototype.getAreaNodes=function(){var e=this;if(!this.areaMap){var t="data-area",r="["+t+"]",n=this.widgetEl.querySelectorAll(r);this.areaMap=Array.prototype.slice.call(n).filter(function(t){return s.ensureElementBelongsToItem(e.widgetEl.getAttribute("data-widget"),t)}).reduce(function(e,r){var n=r.getAttribute(t);return e[n]=r,e},{})}return this.areaMap},l.prototype.addPreprocessor=function(e,t){
if(this.preprocessorMap.hasOwnProperty(e)){var r=this.preprocessorMap[e].name;this.log.warn("Overriding a previously added preprocessor [%s] for the mime type [%s]",r,e)}t.name=t.name||"Anonymous preprocessor",this.log.debug("Adding the preprocessor [%s] for start files with the mime type [%s]",t.name,e),this.preprocessorMap[e]=t},l.prototype._fetchStaticJSON=function(e){var t=this;return i(e).then(function(e){var r=e.json();return t.log.trace("Fetched JSON file:\n%s",r),r})},l.prototype._fetchDatasource=function(e,t){var r=this,n=e.name,o=r._datasourceResolverFactory.getResolver(e);return o.loadData(t).then(function(e){return r.log.trace("Fetched datasource [%s]:\n%s",n,e),{name:n,data:e}})["catch"](function(e){return r.log.error("Datasource [%s] fetch failed.",n,e),{name:n,error:e}})},l._buildDatasourceContext=function(e,t,r){var n={itemRoot:t.baseURI};return s.merge({},r,n,e)},t.exports=l}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../core/widget-renderer":201,"../../fetch/filtering-fetch":213,"../../util/logger-factory":247,"../../util/response-helpers":248,"../../util/util":249,"../../util/verror":250,"./seamless/start-file-processor":241}],239:[function(require,module,exports){"use strict";var Handlebars=require("handlebars/dist/handlebars.min"),HandlebarsHelpers=require("handlebars-helpers"),VError=require("../../../util/verror"),loggerFactory=require("../../../util/logger-factory"),i18n=require("../../../util/i18n"),HandlebarsIntl=require("../../../util/handlebars-intl-decorator"),HandlebarsPreprocessor=function(e){this.name="Handlebars Preprocessor",this.log=loggerFactory.getLogger(),this.dataObj={cxpConfig:e||{}},this.templateCache={},this.hbs=Handlebars.create();var t=HandlebarsPreprocessor.cxpHelpers;for(var r in t)t.hasOwnProperty(r)&&this.hbs.registerHelper(r,t[r]);i18n.intlSupported?HandlebarsIntl.registerWith(this.hbs):this.log.warn("The ECMAScript Internationalization API is not supported on this platform. Some i18n related features will fail.")};HandlebarsPreprocessor.prototype.process=function(widgetModel,startFileContent,context,additionalOptions){var log=this.log,errMessage,templateKey=widgetModel.content.src,template=this.templateCache[templateKey];if(!template){if(widgetModel.content.type&&"application/x-handlebars-template"===widgetModel.content.type){var precompiledTemplate=null;try{eval("precompiledTemplate = "+startFileContent),template=this.hbs.template(precompiledTemplate)}catch(err){throw errMessage='There was a problem evaluating a pre-compiled handlebars template. Ensure it was compiled using the simple option.E.g. "handlebars index.handlebars -s -f index.js"',this.log.error(err,errMessage),new VError(err,errMessage)}}else{log.debug("Compiling handlebars template instance for %s",templateKey);try{template=this.hbs.compile(startFileContent)}catch(err){throw errMessage="There was a problem compiling a handlebars template",this.log.error(err,errMessage),new VError(err,errMessage)}}this.templateCache[templateKey]=template}if(additionalOptions&&additionalOptions.messageBundle){var messages=additionalOptions.messageBundle.messages||{},formats=additionalOptions.messageBundle.formats||{},availableLocales=Object.keys(messages),bestFitLocale=i18n.chooseBestLocale(availableLocales,widgetModel.locale);this.dataObj.intl=messages[bestFitLocale]||messages[i18n.defaultLocale]||{},this.dataObj.intl.locales&&this.log.warn('"locales" is a reserved key. It will be overridden'),this.dataObj.intl.locales=widgetModel.locale===i18n.defaultLocale?widgetModel.locale:[widgetModel.locale,i18n.defaultLocale],this.dataObj.intl.formats&&this.log.warn('"formats" is a reserved key. It will be overridden'),this.dataObj.intl.formats=formats}additionalOptions&&additionalOptions.optionsBundle&&(this.dataObj.options=additionalOptions.optionsBundle.options||{});var result;try{result=template(context,{data:this.dataObj}),log.trace("Using compiled Handlebars start file for %s:\n%s",templateKey,result)}catch(err){throw log.error(err,"A handlebars template [%s] could not be processed:\n	%s",templateKey,err.message),err}return result},HandlebarsPreprocessor.prototype.registerHelper=function(e,t){this.hbs.registerHelper(e,t)},HandlebarsPreprocessor.prototype.registerPartial=function(e,t){this.hbs.registerPartial(e,t)},HandlebarsPreprocessor.cxpHelpers=HandlebarsHelpers,module.exports=HandlebarsPreprocessor},{"../../../util/handlebars-intl-decorator":245,"../../../util/i18n":246,"../../../util/logger-factory":247,"../../../util/verror":250,"handlebars-helpers":3,"handlebars/dist/handlebars.min":27}],240:[function(e,t,r){"use strict";function n(){this._initilized=!1,this._allLoadingPromises={}}var o,i=e("promise-extensions")(Promise);t.exports=function(){return o||(o=new n),o},n.prototype._init=function(){this._initilized||(this.head=document.getElementsByTagName("head")[0]||document.documentElement,this.asyncSupported="undefined"!=typeof document.createElement("script").async,this._prepopulateLoadedCache(),this._initilized=!0)},n.prototype._prepopulateLoadedCache=function(){var e=this,t=Array.prototype.slice.call(document.getElementsByTagName("link"));t.forEach(function(t){var r=t.getAttribute("href"),n="stylesheet"===t.rel&&r;n&&e._addToCache(r,r)});var r=Array.prototype.slice.call(document.getElementsByTagName("script"));r.forEach(function(t){var r=t.getAttribute("src"),n=!t.innerHTML&&r;!n||t.async||e._getFromCache(r)||e._addToCache(r,Promise.resolve(r))})},n.prototype._normalizeKey=function(e){var t=decodeURI(e);return t.replace(/(?:features|widgets|containers|pages|templates)\/\[BBHOST\]/gi,"items")},n.prototype._addToCache=function(e,t){if(e){var r=this._normalizeKey(e);this._allLoadingPromises[r]=t}},n.prototype._getFromCache=function(e){if(e){var t=this._normalizeKey(e);return this._allLoadingPromises[t]}},n.prototype.loadScripts=function(e){return e instanceof Array||(e=[e]),this._init(),this.asyncSupported?this._loadScriptsAsync(e):this._loadScriptsSync(e)},n.prototype._loadScriptsAsync=function(e){var t=this,r=e.map(function(e){var r=e.src,n=t._getFromCache(r);if(!n){var o={async:!1},i=e.attributes||{},a={src:r};i.nonce&&(a.nonce=i.nonce);var s=t._createScriptElement(a,o);n=t._createScriptPromise(s),t._addToCache(r,n),t.head.insertBefore(s,t.head.firstChild)}return n});return i.settleAll(r)},n.prototype._loadScriptsSync=function(e){function t(e){return e.element&&r.head.insertBefore(e.element,r.head.firstChild),e.promise}var r=this,n=e.map(function(e){var t,n=e.src,o=r._getFromCache(n);if(!o){var i=e.attributes||{},a={src:n};i.nonce&&(a.nonce=i.nonce),t=r._createScriptElement(a),o=r._createScriptPromise(t),r._addToCache(n,o)}return{element:t,promise:o}}),o=n.map(function(e){return e.promise}),a=Promise.resolve(t(n[0]||{})),s=n.slice(1).reduce(function(e,r){var n=t.bind(null,r);return e.then(n,n)},a);return s["catch"](function(){}),i.settleAll(o)},n.prototype._createScriptElement=function(e,t){var r=Object.keys(e||{}).reduce(function(t,r){return t.setAttribute(r,e[r]),t},document.createElement("script"));return t&&Object.assign(r,t),r},n.prototype._createScriptPromise=function(e){var t=e.src;return new Promise(function(r,n){e.onload=function(){r(t)},e.onerror=function(){n(t)}})},n.prototype.loadCss=function(e){e instanceof Array||(e=[e]),this._init();var t=this,r=t.head,n=[];return e.forEach(function(e){var o=t._getFromCache(e);if(o)n.push(o);else{var i=document.createElement("link");i.setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.setAttribute("href",e);var a=Promise.resolve(e);t._addToCache(e,a),n.push(a);var s=Array.prototype.slice.call(r.getElementsByTagName("link")).filter(function(e){return"stylesheet"===e.rel});if(s.length){var c=s.pop();c.parentNode.insertBefore(i,c.nextSibling)}else r.insertBefore(i,r.firstChild)}}),Promise.all(n)}},{"promise-extensions":193}],241:[function(e,t,r){(function(r){"use strict";function n(e){e=e||{},this.log=e.log||null,this.documentContext=e.document,this.configVars=e.configVars||{},this.startFileSrc=e.startFileSrc||"",this._scriptKeySuffix=""}var o,i=e("../../../util/util"),a=e("url"),s=e("./resource-loader")(),c=e("../../../util/verror");r.location&&(o=r.location.pathname),n.prototype.aggregateStylesheets=function(e,t){function r(t){var r=t.getAttribute("href"),n=o._normalizeResourceUrl(r,e);i.push(n)}function n(){s.loadCss(i),i=[]}var o=this,i=[],a=t.querySelectorAll(" head > style, head > link[rel=stylesheet]");return Array.prototype.slice.call(a).forEach(function(e){"style"===e.tagName.toLowerCase()?(n(),o.documentContext.head.appendChild(e)):e.getAttribute("href")&&r(e)}),n(),t},n.prototype.collateInvokableScripts=function(e,t){var r=this,n=t.getElementsByTagName("script"),o=Array.prototype.slice.call(n).reduce(function(t,n){if(!n.type||"text/javascript"===n.type){var o=n.innerHTML,i=n.getAttribute("src");o?t.push({content:o}):i&&t.push({src:r._normalizeResourceUrl(i,e)}),n.parentNode.removeChild(n)}return t},[]),i=t.getElementsByTagName("body")[0],a=i.getAttribute("onload");return a&&o.push({content:a}),o},n.prototype.normalizeMediaUrls=function(e,t){var r=this,n=t.getElementsByTagName("img");return Array.prototype.slice.call(n).forEach(function(t){var n=t.getAttribute("src");if(n){var o=r._normalizeResourceUrl(n,e);t.getAttribute("src")!==o&&(t.src=o)}}),t},n.prototype.createWidgetRootNode=function(e,t){var r=this.documentContext.createElement("div");r.id=e.id,r.setAttribute("data-widget",e.name);for(var n=t.getElementsByTagName("body")[0],o=0;o<n.attributes.length;o++){var i=n.attributes[o];i.specified&&"onload"!==i.name&&"id"!==i.name&&r.setAttribute(i.name,i.value)}return r.innerHTML=n.innerHTML,r},n.prototype.setDimensions=function(e,t){function r(r){e[r]&&!isNaN(parseInt(e[r]))&&(t.style[r]=parseInt(e[r])+"px",n.log.debug("Widget %s set to %s.",r,t.style[r]))}var n=this;return r("width"),r("height"),t},n.prototype.prepareScripts=function(e,t,n){var o=this;this._scriptKeySuffix="_"+this.startFileSrc;var i=this._getScriptKey(e.id);return r.cxp=r.cxp||{},r.cxp.scripts=r.cxp.scripts||{},r.cxp.scripts[i]=[],n.forEach(function(e){var r=o.configVars.cspNonce,n=o.documentContext.createElement("script");if(r&&n.setAttribute("nonce",r),e.content){var a="cxp.scripts['"+i+"'].push(function(widget, __GADGET__,  __WIDGET__) { ",s=" });";n.innerHTML=a+e.content+s,n.setAttribute("data-cxp-script",i),o.documentContext.body.appendChild(n)}else n.setAttribute("data-src",e.src),t.appendChild(n)}),t},n.prototype.removeInlineScripts=function(e){var t=this._getScriptKey(e);r.cxp.scripts=r.cxp.scripts||{},delete r.cxp.scripts.scriptKey;var n=this.documentContext.querySelectorAll("script[data-cxp-script='"+t+"']");Array.prototype.slice.call(n).forEach(function(e){e.parentElement.removeChild(e)})},n.prototype.invokeScripts=function(e,t,n){var o=this,a=this.log,u=e.name,l="data-src",p="script[data-src]",f=n.querySelectorAll(p),h=Array.prototype.slice.call(f).filter(function(e){return i.ensureElementBelongsToItem(u,e)}).map(function(t){var r=[].slice.call(t.attributes).filter(function(e){return e.name!==l}).reduce(function(e,t){return e[t.name]=t.value,e},{}),n=t.getAttribute(l);return{src:o._normalizeResourceUrl(n,e),attributes:r}});return s.loadScripts(h).then(function(n){a.debug("JS resources have loaded.");var i=[];if(n){var s=n.filter(function(e){var t=e.isRejected();return t&&i.push(e.reason)}).length;s>0&&a.warn("%s scripts failed to load:\n%s",s,i.join(", "))}var c=o._getScriptKey(e.id);if(r.cxp&&r.cxp.scripts&&Array.isArray(r.cxp.scripts[c]))try{r.cxp.scripts[c].forEach(function(e){"function"==typeof e&&e.call(null,t,t,t)})}catch(u){a.warn('Failed to invoke inline scripts for widget "%s".\n%s',e.name,u)}})["catch"](function(e){throw new c(e,"Failed to render HTML5 seamless widget")})},n.prototype._normalizeResourceUrl=function(e,t){if(e=i.replacePathVars(e,this.configVars,this.log),i.isUrlDocumentRelative(e)){var r=t.content.src,n=r.substring(0,r.lastIndexOf("/")+1);if(i.isUrlDocumentRelative(r)){var s=o.substring(0,o.lastIndexOf("/")+1);n=a.resolve(s,n)}e=a.resolve(n,e)}return e},n.prototype._getScriptKey=function(e){return e+this._scriptKeySuffix},t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../util/util":249,"../../../util/verror":250,"./resource-loader":240,url:424}],242:[function(e,t,r){"use strict";function n(){o.call(this,window.localStorage)}var o=e("./web-storage-decorator");n.prototype=Object.create(o.prototype),t.exports=n},{"./web-storage-decorator":244}],243:[function(e,t,r){"use strict";function n(e){this.type=e}var o=e("../../util/util");n.prototype.initStorageEvent=function(e,t,r,n,o,i,a,s){this.type=e,this.canBubble=t,this.cancellable=r,this.key=n,this.oldValue=o,this.newValue=i,this.url=a,this.storageArea=s},n.prototype.toString=function(){return o.format("[object StorageEvent] (key=%s, oldValue=%s, newValue=%s, url=%s)",this.key,this.oldValue,this.newValue,this.url)},t.exports=n},{"../../util/util":249}],244:[function(e,t,r){(function(r){"use strict";function n(e){this.eventTarget=[],this.log=o.getLogger(),this._items=[],this._storage=e,this._prefix="",this._eventsEnabled=!1;var t=this;Object.defineProperty(this,"length",{enumerable:!1,configurable:!1,get:function(){return Object.keys(t._items).length}})}var o=e("../../util/logger-factory"),i=e("browser-bunyan"),a=e("../../core/widget-storage"),s=e("../../util/verror"),c=e("./storage-event"),u=e("../../util/util");n.prototype=Object.create(a.prototype),n.prototype.init=function(e,t){var r=this,n=this.log;this._prefix=e||"",n.debug("Initializing preference storage for widget [%s]",e),n.debug("Using internal storage [%s]",this._storage.toString()),n.level()<=i.TRACE&&n.trace("Initializing storage with the following preferences:\n %s",JSON.stringify(t)),t&&(this._items=Object.keys(t).map(function(e){return r.defineItem(t[e])})),this._eventsEnabled=!0},n.prototype.getItem=function(e){var t=this._storage.getItem(this._prefix+e);if("undefined"==typeof t||null===t){var r=this._getItemDefinition(e)||null;t=r?r.value:null}return"undefined"==typeof t&&(t=null),this.log.trace("Getting preference [%s=%s]",e,t),t},n.prototype.defineItem=function(e){var t=this,r=e.name;this._items.push(e);var n={enumerable:!0,configurable:!0,get:function(){return t.getItem(r)},set:function(e){return t.setItem(t._prefix+r,e)}};return Object.defineProperty(this,r,n),e},n.prototype.setItem=function(e,t,r){return this._ensureItemWritable(e),this.log.debug("Setting preference to storage [%s=%s]",e,t),null===t?this.removeItem(e):(this._notify(e,this.getItem(e),t),this._storage.setItem(this._prefix+e,t,r))},n.prototype.removeItem=function(e){return this._notify(e,this.getItem(e),null),this.log.debug("Removing preference from storage [%s]",e),this._storage.removeItem(this._prefix+e)},n.prototype.clear=function(){var e=this;this._notify(null,null,null),this.log.debug("Clearing preferences"),this._eventsEnabled=!1,Object.keys(this._storage).filter(function(t){return 0===t.indexOf(e._prefix)}).forEach(function(t){e.removeItem(t.substr(e.prefix.length))}),this._eventsEnabled=!0},n.prototype.key=function(e){return this._items[e]?this._items[e].name:null},n.prototype.keys=function(){var e=this,t=Object.keys(this._storage).filter(function(t){return 0===t.indexOf(e._prefix)});return 0===t.length?[]:t.map(function(t){return t.slice(e._prefix.length)})},n.prototype._getItemDefinition=function(e){var t=this._items.filter(function(t){return e===t.name})[0];return t||null},n.prototype._notify=function(e,t,n){if(this._eventsEnabled){var o=this,a=Array.isArray(this.eventTarget)?this.eventTarget:[this.eventTarget];a.filter(function(e){return void 0!==e&&null!==e}).forEach(function(a){if("function"!=typeof a.dispatchEvent){var s="Cannot dispatch StorageEvent for preferences. An event target was provided, but it does not implement the EventTarget interface. [%s, %s, %s]";return void o.log.warn(s,e,t,n)}var u=new c("storage");u.initStorageEvent("storage",!1,!1,e,t,n,o._prefix,o),r.nextTick(function(){o.log.level()<=i.DEBUG&&o.log.debug("Sending StorageEvent [%s] ",u),a.dispatchEvent(u)})})}},n.prototype._ensureItemWritable=function(e){var t=this._getItemDefinition(e);if(t&&t.readonly){var r=u.format("Attempted to modify readonly preference [%s]",e);throw this.log.warn(r),new s(r)}},t.exports=n}).call(this,e("_process"))},{"../../core/widget-storage":202,"../../util/logger-factory":247,"../../util/util":249,"../../util/verror":250,"./storage-event":243,_process:419,"browser-bunyan":2}],245:[function(e,t,r){"use strict";function n(e){var t=o.create(),r={};if(t.registerHelper=function(e,t){"string"==typeof e?r[e]=t:Object.keys(e).forEach(function(t){r[t]=e[t]})},i.registerWith(t),r.formatNumber){var n=r.formatNumber;r.formatNumber=function(e){var t=[].slice.call(arguments);return t[0]=Number(e),n.apply(this,t)}}e.registerHelper(r)}var o=e("handlebars/dist/handlebars.min"),i=e("handlebars-intl");t.exports={registerWith:n}},{"handlebars-intl":4,"handlebars/dist/handlebars.min":27}],246:[function(e,t,r){(function(e){"use strict";var r=["ar","iw","he","dv","ha","fa","ps","ur","yi","ji"];t.exports={defaultLocale:"en",intlSupported:"undefined"!=typeof e.Intl,getDirection:function(e){return e.length>=2&&r.indexOf(e.substr(0,2))>=0?"rtl":"ltr"},chooseBestLocale:function(e,t){for(var r=t;r;){if(Array.prototype.indexOf.call(e,r)>-1)return r;var n=r.lastIndexOf("-");if(0>n)return;n>=2&&"-"===r.charAt(n-2)&&(n-=2),r=r.substring(0,n)}}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],247:[function(e,t,r){"use strict";var n=e("browser-bunyan"),o=e("../util/util"),i={},a=null,s={defaultLoggerName:"logger",defaultLogLevel:"info"};s.createLogger=function(e){e=e||{};var t=e.parentLog||null,r=e.loggerName||this.defaultLoggerName,s=e.logLevel||this.defaultLogLevel,c=e.appendId||!1;c&&(r+="/"+o.randomId());var u;return u=t?t.child({childName:r}):n.createLogger({name:r,streams:[{level:s,stream:new n.ConsoleFormattedStream,type:"raw"}],src:n.resolveLevel(s)<=n.DEBUG}),i[r]=u,a=u,u},s.getLogger=function(e){return e&&i[e]?i[e]:a?a:s.createLogger()},t.exports=s},{"../util/util":249,"browser-bunyan":2}],248:[function(e,t,r){"use strict";function n(e){if("boolean"==typeof e.ok)return e.ok;var t=e.status;return t>=200&&299>=t}function o(e){var t=e.statusText||"Response status "+(e.status||"unknown");return new Error(t)}t.exports={isResponseOk:n,createError:o}},{}],249:[function(e,t,r){(function(r){"use strict";var n=e("browser-bunyan"),o={cloneDeep:e("lodash/cloneDeep"),merge:e("lodash/merge"),omit:e("lodash/omit"),assign:e("lodash/assign")},i={};i.parseBoolean=function(e){return("boolean"==typeof e||e instanceof Boolean)&&1==e||("string"==typeof e||e instanceof String)&&/^\s*true\s*$/i.test(e)||("number"==typeof e||e instanceof Number)&&0!=e},i.isUrlAbsolute=function(e){var t=/^https?:\/\/|file?:\/\//i;return t.test(e)},i.isUrlSiteRelative=function(e){return 0===e.indexOf("/")},i.isUrlDocumentRelative=function(e){return!(i.isUrlAbsolute(e)||i.isUrlSiteRelative(e))},i.isRunningOnFilesystem=function(){return"undefined"!=typeof r.location&&"file:"===r.location.protocol},i.isUrlForFile=function(e){var t=/^file:/.test(e),r=i.isRunningOnFilesystem()&&i.isUrlDocumentRelative(e);return t||r},i.merge=o.merge,i.assign=o.assign,i.omit=o.omit,i.startsWith=function(e,t,r){return r=r||0,e.substr(r,t.length)===t},i.endsWith=function(e,t,r){if(String.prototype.endsWith)return e.endsWith(t,r);var n=e.toString();("number"!=typeof r||!isFinite(r)||Math.floor(r)!==r||r>n.length)&&(r=n.length),r-=t.length;var o=n.indexOf(t,r);return-1!==o&&o===r},i.cloneDeep=function(){try{return o.cloneDeep.apply(o,Array.prototype.slice.call(arguments))}catch(e){throw console.warn(e),e}},i.isArray=o.isArray,i.format=function(e){if(null===e)return"null";if("string"!=typeof e)return e.toString();for(var t=/%[sdj%]/g,r=1,n=arguments,o=n.length,i=String(e).replace(t,function(e){if("%%"===e)return"%";if(r>=o)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(t){return"[Circular]"}default:return e}}),a=n[r];o>r;a=n[++r])i+=" "+a;return i},i.getDescendantLocales=function(e){e=e.toLowerCase();for(var t,r=[],n=e.split("-");t=n.shift();){var o=r[r.length-1];r.push((o?o+"-":"")+t)}return r},i.randomId=function(){return Math.random().toString(36).substring(7)},i.replacePathVars=function(e,t,r){for(var o in t)if(t.hasOwnProperty(o)){var i=new RegExp("\\$\\("+o+"\\)","g");r&&r.level()<=n.DEBUG&&i.test(e)&&r.debug("Updating resource url. Replacing %s for %s in [%s]",i,t[o],e),e=e.replace(i,t[o])}return e},i.getContentBodyAndTypeFromResponse=function(e){return e.text().then(function(t){t=t.trim();var r=e.headers.get("content-type"),n=null,o=null;if(r&&-1!==r.indexOf("/json")?n="json":r&&-1!==r.indexOf("text/html")?n="html":"string"==typeof r&&r.length>0?o=new Error("Content type not supported for rendering: "+r):t&&i.startsWith(t,"{")?n="json":t&&i.startsWith(t,"<")?n="html":o=new Error("Undefined content type for response."),o)throw o;return{type:n,body:"json"===n?JSON.parse(t):t}})},i.ensureElementBelongsToItem=function(e,t){if(!e||!t)return!1;for(var r,n=t;n;){if(r="function"==typeof n.getAttribute?n.getAttribute("data-widget"):null)return r===e;n=n.parentNode}return!1},i.cloneWidgetInstance=function(e){var t=this.cloneDeep(e),r=Object.getOwnPropertyNames(e).reduce(function(t,r){var n=Object.getOwnPropertyDescriptor(e,r);return n.enumerable||(t[r]=n),t},{});return Object.defineProperties(t,r),t},t.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"browser-bunyan":2,"lodash/assign":163,"lodash/cloneDeep":164,"lodash/merge":187,"lodash/omit":188}],250:[function(e,t,r){function n(e){var t,r,o,i,a;return this instanceof n?(e instanceof Error||"object"==typeof e?t=Array.prototype.slice.call(arguments,1):(t=Array.prototype.slice.call(arguments,0),e=void 0),e&&e.strict||(t=t.map(function(e){return null===e?"null":void 0===e?"undefined":e})),a=t.length>0?t.join("; "):"",this.jse_shortmsg=a,this.jse_summary=a,e&&(o=e.cause,o&&e.cause instanceof Error||(o=e),o&&o instanceof Error&&(this.jse_cause=o,this.jse_summary+=": "+o.message)),this.message=this.jse_summary,Error.call(this,this.jse_summary),Error.captureStackTrace&&(i=e?e.constructorOpt:void 0,i=i||arguments.callee,Error.captureStackTrace(this,i)),this):(t=Array.prototype.slice.call(arguments,0),r=Object.create(n.prototype),n.apply(r,arguments),r)}n.prototype=Error.prototype,n.prototype.name="Widget Error",n.prototype.toString=function(){var e=this.hasOwnProperty("name")&&this.name||this.constructor.name||this.constructor.prototype.name;return this.message&&(e+=": "+this.message),e},n.prototype.cause=function(){return this.jse_cause},n.prototype.hasCode=function(e){if(!e)return!1;var t="[object Array]"!==Object.prototype.toString.call(e)?[e]:e;if(0===t.length)return!1;for(var r=this,n=!1;r;){if(r.code&&t.indexOf(r.code)>-1){n=!0;break}r=r.cause()}return n},t.exports=n},{}],251:[function(e,t,r){arguments[4][2][0].apply(r,arguments)},{dup:2}],252:[function(e,t,r){arguments[4][3][0].apply(r,arguments)},{dup:3,"handlebars/dist/handlebars.min":253}],253:[function(e,t,r){arguments[4][27][0].apply(r,arguments)},{dup:27}],254:[function(e,t,r){arguments[4][27][0].apply(r,arguments)},{dup:27}],255:[function(e,t,r){arguments[4][43][0].apply(r,arguments)},{"./_getNative":313,"./_root":350,dup:43}],256:[function(e,t,r){arguments[4][44][0].apply(r,arguments)},{"./_hashClear":320,"./_hashDelete":321,"./_hashGet":322,"./_hashHas":323,"./_hashSet":324,dup:44}],257:[function(e,t,r){arguments[4][45][0].apply(r,arguments)},{"./_listCacheClear":333,"./_listCacheDelete":334,"./_listCacheGet":335,"./_listCacheHas":336,"./_listCacheSet":337,dup:45}],258:[function(e,t,r){arguments[4][46][0].apply(r,arguments)},{"./_getNative":313,"./_root":350,dup:46}],259:[function(e,t,r){arguments[4][47][0].apply(r,arguments)},{"./_mapCacheClear":338,"./_mapCacheDelete":339,"./_mapCacheGet":340,"./_mapCacheHas":341,"./_mapCacheSet":342,dup:47}],260:[function(e,t,r){arguments[4][48][0].apply(r,arguments)},{"./_getNative":313,"./_root":350,dup:48}],261:[function(e,t,r){arguments[4][49][0].apply(r,arguments)},{"./_getNative":313,"./_root":350,dup:49}],262:[function(e,t,r){arguments[4][50][0].apply(r,arguments)},{"./_ListCache":257,"./_stackClear":354,"./_stackDelete":355,"./_stackGet":356,"./_stackHas":357,"./_stackSet":358,dup:50}],263:[function(e,t,r){arguments[4][51][0].apply(r,arguments)},{"./_root":350,dup:51}],264:[function(e,t,r){arguments[4][52][0].apply(r,arguments)},{"./_root":350,dup:52}],265:[function(e,t,r){arguments[4][53][0].apply(r,arguments)},{"./_getNative":313,"./_root":350,dup:53}],266:[function(e,t,r){arguments[4][54][0].apply(r,arguments)},{dup:54}],267:[function(e,t,r){arguments[4][55][0].apply(r,arguments)},{dup:55}],268:[function(e,t,r){arguments[4][56][0].apply(r,arguments)},{dup:56}],269:[function(e,t,r){arguments[4][57][0].apply(r,arguments)},{"./_baseTimes":293,"./_isIndex":328,"./isArguments":364,"./isArray":365,"./isBuffer":368,"./isTypedArray":376,dup:57}],270:[function(e,t,r){arguments[4][59][0].apply(r,arguments)},{dup:59}],271:[function(e,t,r){arguments[4][60][0].apply(r,arguments)},{"./_baseAssignValue":276,"./eq":362,dup:60}],272:[function(e,t,r){arguments[4][61][0].apply(r,arguments)},{"./_baseAssignValue":276,"./eq":362,dup:61}],273:[function(e,t,r){arguments[4][62][0].apply(r,arguments)},{"./eq":362,dup:62}],274:[function(e,t,r){arguments[4][63][0].apply(r,arguments)},{"./_copyObject":302,"./keys":377,dup:63}],275:[function(e,t,r){arguments[4][64][0].apply(r,arguments)},{"./_copyObject":302,"./keysIn":378,dup:64}],276:[function(e,t,r){arguments[4][65][0].apply(r,arguments)},{"./_defineProperty":308,dup:65}],277:[function(e,t,r){arguments[4][66][0].apply(r,arguments)},{"./_Stack":262,"./_arrayEach":267,"./_assignValue":272,"./_baseAssign":274,"./_baseAssignIn":275,"./_cloneBuffer":296,"./_copyArray":301,"./_copySymbols":303,"./_copySymbolsIn":304,"./_getAllKeys":310,"./_getAllKeysIn":311,"./_getTag":318,"./_initCloneArray":325,"./_initCloneByTag":326,"./_initCloneObject":327,"./isArray":365,"./isBuffer":368,"./isMap":371,"./isObject":372,"./isSet":375,"./keys":377,dup:66}],278:[function(e,t,r){arguments[4][67][0].apply(r,arguments)},{"./isObject":372,dup:67}],279:[function(e,t,r){arguments[4][69][0].apply(r,arguments)},{"./_createBaseFor":307,dup:69}],280:[function(e,t,r){arguments[4][71][0].apply(r,arguments)},{"./_arrayPush":270,"./isArray":365,dup:71}],281:[function(e,t,r){arguments[4][72][0].apply(r,arguments)},{"./_Symbol":263,"./_getRawTag":315,"./_objectToString":347,dup:72}],282:[function(e,t,r){arguments[4][73][0].apply(r,arguments)},{"./_baseGetTag":281,"./isObjectLike":373,dup:73}],283:[function(e,t,r){arguments[4][74][0].apply(r,arguments)},{"./_getTag":318,"./isObjectLike":373,dup:74}],284:[function(e,t,r){arguments[4][75][0].apply(r,arguments)},{"./_isMasked":331,"./_toSource":359,"./isFunction":369,"./isObject":372,dup:75}],285:[function(e,t,r){arguments[4][76][0].apply(r,arguments)},{"./_getTag":318,"./isObjectLike":373,dup:76}],286:[function(e,t,r){arguments[4][77][0].apply(r,arguments)},{"./_baseGetTag":281,"./isLength":370,"./isObjectLike":373,dup:77}],287:[function(e,t,r){arguments[4][78][0].apply(r,arguments)},{"./_isPrototype":332,"./_nativeKeys":344,dup:78}],288:[function(e,t,r){arguments[4][79][0].apply(r,arguments)},{"./_isPrototype":332,"./_nativeKeysIn":345,"./isObject":372,dup:79}],289:[function(e,t,r){arguments[4][80][0].apply(r,arguments)},{"./_Stack":262,"./_assignMergeValue":271,"./_baseFor":279,"./_baseMergeDeep":290,"./_safeGet":351,"./isObject":372,"./keysIn":378,dup:80}],290:[function(e,t,r){arguments[4][81][0].apply(r,arguments)},{"./_assignMergeValue":271,"./_cloneBuffer":296,"./_cloneTypedArray":300,"./_copyArray":301,"./_initCloneObject":327,"./_safeGet":351,"./isArguments":364,"./isArray":365,"./isArrayLikeObject":367,"./isBuffer":368,"./isFunction":369,"./isObject":372,"./isPlainObject":374,"./isTypedArray":376,"./toPlainObject":382,dup:81}],291:[function(e,t,r){arguments[4][82][0].apply(r,arguments)},{"./_overRest":349,"./_setToString":352,"./identity":363,dup:82}],292:[function(e,t,r){arguments[4][83][0].apply(r,arguments)},{"./_defineProperty":308,"./constant":361,"./identity":363,dup:83}],293:[function(e,t,r){arguments[4][85][0].apply(r,arguments)},{dup:85}],294:[function(e,t,r){arguments[4][87][0].apply(r,arguments)},{dup:87}],295:[function(e,t,r){arguments[4][90][0].apply(r,arguments)},{"./_Uint8Array":264,dup:90}],296:[function(e,t,r){arguments[4][91][0].apply(r,arguments)},{"./_root":350,dup:91}],297:[function(e,t,r){arguments[4][92][0].apply(r,arguments)},{"./_cloneArrayBuffer":295,dup:92}],298:[function(e,t,r){arguments[4][93][0].apply(r,arguments)},{dup:93}],299:[function(e,t,r){arguments[4][94][0].apply(r,arguments)},{"./_Symbol":263,dup:94}],300:[function(e,t,r){arguments[4][95][0].apply(r,arguments)},{"./_cloneArrayBuffer":295,dup:95}],301:[function(e,t,r){arguments[4][96][0].apply(r,arguments)},{dup:96}],302:[function(e,t,r){arguments[4][97][0].apply(r,arguments)},{"./_assignValue":272,"./_baseAssignValue":276,dup:97}],303:[function(e,t,r){arguments[4][98][0].apply(r,arguments)},{"./_copyObject":302,"./_getSymbols":316,dup:98}],304:[function(e,t,r){arguments[4][99][0].apply(r,arguments)},{"./_copyObject":302,"./_getSymbolsIn":317,dup:99}],305:[function(e,t,r){arguments[4][100][0].apply(r,arguments)},{"./_root":350,dup:100}],306:[function(e,t,r){arguments[4][101][0].apply(r,arguments)},{"./_baseRest":291,"./_isIterateeCall":329,dup:101}],307:[function(e,t,r){arguments[4][102][0].apply(r,arguments)},{dup:102}],308:[function(e,t,r){arguments[4][104][0].apply(r,arguments)},{"./_getNative":313,dup:104}],309:[function(e,t,r){arguments[4][106][0].apply(r,arguments)},{dup:106}],310:[function(e,t,r){arguments[4][107][0].apply(r,arguments)},{"./_baseGetAllKeys":280,"./_getSymbols":316,"./keys":377,dup:107}],311:[function(e,t,r){arguments[4][108][0].apply(r,arguments)},{"./_baseGetAllKeys":280,"./_getSymbolsIn":317,"./keysIn":378,dup:108}],312:[function(e,t,r){arguments[4][109][0].apply(r,arguments)},{"./_isKeyable":330,dup:109}],313:[function(e,t,r){arguments[4][110][0].apply(r,arguments)},{"./_baseIsNative":284,"./_getValue":319,dup:110}],314:[function(e,t,r){arguments[4][111][0].apply(r,arguments)},{"./_overArg":348,dup:111}],315:[function(e,t,r){arguments[4][112][0].apply(r,arguments)},{"./_Symbol":263,dup:112}],316:[function(e,t,r){arguments[4][113][0].apply(r,arguments)},{"./_arrayFilter":268,"./stubArray":380,dup:113}],317:[function(e,t,r){arguments[4][114][0].apply(r,arguments)},{"./_arrayPush":270,"./_getPrototype":314,"./_getSymbols":316,"./stubArray":380,dup:114}],318:[function(e,t,r){arguments[4][115][0].apply(r,arguments)},{"./_DataView":255,"./_Map":258,"./_Promise":260,"./_Set":261,"./_WeakMap":265,"./_baseGetTag":281,"./_toSource":359,dup:115}],319:[function(e,t,r){arguments[4][116][0].apply(r,arguments)},{dup:116}],320:[function(e,t,r){arguments[4][117][0].apply(r,arguments)},{"./_nativeCreate":343,dup:117}],321:[function(e,t,r){arguments[4][118][0].apply(r,arguments)},{dup:118}],322:[function(e,t,r){arguments[4][119][0].apply(r,arguments)},{"./_nativeCreate":343,dup:119}],323:[function(e,t,r){arguments[4][120][0].apply(r,arguments)},{"./_nativeCreate":343,dup:120}],324:[function(e,t,r){arguments[4][121][0].apply(r,arguments)},{"./_nativeCreate":343,dup:121}],325:[function(e,t,r){arguments[4][122][0].apply(r,arguments)},{dup:122}],326:[function(e,t,r){arguments[4][123][0].apply(r,arguments)},{"./_cloneArrayBuffer":295,"./_cloneDataView":297,"./_cloneRegExp":298,"./_cloneSymbol":299,"./_cloneTypedArray":300,dup:123
}],327:[function(e,t,r){arguments[4][124][0].apply(r,arguments)},{"./_baseCreate":278,"./_getPrototype":314,"./_isPrototype":332,dup:124}],328:[function(e,t,r){arguments[4][126][0].apply(r,arguments)},{dup:126}],329:[function(e,t,r){arguments[4][127][0].apply(r,arguments)},{"./_isIndex":328,"./eq":362,"./isArrayLike":366,"./isObject":372,dup:127}],330:[function(e,t,r){arguments[4][129][0].apply(r,arguments)},{dup:129}],331:[function(e,t,r){arguments[4][130][0].apply(r,arguments)},{"./_coreJsData":305,dup:130}],332:[function(e,t,r){arguments[4][131][0].apply(r,arguments)},{dup:131}],333:[function(e,t,r){arguments[4][132][0].apply(r,arguments)},{dup:132}],334:[function(e,t,r){arguments[4][133][0].apply(r,arguments)},{"./_assocIndexOf":273,dup:133}],335:[function(e,t,r){arguments[4][134][0].apply(r,arguments)},{"./_assocIndexOf":273,dup:134}],336:[function(e,t,r){arguments[4][135][0].apply(r,arguments)},{"./_assocIndexOf":273,dup:135}],337:[function(e,t,r){arguments[4][136][0].apply(r,arguments)},{"./_assocIndexOf":273,dup:136}],338:[function(e,t,r){arguments[4][137][0].apply(r,arguments)},{"./_Hash":256,"./_ListCache":257,"./_Map":258,dup:137}],339:[function(e,t,r){arguments[4][138][0].apply(r,arguments)},{"./_getMapData":312,dup:138}],340:[function(e,t,r){arguments[4][139][0].apply(r,arguments)},{"./_getMapData":312,dup:139}],341:[function(e,t,r){arguments[4][140][0].apply(r,arguments)},{"./_getMapData":312,dup:140}],342:[function(e,t,r){arguments[4][141][0].apply(r,arguments)},{"./_getMapData":312,dup:141}],343:[function(e,t,r){arguments[4][143][0].apply(r,arguments)},{"./_getNative":313,dup:143}],344:[function(e,t,r){arguments[4][144][0].apply(r,arguments)},{"./_overArg":348,dup:144}],345:[function(e,t,r){arguments[4][145][0].apply(r,arguments)},{dup:145}],346:[function(e,t,r){arguments[4][146][0].apply(r,arguments)},{"./_freeGlobal":309,dup:146}],347:[function(e,t,r){arguments[4][147][0].apply(r,arguments)},{dup:147}],348:[function(e,t,r){arguments[4][148][0].apply(r,arguments)},{dup:148}],349:[function(e,t,r){arguments[4][149][0].apply(r,arguments)},{"./_apply":266,dup:149}],350:[function(e,t,r){arguments[4][151][0].apply(r,arguments)},{"./_freeGlobal":309,dup:151}],351:[function(e,t,r){arguments[4][152][0].apply(r,arguments)},{dup:152}],352:[function(e,t,r){arguments[4][153][0].apply(r,arguments)},{"./_baseSetToString":292,"./_shortOut":353,dup:153}],353:[function(e,t,r){arguments[4][154][0].apply(r,arguments)},{dup:154}],354:[function(e,t,r){arguments[4][155][0].apply(r,arguments)},{"./_ListCache":257,dup:155}],355:[function(e,t,r){arguments[4][156][0].apply(r,arguments)},{dup:156}],356:[function(e,t,r){arguments[4][157][0].apply(r,arguments)},{dup:157}],357:[function(e,t,r){arguments[4][158][0].apply(r,arguments)},{dup:158}],358:[function(e,t,r){arguments[4][159][0].apply(r,arguments)},{"./_ListCache":257,"./_Map":258,"./_MapCache":259,dup:159}],359:[function(e,t,r){arguments[4][162][0].apply(r,arguments)},{dup:162}],360:[function(e,t,r){arguments[4][164][0].apply(r,arguments)},{"./_baseClone":277,dup:164}],361:[function(e,t,r){arguments[4][165][0].apply(r,arguments)},{dup:165}],362:[function(e,t,r){arguments[4][166][0].apply(r,arguments)},{dup:166}],363:[function(e,t,r){arguments[4][168][0].apply(r,arguments)},{dup:168}],364:[function(e,t,r){arguments[4][169][0].apply(r,arguments)},{"./_baseIsArguments":282,"./isObjectLike":373,dup:169}],365:[function(e,t,r){arguments[4][170][0].apply(r,arguments)},{dup:170}],366:[function(e,t,r){arguments[4][171][0].apply(r,arguments)},{"./isFunction":369,"./isLength":370,dup:171}],367:[function(e,t,r){arguments[4][172][0].apply(r,arguments)},{"./isArrayLike":366,"./isObjectLike":373,dup:172}],368:[function(e,t,r){arguments[4][173][0].apply(r,arguments)},{"./_root":350,"./stubFalse":381,dup:173}],369:[function(e,t,r){arguments[4][174][0].apply(r,arguments)},{"./_baseGetTag":281,"./isObject":372,dup:174}],370:[function(e,t,r){arguments[4][175][0].apply(r,arguments)},{dup:175}],371:[function(e,t,r){arguments[4][176][0].apply(r,arguments)},{"./_baseIsMap":283,"./_baseUnary":294,"./_nodeUtil":346,dup:176}],372:[function(e,t,r){arguments[4][177][0].apply(r,arguments)},{dup:177}],373:[function(e,t,r){arguments[4][178][0].apply(r,arguments)},{dup:178}],374:[function(e,t,r){arguments[4][179][0].apply(r,arguments)},{"./_baseGetTag":281,"./_getPrototype":314,"./isObjectLike":373,dup:179}],375:[function(e,t,r){arguments[4][180][0].apply(r,arguments)},{"./_baseIsSet":285,"./_baseUnary":294,"./_nodeUtil":346,dup:180}],376:[function(e,t,r){arguments[4][182][0].apply(r,arguments)},{"./_baseIsTypedArray":286,"./_baseUnary":294,"./_nodeUtil":346,dup:182}],377:[function(e,t,r){arguments[4][183][0].apply(r,arguments)},{"./_arrayLikeKeys":269,"./_baseKeys":287,"./isArrayLike":366,dup:183}],378:[function(e,t,r){arguments[4][184][0].apply(r,arguments)},{"./_arrayLikeKeys":269,"./_baseKeysIn":288,"./isArrayLike":366,dup:184}],379:[function(e,t,r){arguments[4][187][0].apply(r,arguments)},{"./_baseMerge":289,"./_createAssigner":306,dup:187}],380:[function(e,t,r){arguments[4][189][0].apply(r,arguments)},{dup:189}],381:[function(e,t,r){arguments[4][190][0].apply(r,arguments)},{dup:190}],382:[function(e,t,r){arguments[4][191][0].apply(r,arguments)},{"./_copyObject":302,"./keysIn":378,dup:191}],383:[function(e,t,r){arguments[4][193][0].apply(r,arguments)},{dup:193}],384:[function(e,t,r){"use strict";function n(e){return new a(e)}var o=e("./cxp-util"),i=e("browser-bunyan"),a=function(e){e=e||{};var t="cxp-web";this.log=e.log?e.log.child({childName:t}):i.createLogger({name:t||"logger",streams:Array.isArray(e.logStreams)?e.logStreams:[{level:e.logLevel||"info",stream:new i.ConsoleFormattedStream,type:"raw"}]}),this.settings={}};a.prototype.util=o,a.prototype.clone=function(){var e=this.settings,t=new a({logLevel:e.logLevel});return t.settings=Object.keys(e).reduce(function(t,r){return t[r]=e[r],t},{}),t},a.prototype.set=function(e,t){this.settings[e]=t},a.prototype.get=function(e){var t=this.settings[e];return"function"==typeof t?t():t},a.prototype.enable=function(e){this.log.warn("CxpConfiguration.enable is deprecated, please use CxpConfiguration.set("+e+", true)"),this.settings[e]=!0},a.prototype.disable=function(e){this.log.warn("CxpConfiguration.disable is deprecated, please use CxpConfiguration.set("+e+", false)"),this.settings[e]=!1},a.prototype.enabled=function(e){return this.log.warn("CxpConfiguration.enabled is deprecated, please use CxpConfiguration.get("+e+")"),!!this.settings[e]},a.prototype.disabled=function(e){return this.log.warn("CxpConfiguration.disabled is deprecated, please use CxpConfiguration.get("+e+")"),!this.settings[e]},a.prototype.getLogger=function(){return this.log},a.prototype.toSerializableObject=function(){var e=["logStreams","storageFactory"];return JSON.parse(JSON.stringify(this.settings,function(t,r){return e.indexOf(t)>-1?void 0:r}))},t.exports={Configuration:a,createInstance:n}},{"./cxp-util":385,"browser-bunyan":251}],385:[function(e,t,r){"use strict";t.exports={getPreference:function(e,t){return e.preferences[t]||null},getPreferenceValue:function(e,t){var r=this.getPreference(e,t);return r?r.value:null}}},{}],386:[function(e,t,r){"use strict";function n(e){this._datasource=e}var o=e("backbase-widget-engine/src/datasource/datasource-resolver"),i=e("backbase-widget-engine/src/datasource/datasource-resolver-helpers");t.exports=n,n.prototype.resolveUrl=function(e){var t=this._datasource.uri,r=t.split(":");if(2!==r.length)throw new Error("Invalid breadcrumb datasource uri: ",t);var n=[].concat(this._datasource.params||[]),o=i.trimSlashes(r[1]);o&&n.push({name:"uuid",value:o});var a=e.apiRoot||"",s=a+"/portal/navigation/breadcrumb",c=i.resolveQueryString(e,n);return c&&(s+="?"+c),s},n.prototype.processResponse=function(e){return e.json()},n.getInstance=o.createFactoryFunction("breadcrumb",n)},{"backbase-widget-engine/src/datasource/datasource-resolver":205,"backbase-widget-engine/src/datasource/datasource-resolver-helpers":204}],387:[function(e,t,r){"use strict";function n(e){this._datasource=e}var o=e("backbase-widget-engine/src/datasource/datasource-resolver"),i=e("backbase-widget-engine/src/datasource/datasource-resolver-helpers"),a=e("backbase-widget-engine/src/util/util"),s="assets";t.exports=n,n.prototype.resolveUrl=function(e){var t=this._datasource.uri,r=t.split(":");if(2!==r.length)throw new Error("Invalid contentrendered datasource uri: ",t);var n=(this._datasource.params||[]).map(function(t){var r=i.resolveParameter(e,t);return"template"===r.name&&(r.name="templateUrl"),r}).filter(function(e){return e.name&&e.name!==s}),o=i.resolveExpression(e,i.trimSlashes(r[1]));o&&n.push({name:"uuid",value:o});var a=e.contextItemName;a&&n.push({name:"contextItemName",value:a});var c=e.apiRoot||"",u=c+"/portal/contenttemplates/rendered",l=i.buildQueryString(n);return l&&(u+="?"+l),u},n.prototype.processResponse=function(e,t){var r=this;return e.text().then(function(e){if(a.isRunningOnFilesystem()){var n=t.contextRoot||"",o=t.remoteContextRoot||"",i=r._datasource.params.filter(function(e){return e.name===s})[0]||{},c="local"===i.value,u=c||!o?n:o;return a.isUrlAbsolute(u)?r._makeReferenceAbsolute(e,u):e}return e})},n.prototype._makeReferenceAbsolute=function(e,t){if("undefined"!=typeof DOMParser){var r=new DOMParser,n=r.parseFromString(e,"text/html");return this._getElementObjectsByAttr(n.body,"href").concat(this._getElementObjectsByAttr(n.body,"src")).filter(function(e){return e.value&&a.isUrlSiteRelative(e.value)}).forEach(function(e){var r=new URL(e.value,t).href;e.element.setAttribute(e.attr,r)}),n.body.innerHTML}return e},n.prototype._getElementObjectsByAttr=function(e,t){return Array.prototype.map.call(e.querySelectorAll("["+t+"]"),function(e){return{attr:t,value:e.getAttribute(t),element:e}})},n.getInstance=o.createFactoryFunction("contentrendered",n)},{"backbase-widget-engine/src/datasource/datasource-resolver":205,"backbase-widget-engine/src/datasource/datasource-resolver-helpers":204,"backbase-widget-engine/src/util/util":249}],388:[function(e,t,r){"use strict";function n(e){this._datasource=e}var o=e("backbase-widget-engine/src/datasource/datasource-resolver"),i=e("../model/parsers/xml/model-parser"),a=e("backbase-widget-engine/src/datasource/datasource-resolver-helpers");t.exports=n,n.prototype.resolveUrl=function(e){var t=this._datasource.uri,r=t.split(":");if(2!==r.length)throw new Error("Invalid link datasource uri: ",t);var n=[].concat(this._datasource.params||[]),o=a.trimSlashes(r[1]);o&&n.push({name:"f",value:"uuid(eq)"+o});var i=n.some(function(e){return"depth"===e.name});i||n.push({name:"depth",value:1});var s=e.apiRoot||"",c=e.portalName,u=s+"/portal/portals/"+c+"/links.xml",l=a.resolveQueryString(e,n);return l&&(u+="?"+l),u},n.prototype.processResponse=function(e){return e.text().then(function(e){var t=i.parseList(e);return t&&t.length?t[0]:null})},n.getInstance=o.createFactoryFunction("link",n)},{"../model/parsers/xml/model-parser":406,"backbase-widget-engine/src/datasource/datasource-resolver":205,"backbase-widget-engine/src/datasource/datasource-resolver-helpers":204}],389:[function(e,t,r){"use strict";function n(e){this._datasource=e}var o=e("backbase-widget-engine/src/datasource/datasource-resolver"),i=e("backbase-widget-engine/src/datasource/datasource-resolver-helpers");t.exports=n,n.prototype.resolveUrl=function(e){var t=this._datasource.uri,r=t.split(":");if(2!==r.length)throw new Error("Invalid navigation datasource uri: ",t);var n=[].concat(this._datasource.params||[]),o=i.trimSlashes(r[1]);o&&n.push({name:"uuid",value:o});var a=e.apiRoot||"",s=a+"/portal/navigation/tree",c=i.resolveQueryString(e,n);return c&&(s+="?"+c),s},n.prototype.processResponse=function(e){return e.json()},n.getInstance=o.createFactoryFunction("navigation",n)},{"backbase-widget-engine/src/datasource/datasource-resolver":205,"backbase-widget-engine/src/datasource/datasource-resolver-helpers":204}],390:[function(e,t,r){"use strict";function n(e){this._datasource=e}var o=e("backbase-widget-engine/src/datasource/datasource-resolver"),i=e("../model/parsers/xml/model-parser"),a=e("backbase-widget-engine/src/datasource/datasource-resolver-helpers");t.exports=n,n.prototype.resolveUrl=function(e){var t=this._datasource.uri,r=t.split(":");if(2!==r.length)throw new Error("Invalid link datasource uri: ",t);var n=[].concat(this._datasource.params||[]);n.push({name:"pc",value:!1});var o=e.apiRoot||"",i=a.resolveExpression(e,a.trimSlashes(r[1])),s=a.resolveQueryString(e,n);return o+"/portal/portals/"+i+".xml?"+s},n.prototype.processResponse=function(e){return e.text().then(function(e){return i.parse(e)})},n.getInstance=o.createFactoryFunction("portal",n)},{"../model/parsers/xml/model-parser":406,"backbase-widget-engine/src/datasource/datasource-resolver":205,"backbase-widget-engine/src/datasource/datasource-resolver-helpers":204}],391:[function(e,t,r){"use strict";var n=e("./render/render.js"),o=e("./configuration/configuration.js"),i=e("./model/strategies/xml-cxp-model");t.exports={getRenderer:n.createInstance,createConfiguration:o.createInstance,getModel:i.createInstance}},{"./configuration/configuration.js":384,"./model/strategies/xml-cxp-model":409,"./render/render.js":414}],392:[function(e,t,r){"use strict";function n(e,t,r,n){this._config=e,this.type=t,this._portalName=r,this._filter=n||null,this._requiredParams=this._getRequiredParams(),this._logger=this._config.getLogger().child({childName:"item-collection-context"})}t.exports=n,n.prototype._getRequiredParams=function(){switch(this.type){case"link":return{depth:10,ps:50};case"page":return{depth:10};default:return null}},n.prototype.get=function(){throw new Error("Method not implemented")},n.prototype.create=function(e){throw new Error("Method not implemented")},n.prototype.filter=function(e,t,r){throw new Error("Method not implemented")}},{}],393:[function(e,t,r){"use strict";function n(e,t,r,n,o){this._config=e,this.itemName=t,this.itemType=r,this._findById=n||!1,this._portalName=o,this._requiredParams=this._getRequiredParams(),this._logger=this._config.getLogger().child({childName:"item-context"})}t.exports=n,n.prototype._getRequiredParams=function(){var e={},t=!!this._config.get("designmode"),r=this.itemType;return"link"!==r&&"page"!==r||(e.depth=10),!t||"widget"!==r&&"container"!==r&&"page"!==r||(e.designmode=!0),e},n.prototype.get=function(e){throw new Error("Method not implemented")},n.prototype.update=function(e){throw new Error("Method not implemented")},n.prototype.revert=function(){throw new Error("Method not implemented")},n.prototype.remove=function(){throw new Error("Method not implemented")}},{}],394:[function(e,t,r){"use strict";function n(e,t,r,n){var o=e.preferences[t];o||(o={name:t},e.preferences[t]=o),o.value=r,n&&(o.type=n)}function o(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,r=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return s[255&e]+s[e>>8&255]+s[e>>16&255]+s[e>>24&255]+"-"+s[255&t]+s[t>>8&255]+"-"+s[t>>16&15|64]+s[t>>24&255]+"-"+s[63&r|128]+s[r>>8&255]+"-"+s[r>>16&255]+s[r>>24&255]+s[255&n]+s[n>>8&255]+s[n>>16&255]+s[n>>24&255]}function i(e){return e+o()}function a(e,t){var r={designmode:["designModeOnly"],role:["admin","manager","user","none"],input:["text-input","checkbox","select-one"],order:[]};if(!t||!t.length||!r[e])return null;var n=t.filter(function(t){return-1!==r[e].indexOf(t)||t.slice(0,e.length)===e})[0];if(n&&"order"===e){var o=n.split("-");o=2===o.length?o[1]:null;var i=parseFloat(o);isNaN(i)||(o=i),n=o}return n=n||("input"===e?"text-input":null),"designmode"===e&&(n=!!n),n}t.exports={modifyPreference:n,generateItemName:i,getViewHint:a};for(var s=[],c=0;256>c;c++)s[c]=(16>c?"0":"")+c.toString(16)},{}],395:[function(e,t,r){"use strict";function n(e){this.config=e,this.helpers=o}var o=e("../core/model-helpers");t.exports=n,n.prototype.items=function(e,t){throw new Error("Method not implemented")},n.prototype.item=function(e,t,r){throw new Error("Method not implemented")},n.prototype.itemById=function(e,t,r){throw new Error("Method not implemented")},n.prototype.portal=function(e){throw new Error("Method not implemented")}},{"../core/model-helpers":394}],396:[function(e,t,r){"use strict";function n(e,t){this._config=e,Object.defineProperty(this,"portalName",{value:t||this._config.get("portalName")})}n.prototype.item=function(e,t,r){throw new Error("Method not implemented")},n.prototype.itemById=function(e,t,r){throw new Error("Method not implemented")},n.prototype.items=function(e,t){throw new Error("Method not implemented")},t.exports=n},{}],397:[function(e,t,r){"use strict";function n(e){this.configuration=e;var t=e.get("remoteContextRoot");if("string"!=typeof t)throw new Error("RestApiConsumer needs remoteContextRoot variable to be set");/\/$/.test(t)===!1&&(t+="/"),this.baseUrl=t,this.logger=e.getLogger().child({childName:"rest-api-consumer"})}function o(e){return new n(e)}function i(e){return c.isObject(e)?"application/json":e&&e.indexOf("<?xml")>=0?"text/xml":"application/xml"}var a=e("backbase-widget-engine/src/fetch/filtering-fetch"),s=e("backbase-widget-engine/src/util/response-helpers"),c=e("../../util");t.exports={RestApiConsumer:n,createInstance:o},n.prototype._encodeQueryParameters=function(e){var t=[];return Object.keys(e).forEach(function(r){Array.isArray(e[r])?e[r].forEach(function(e){t.push(r+"[]="+encodeURIComponent(e))}):t.push(r+"="+encodeURIComponent(e[r]))}),t.join("&")},n.prototype._buildUrl=function(e,t){var r=this._encodeQueryParameters(t||{}),n=this.baseUrl+e;return r.length>0&&(n+=(e.indexOf("?")>=0?"&":"?")+r),n},n.prototype._makeRequest=function(e,t,r){var n=this,o=this._buildUrl(e,r);this.logger.debug("Making REST request to [%s]",o);var i=a(o,t).then(function(e){if(!s.isResponseOk(e)){var t=s.createError(e);throw t.response=e,t}return n.logger.debug("Request successful server responds %s",e.status),e});return i["catch"](function(e){n.logger.error("Request failed with: %s",e)}),i},n.prototype.get=function(e,t){return this._makeRequest(e,{method:"GET",headers:{Pragma:"no-cache","Cache-Control":"no-cache"}},t)},n.prototype.post=function(e,t){var r=c.isObject(t)?JSON.stringify(t):t,n={"Content-Type":i(t)};return this._makeRequest(e,{method:"POST",body:r,headers:n})},n.prototype.put=function(e,t){var r=c.isObject(t)?JSON.stringify(t):t,n={"Content-Type":i(t)};return this._makeRequest(e,{method:"PUT",body:r||"",headers:n})},n.prototype["delete"]=function(e,t){return this._makeRequest(e,{method:"DELETE"},t)}},{"../../util":417,"backbase-widget-engine/src/fetch/filtering-fetch":213,"backbase-widget-engine/src/util/response-helpers":248}],398:[function(e,t,r){"use strict";var n=e("./property-generator"),o=["type","name","contextItemName","extendedItemName","parentItemName"],i=["shortName","description"];t.exports=function(e,t,r){r=r||[],o.forEach(function(r){t.hasOwnProperty(r)&&(e.beginElement(r),e.text(t[r]),e.endElement(r))}),t.id&&(e.beginElement("uuid"),e.text(t.id),e.endElement("uuid")),"boolean"==typeof t.manageable&&(e.beginElement("manageable"),e.text(t.manageable?"true":"false"),e.endElement("manageable")),e.beginElement("properties"),i.forEach(function(r){t[r]&&n(e,{name:r,readonly:!1,value:t[r]})}),Array.isArray(r)&&r.length>0&&r.forEach(function(t){n(e,t)}),Array.isArray(t.icons)&&t.icons.length>0&&t.icons.forEach(function(t,r){var o=0===r?"thumbnailUrl":"icon";n(e,{name:o,readonly:!1,value:t})});var a=t.preferences||{};return Object.keys(a).forEach(function(r){n(e,a[r],t.locale)}),e.endElement("properties"),t.tags&&t.tags.length>0&&(e.beginElement("tags"),t.tags.forEach(function(t){var r={type:t.type};t.manageable&&(r.manageable=!0),t.blacklist&&(r.blacklist=!0),e.beginElement("tag",r),e.text(t.name),e.endElement("tag")}),e.endElement("tags")),e}},{"./property-generator":401}],399:[function(e,t,r){"use strict";var n=e("./xml-builder"),o=e("./base-xml-generator");t.exports=function(e){var t=new n;return t.beginElement("link"),o(t,e),t.endElement("link"),t.toString()}},{"./base-xml-generator":398,"./xml-builder":403}],400:[function(e,t,r){"use strict";var n=e("./xml-builder"),o=e("./base-xml-generator");t.exports=function(e){var t=new n;return t.beginElement("page"),o(t,e),t.endElement("page"),t.toString()}},{"./base-xml-generator":398,"./xml-builder":403}],401:[function(e,t,r){"use strict";function n(e,t,r){var n={name:t.name,readonly:t.readonly||!1},o=t.type||("order"===t.name?"double":null);"boolean"==typeof t.manageable&&(n.manageable=t.manageable),"boolean"==typeof t.localizable&&(n.localizable=t.localizable),"undefined"!=typeof t.markedForDeletion&&t.markedForDeletion===!0&&(n.markedForDeletion=!0),t.label&&(n.label=t.label),o&&(n.type=o),t.viewhints&&t.viewhints.length>0&&(n.viewHint=t.viewhints.join(",")),e.beginElement("property",n),i(e,t,r),e.endElement("property")}function o(e,t,r){e.beginElement("value",r),e.text(t),e.endElement("value")}function i(e,t,r){var n=r||a;if(t.localizable){var i=t._lang;i||(i={},i[n]={value:t.value}),Object.keys(i).forEach(function(t){var r=i[t]||{},n={};"undefined"!=typeof r.markedForDeletion&&r.markedForDeletion===!0&&(n.markedForDeletion=!0),t!==a&&(n.locale=t),o(e,r.value,n)})}else o(e,t.value)}var a=e("backbase-widget-engine/src/strategies/parser/xml/constants").NO_LOCALE_NAME;t.exports=n},{"backbase-widget-engine/src/strategies/parser/xml/constants":232}],402:[function(e,t,r){"use strict";var n=e("./xml-builder"),o=e("./base-xml-generator"),i=["author","authorEmail","authorHref","license","licenseHref"];t.exports=function(e,t){var r=t?"container":"widget",a=[];i.forEach(function(t){e[t]&&a.push({name:t,readonly:!1,value:e[t]})}),e.content&&e.content.src&&a.push({name:"src",readonly:!1,value:e.content.src}),e.altContent&&Object.keys(e.altContent).forEach(function(t){a.push({name:"src."+t,readonly:!1,value:e.altContent[t].src})}),e.viewmodes&&e.viewmodes.length>0&&a.push({name:"viewmodes",readonly:!1,value:e.viewmodes.join(" ")});var s=new n;return s.beginElement(r),o(s,e,a),s.endElement(r),s.toString()}},{"./base-xml-generator":398,"./xml-builder":403}],403:[function(e,t,r){"use strict";function n(e){return e.replace(s,function(e){return a[e]||e})}function o(e){return null===e||void 0===e?"":String(e)}function i(){this._xml=""}t.exports=i;var a={"<":"&lt;",">":"&gt;",'"':"&quot;","&":"&amp;"},s=/[<>"&]/g;i.prototype.beginElement=function(e,t){var r="";t&&(r=Object.keys(t).reduce(function(e,r){var i=o(t[r]);return e+" "+r+'="'+n(i)+'"'},"")),this._xml+="<"+e+r+">"},i.prototype.endElement=function(e){this._xml+="</"+e+">"},i.prototype.text=function(e){this._xml+=n(o(e))},i.prototype.xml=function(e){this._xml+=e},i.prototype.toString=function(){return this._xml}},{}],404:[function(e,t,r){"use strict";function n(e){return s(e,!0)}function o(e){return s(e,!1)}function i(e,r){var n=r||e.type;if(!n)throw new TypeError('Item type is required. Either provide it as the second argument or set "type" property of the model');var o="generate"+n[0].toUpperCase()+n.substr(1);if(!t.exports[o])throw new Error("Unsupported type passed "+r);return t.exports[o](e)}function a(e){if(!e)throw new TypeError("catalogItems argument is required. It must be an item model object or an array of such objects.");Array.isArray(e)||(e=[e]);var t=new l;return t.beginElement("catalog"),e.forEach(function(e){t.xml(i(e))}),t.endElement("catalog"),t.toString()}var s=e("./widget-xml-generator"),c=e("./page-xml-generator"),u=e("./link-xml-generator"),l=e("./xml-builder");t.exports={generate:i,generateWidget:o,generateContainer:n,generatePage:c,generateLink:u,generateCatalog:a}},{"./link-xml-generator":399,"./page-xml-generator":400,"./widget-xml-generator":402,"./xml-builder":403}],405:[function(e,t,r){"use strict";function n(e){var t=h(e),r=t.preferencesDict,n=r.itemType;"menuHeader"===n&&(n="LINK");var o={children:[],itemType:n,title:r.title};"function"==typeof g[n]&&g[n](o,r);var i=p(e);return(i||[]).length>0&&(o.children=i),delete o.preferencesDict,f(t,o)}function o(e){e.navPattern=null}function i(e,t){e.itemRef=t.ItemRef,e.href=t.generatedUrl,t.Url&&(e.url=t.Url),e.generatedUrl=t.generatedUrl}function a(e,t){e.className=t.className}function s(e,t){e.url=t.Url}function c(e,t){e.redirectionMethod=t.redirectionMethod,e.url=t.Url,e.targetPage=t.targetPage}function u(e,t){e.itemRef=t.ItemRef,e.href=t.generatedUrl,t.Url&&(e.url=t.Url),e.generatedUrl=t.generatedUrl}function l(e,t){e.itemRef=t.ItemRef,e.href=t.generatedUrl,t.Url&&(e.url=t.Url),e.generatedUrl=t.generatedUrl;try{e.state=JSON.parse(t.State)}catch(r){throw new Error('Failed to parse "state" property of link ['+e.itemRef+"]. Error: "+r.message)}t.sectionName&&(e.sectionName=t.sectionName)}function p(e){var t=d.getChildElementByName(e,"children"),r=t&&d.getChildElements(t);return r&&r.map(n)}var f=e("../../../util").merge,h=e("backbase-widget-engine/src/strategies/parser/xml/item"),d=e("backbase-widget-engine/src/strategies/parser/xml/helpers");t.exports=n;var g={LINK:o,divider:a,page:i,externalLink:s,redirect:c,alias:u,state:l}},{"../../../util":417,"backbase-widget-engine/src/strategies/parser/xml/helpers":233,"backbase-widget-engine/src/strategies/parser/xml/item":234}],406:[function(e,t,r){"use strict";var n=e("./link"),o=e("./page"),i=e("./portal"),a=e("backbase-widget-engine/src/strategies/parser/xml/model-parser"),s=a.createInstance();s.setParser("link",n),s.setParser("page",o),s.setParser("portal",i),t.exports=s},{"./link":405,"./page":407,"./portal":408,"backbase-widget-engine/src/strategies/parser/xml/model-parser":235}],407:[function(e,t,r){"use strict";function n(e){var t=i(e),r=t.preferencesDict,n={content:o(r),children:[],description:r.description,icons:s.parseIcons(r)},c=s.parseChildren(e,a);return(c||[]).length>0&&(n.children=c),delete t.preferencesDict,u(t,n)}function o(e){var t={src:"",type:"text/html",encoding:"UTF-8"};return c.assignIfExists(t,"src",e.src),t}var i=e("backbase-widget-engine/src/strategies/parser/xml/item"),a=e("backbase-widget-engine/src/strategies/parser/xml/widget"),s=e("backbase-widget-engine/src/strategies/parser/xml/common"),c=e("backbase-widget-engine/src/strategies/parser/xml/helpers"),u=e("../../../util").merge;t.exports=n},{"../../../util":417,"backbase-widget-engine/src/strategies/parser/xml/common":231,"backbase-widget-engine/src/strategies/parser/xml/helpers":233,"backbase-widget-engine/src/strategies/parser/xml/item":234,"backbase-widget-engine/src/strategies/parser/xml/widget":236}],408:[function(e,t,r){"use strict";function n(e){var t=o(e);return delete t.preferencesDict,t}var o=e("backbase-widget-engine/src/strategies/parser/xml/item");t.exports=n},{"backbase-widget-engine/src/strategies/parser/xml/item":234}],409:[function(e,t,r){"use strict";function n(e){i.apply(this,[e])}function o(e){return new n(e)}var i=e("../core/model"),a=e("./xml-portal-context");t.exports={XmlCxpModel:n,createInstance:o},n.prototype=Object.create(i.prototype),n.prototype.items=function(e,t){return new a(this.config).items(e,t)},n.prototype.item=function(e,t,r){return new a(this.config).item(e,t,r)},n.prototype.itemById=function(e,t,r){return new a(this.config).itemById(e,t,r)},n.prototype.portal=function(e){return new a(this.config,e)}},{"../core/model":395,"./xml-portal-context":413}],410:[function(e,t,r){"use strict";function n(e,t,r,n){a.call(this,e,t,r,n),this._apiConsumer=s.createInstance(this._config)}var o=e("../parsers/xml/model-parser"),i=e("../generators/xml-generator"),a=e("../core/item-collection-context"),s=e("../core/rest-api-consumer");t.exports=n,n.prototype=Object.create(a.prototype),n.prototype.get=function(){var e=this._portalName,t="portals/"+e+"/"+this.type+"s",r=this._filter,n=this._requiredParams,i=[],a=[];r&&(i=["f="+r.name+"("+r.operator+")"+encodeURIComponent(r.value)]),n&&(a=Object.keys(n).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(n[e])}));var s=i.concat(a).join("&");return t+=s.length>0?"?"+s:"",this._apiConsumer.get(t).then(function(e){return e.text()}).then(function(e){this._logger.info("Parsing %s",t);var r=o.parseList(e);return this._logger.info("%s parsed successfully"),r}.bind(this))},n.prototype.filter=function(e,t,r){var o={name:e,value:t,operator:r||"eq"};return new n(this._config,this.type,this._portalName,o)},n.prototype.create=function(e){var t=["parentItemName"];"link"!==this.type&&t.push("extendedItemName"),t.forEach(function(t){if("undefined"==typeof e[t]||"string"!=typeof e[t]||0===e[t].length)throw new Error("ItemCollectionContext.create needs the model has the field named: "+t)});var r=this._portalName;e.contextItemName=r,"undefined"==typeof e.preferences&&(e.preferences={});var n=i.generate(e,this.type),a="portals/"+r+"/"+this.type+"s";return this._apiConsumer.post(a,n).then(function(e){return e.text()}).then(function(e){this._logger.info("Parsing newly created item's xml");var t=o.parse(e);return this._logger.info("Newly created item parsed successfully"),t}.bind(this))}},{"../core/item-collection-context":392,"../core/rest-api-consumer":397,"../generators/xml-generator":404,"../parsers/xml/model-parser":406}],411:[function(e,t,r){"use strict";function n(e,t,r,n,o){s.call(this,e,t,r,n,o),this._apiConsumer=a.createInstance(this._config)}var o=e("../parsers/xml/model-parser"),i=e("../generators/xml-generator"),a=e("../core/rest-api-consumer"),s=e("../core/item-context");t.exports=n,n.prototype=Object.create(s.prototype),n.prototype.get=function(e){var t="object"==typeof e?e:{};return this._findById?this._getItemById():this._getItemByName(t)},n.prototype._buildParams=function(){return Object.keys(this._requiredParams).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(this._requiredParams[e])}.bind(this)).join("&")},n.prototype._getItemByName=function(e){var t=this._config.get("portalName"),r=this.itemType+"s/"+this.itemName,n=e.allLocalizedValues===!0?"/details":".xml",i="portals/"+t+"/"+r+n,a=this._buildParams();return a.length>0&&(i+="?"+a),this._apiConsumer.get(i).then(function(e){return e.text()}).then(function(e){this._logger.info("Parsing response from [%s]",r);var t=o.parse(e);return this._logger.info("Response from [%s] parsed successfully",r),t}.bind(this))},n.prototype._getItemById=function(){var e=this._config.get("portalName"),t=encodeURIComponent(this.itemName),r=this.itemType+"s",n=r+"?f=uuid(eq)"+t,i="portals/"+e+"/"+n,a=this._buildParams();return a.length>0&&(i+="&"+a),this._apiConsumer.get(i).then(function(e){return e.text()}).then(function(e){this._logger.info("Parsing response from [%s]",n);var t=o.parseList(e);this._logger.info("Response from [%s] parsed successfully",n);var r=t[0];if(!r)throw new Error("Item of type ["+this.itemType+"] with id ["+this.itemName+"] not found");return r}.bind(this))},n.prototype.update=function(e){var t=this._config.get("portalName"),r="portals/"+t+"/"+this.itemType+"s/"+this.itemName,n=e;e.name&&e.name.indexOf("~")>0&&(n=Object.create(e),n.parentItemName=void 0,n.extendedItemName=void 0,n.id=void 0);var o=i.generate(n,this.itemType);return this._apiConsumer.put(r,o).then(function(){this._logger.info("%s named %s updated successfully",this.itemType,this.itemName)}.bind(this))},n.prototype.revert=function(){var e="portals/"+this._config.get("portalName")+"/"+this.itemType+"s/"+this.itemName+".xml";return this._apiConsumer["delete"](e)},n.prototype.remove=function(){var e="portals/"+this._config.get("portalName")+"/"+this.itemType+"s/"+this.itemName;return this._apiConsumer["delete"](e)}},{"../core/item-context":393,"../core/rest-api-consumer":397,"../generators/xml-generator":404,"../parsers/xml/model-parser":406}],412:[function(e,t,r){"use strict";function n(e,t,r,n,o){i.call(this,e,t,r,n,o)}var o=e("../parsers/xml/model-parser"),i=e("./xml-item-context");t.exports=n,n.prototype=Object.create(i.prototype),n.prototype.duplicate=function(){var e=this._config.get("portalName"),t=this.itemType+"s/"+this.itemName,r="portals/"+e+"/"+t+"/duplicate";return this._apiConsumer.post(r).then(function(e){
return e.text()}).then(function(e){this._logger.info("Parsing response from [%s]",t);var r=o.parse(e);return this._logger.info("Response from [%s] parsed successfully",t),r}.bind(this))}},{"../parsers/xml/model-parser":406,"./xml-item-context":411}],413:[function(e,t,r){"use strict";function n(){o.apply(this,[].slice.call(arguments))}var o=e("../core/portal-context"),i=e("./xml-item-context"),a=e("./xml-link-context"),s=e("./xml-item-collection-context");n.prototype=Object.create(o.prototype),n.prototype.item=function(e,t,r){var n=r&&r.config||this._config;return this._createItemContext(n,e,t,!1,this._getPortalName(r))},n.prototype.itemById=function(e,t,r){var n=r&&r.config||this._config;return this._createItemContext(n,e,t,!0,this._getPortalName(r))},n.prototype.items=function(e,t){var r=t&&t.config||this._config;return new s(r,e,this._getPortalName(t))},n.prototype._getPortalName=function(e){var t=e&&e.config;return t&&t.get("portalName")||this.portalName},n.prototype._createItemContext=function(e,t,r,n,o){return"link"===r?new a(e,t,r,n,o):new i(e,t,r,n,o)},t.exports=n},{"../core/portal-context":396,"./xml-item-collection-context":410,"./xml-item-context":411,"./xml-link-context":412}],414:[function(e,t,r){"use strict";var n=e("./strategies/html5-item-renderer"),o=function(e){return e.get("contextRoot")||e.set("contextRoot",""),e.get("remoteContextRoot")||e.set("remoteContextRoot",""),new n(e)};t.exports={createInstance:o}},{"./strategies/html5-item-renderer":416}],415:[function(e,t,r){(function(r){"use strict";function n(e,t){t=t||{};var r=t.log||e.getLogger();this._config=e,this._log=r.child({childName:"chrome-renderer"})}var o=e("handlebars/dist/handlebars.min"),i=e("handlebars-helpers"),a=e("backbase-widget-engine/src/fetch/filtering-fetch"),s=e("backbase-widget-engine/src/util/response-helpers"),c=["windowed","maximized"],u="data-chrome",l="data-widget-holder",p={},f=o.create();Object.keys(i).forEach(function(e){f.registerHelper(e,i[e])}),t.exports=n,n.prototype.getChrome=function(e,t,r){var n=this._findChromeElement(e,t.name),o=this._findWidgetHolderElement(n);return o?Promise.resolve({chromeElement:n,widgetHolderElement:o}):this._renderChrome(e,t,r)},n.prototype._renderChrome=function(e,t,n){var o,i,a=this,s=!n||n.useChrome!==!1,p=e&&e.ownerDocument||r.document,f=s?this._getTemplate():Promise.resolve(null);return f.then(function(e){if(e&&t.viewmodes&&c.indexOf(t.viewmodes[0])>=0){var r=e(t),n=p.createElement("div");n.innerHTML=r,o=a._findChromeElement(n,t.name),i=a._findWidgetHolderElement(o),o?o.parentNode.removeChild(o):a._log.warn('Chrome layout does not have an element with "data-chrome" attribute. Falling back to blank chrome.'),i||(o=null,a._log.warn('Chrome layout does not have an element with "data-widget-holder" attribute. Falling back to blank chrome.'))}return o||(o=p.createElement("div"),o.setAttribute(u,t.name),o.setAttribute(l,""),i=o),{chromeElement:o,widgetHolderElement:i}})},n.prototype._getTemplate=function(){var e=this._config.get("chromeSrc"),t=this._log;if(!e){var r='No chrome template configured. Widgets with "windowed" or "maximized" view modes will be displayed without chrome.';return t.warn(r),Promise.resolve(null)}var n=this._config.get("staticResourcesRoot"),o=this._config.get("apiRoot"),i=e.replace(/\$\(contextRoot\)|\$\(staticResourcesRoot\)/,n).replace(/\$\(apiRoot\)/,o),c=p[i];return c||(t.debug("Requesting chrome template from %s",i),c=a(i).then(function(e){if(t.debug("Chrome template request resolved. Status: %s",e.status),s.isResponseOk(e))return e.text();throw s.createError(e)}).then(function(e){t.trace("Chrome template body\n: %s",e),t.debug("Compiling handlebars template instance from %s",i);try{return f.compile(e)}catch(r){throw t.error("There was a problem compiling a handlebars template"),r}})["catch"](function(e){return t.error(e),delete p[i],null}),p[i]=c),c},n.prototype._findChromeElement=function(e,t){if(!e)return null;var r="*["+u+'="'+(t||"")+'"]';return e.querySelector(r)},n.prototype._findWidgetHolderElement=function(e){if(!e)return null;var t="*["+l+"]";return e.hasAttribute(l)?e:e.querySelector(t)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"backbase-widget-engine/src/fetch/filtering-fetch":213,"backbase-widget-engine/src/util/response-helpers":248,"handlebars-helpers":252,"handlebars/dist/handlebars.min":254}],416:[function(e,t,r){"use strict";var n=e("backbase-widget-engine"),o=e("promise-extensions")(Promise),i=e("browser-bunyan"),a=e("../../util"),s=e("./chrome-renderer"),c=e("../../datasource/link-datasource-resolver"),u=e("../../datasource/portal-datasource-resolver"),l=e("../../datasource/contentrendered-datasource-resolver"),p=e("../../datasource/navigation-datasource-resolver"),f=e("../../datasource/breadcrumb-datasource-resolver"),h=function(e){this.config=e,this.log=e.getLogger().child({childName:"html5-item-renderer"}),this.plugins=[],this.features=[],this._widgetEngines=[],this._chromeRenderer=new s(e,{log:this.log}),this._datasourceResolvers=[c.getInstance,u.getInstance,l.getInstance,p.getInstance,f.getInstance]};t.exports=h,h.prototype.start=function(e,t,r){if(!e||0===e.length)return o.resolve();r=r||{};var n=this.log,s=this;n.info("Starting item tree rendering..."),n.level()<=i.TRACE&&n.trace("Item tree model is this:\n %s",JSON.stringify(e,null,"	"));var c=Date.now(),u=Array.isArray(e)?e:[e];if(1===u.length&&r.contentName){var l=a.cloneDeep(u[0]);if(l.content=l.altContent[r.contentName],"undefined"==typeof l.content){var p=new Error('Given content name "'+r.contentName+'" not found for item named "'+e.name+'"');return o.reject(p)}u=[l]}return this._render(u,t,r).then(function(e){n.info("Item tree rendering complete.");var t=Date.now()-c,r={time:t,failures:[]},o=s._flattenArray(e);r=o.reduce(function(e,t){if(t.isRejected()){var r="function"==typeof t.reason.cause&&t.reason.cause()||t.reason;e.failures.push(r)}return e},r);var i=r.failures.length;if(i>0&&n.warn("%s/%s items failed to load.",i,o.length),i===o.length){var a=new Error("All items in a rendering tree failed to render");throw a.result=r,a}return r})},h.prototype.addFeature=function(e){return"object"==typeof e&&this.features.push(e),this},h.prototype.addPlugin=function(e){return"object"==typeof e&&this.plugins.push(e),this},h.prototype._renderItem=function(e,t){var r=this,o=this.config,i="";e.content&&e.content.src?i=e.content.src.replace(/\/[^\/]+$/,""):e.content&&e.content.config&&(i=e.content.config.replace(/\/[^\/]+$/,"")),i=i.replace(/\$\(contextRoot\)|\$\(staticResourcesRoot\)/,o.get("staticResourcesRoot")).replace(/\$\(apiRoot\)/,o.get("apiRoot"));var a=new n({log:this.log}),s=o.get("storageFactory");a.init({widgetPath:i,widgetEl:t,initialModel:e,storage:s?s.get(e):null,configVars:o.toSerializableObject()}),this._datasourceResolvers.forEach(function(e){a.addDatasourceResolver(e)}),this.plugins.forEach(function(e){a.addPlugin(e)}),this.features.forEach(function(e){a.addFeature(e)}),o.get("compat")&&a.enableCompatibility();var c=a.start(e,t);return c.delay(0).then(function(e){return r._widgetEngines.push(a),e})},h.prototype.destroyAllItems=function(){this._widgetEngines.forEach(function(e){e.destroy()}),this._widgetEngines=[]},h.prototype.destroyItem=function(e){var t=this._widgetEngines.filter(function(t){return t.widgetEngine.config.initialModel.id===e})[0];if(t){t.destroy();var r=t.widgetEngine.config;if(r.initialModel&&r.initialModel.children&&r.initialModel.children.length>0){var n=this;r.initialModel.children.forEach(function(e){var t=n._widgetEngines.filter(function(t){return t.widgetEngine._widgetInstance&&t.widgetEngine._widgetInstance.id===e.id?t:void 0})[0];if(t){var r=n._widgetEngines.indexOf(t);n._widgetEngines.splice(r,1)}})}var o=this._widgetEngines.indexOf(t);return this._widgetEngines.splice(o,1),this}},h.prototype.rerenderItem=function(e,t,r){"object"==typeof e&&"undefined"==typeof r&&(r=e,e=r.id,t=r.name);var n=document.createElement("div"),o=document.querySelector('[data-chrome="'+t+'"]');return o.parentNode.insertBefore(n,o),this.destroyItem(e),this.start(r,n).then(function(){var e=n.firstElementChild;n.parentNode.insertBefore(e,n),n.parentNode.removeChild(n)})},h.prototype._render=function(e,t,r){var n=this,i=e.map(function(e){return n._chromeRenderer.getChrome(t,e,r)});return Promise.all(i).then(function(r){return r.map(function(r,n){return{itemModel:e[n],chrome:r,parentEl:t}})}).then(function(e){var t=[];return e.forEach(function(e,r,o){n._attachChrome(e,r,o),t.push(n._renderItem(e.itemModel,e.chrome.widgetHolderElement))}),o.settleAll(t)}).then(function(t){var o=[];return t.filter(function(e){return e.isFulfilled()}).map(function(e){return e.value}).forEach(function(t){var i=t.areaNodes;if(i){var a=e.filter(function(e){return e.id===t.id})[0];Object.keys(i).forEach(function(e){var s=a.children||[],c=s.filter(function(t){var r;return r=Array.isArray(t.preferences)?t.preferences.filter(function(e){return"area"===e.name})[0]:t.preferences.area,r&&r.value===e});n.log.info("Rendering %s child item(s) for area [%s] of item [%s]...",c.length,e,t.id);var u=i[e];o.push(n._render(c,u,r))})}}),Promise.all(t.concat(o))})},h.prototype._attachChrome=function(e,t,r){var n,o=e.chrome.chromeElement,i=e.parentEl;if(!o.parentNode){if(0===t)n=i.firstElementChild;else{var a=r[t-1].chrome.chromeElement;n=a.nextElementSibling}i.insertBefore(o,n)}},h.prototype._flattenArray=function d(e){return e.reduce(function(e,t){return e.concat(Array.isArray(t)?d(t):t)},[])}},{"../../datasource/breadcrumb-datasource-resolver":386,"../../datasource/contentrendered-datasource-resolver":387,"../../datasource/link-datasource-resolver":388,"../../datasource/navigation-datasource-resolver":389,"../../datasource/portal-datasource-resolver":390,"../../util":417,"./chrome-renderer":415,"backbase-widget-engine":215,"browser-bunyan":251,"promise-extensions":383}],417:[function(e,t,r){"use strict";t.exports={isObject:e("lodash/isObject"),merge:e("lodash/merge"),cloneDeep:e("lodash/cloneDeep")}},{"lodash/cloneDeep":360,"lodash/isObject":372,"lodash/merge":379}],418:[function(e,t,r){!function(){function e(e){var t=e.__resizeTriggers__,r=t.firstElementChild,n=t.lastElementChild,o=r.firstElementChild;n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight,o.style.width=r.offsetWidth+1+"px",o.style.height=r.offsetHeight+1+"px",r.scrollLeft=r.scrollWidth,r.scrollTop=r.scrollHeight}function t(e){return e.offsetWidth!=e.__resizeLast__.width||e.offsetHeight!=e.__resizeLast__.height}function r(r){var n=this;e(this),this.__resizeRAF__&&s(this.__resizeRAF__),this.__resizeRAF__=a(function(){t(n)&&(n.__resizeLast__.width=n.offsetWidth,n.__resizeLast__.height=n.offsetHeight,n.__resizeListeners__.forEach(function(e){e.call(n,r)}))})}function n(){if(!i){var e=(v?v:"")+".resize-triggers { "+(b?b:"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e)),t.appendChild(r),i=!0}}var o=document.attachEvent,i=!1;if(!o){var a=function(){var e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){return window.setTimeout(e,20)};return function(t){return e(t)}}(),s=function(){var e=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout;return function(t){return e(t)}}(),c=!1,u="animation",l="",p="animationstart",f="Webkit Moz O ms".split(" "),h="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),d="",g=document.createElement("fakeelement");if(void 0!==g.style.animationName&&(c=!0),c===!1)for(var m=0;m<f.length;m++)if(void 0!==g.style[f[m]+"AnimationName"]){d=f[m],u=d+"Animation",l="-"+d.toLowerCase()+"-",p=h[m],c=!0;break}var y="resizeanim",v="@"+l+"keyframes "+y+" { from { opacity: 0; } to { opacity: 0; } } ",b=l+"animation: 1ms "+y+"; "}window.addResizeListener=function(t,i){o?t.attachEvent("onresize",i):(t.__resizeTriggers__||("static"==getComputedStyle(t).position&&(t.style.position="relative"),n(),t.__resizeLast__={},t.__resizeListeners__=[],(t.__resizeTriggers__=document.createElement("div")).className="resize-triggers",t.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',t.appendChild(t.__resizeTriggers__),e(t),t.addEventListener("scroll",r,!0),p&&t.__resizeTriggers__.addEventListener(p,function(r){r.animationName==y&&e(t)})),t.__resizeListeners__.push(i))},window.removeResizeListener=function(e,t){o?e.detachEvent("onresize",t):(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),e.__resizeListeners__.length||(e.removeEventListener("scroll",r),e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)))}}()},{}],419:[function(e,t,r){function n(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(p===setTimeout)return setTimeout(e,0);if((p===n||!p)&&setTimeout)return p=setTimeout,setTimeout(e,0);try{return p(e,0)}catch(t){try{return p.call(null,e,0)}catch(t){return p.call(this,e,0)}}}function a(e){if(f===clearTimeout)return clearTimeout(e);if((f===o||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function s(){m&&d&&(m=!1,d.length?g=d.concat(g):y=-1,g.length&&c())}function c(){if(!m){var e=i(s);m=!0;for(var t=g.length;t;){for(d=g,g=[];++y<t;)d&&d[y].run();y=-1,t=g.length}d=null,m=!1,a(e)}}function u(e,t){this.fun=e,this.array=t}function l(){}var p,f,h=t.exports={};!function(){try{p="function"==typeof setTimeout?setTimeout:n}catch(e){p=n}try{f="function"==typeof clearTimeout?clearTimeout:o}catch(e){f=o}}();var d,g=[],m=!1,y=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];g.push(new u(e,t)),1!==g.length||m||i(c)},u.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=l,h.addListener=l,h.once=l,h.off=l,h.removeListener=l,h.removeAllListeners=l,h.emit=l,h.prependListener=l,h.prependOnceListener=l,h.listeners=function(e){return[]},h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},{}],420:[function(e,t,r){(function(e){!function(n){function o(e){throw new RangeError(N[e])}function i(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function a(e,t){var r=e.split("@"),n="";r.length>1&&(n=r[0]+"@",e=r[1]),e=e.replace(R,".");var o=e.split("."),a=i(o,t).join(".");return n+a}function s(e){for(var t,r,n=[],o=0,i=e.length;i>o;)t=e.charCodeAt(o++),t>=55296&&56319>=t&&i>o?(r=e.charCodeAt(o++),56320==(64512&r)?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),o--)):n.push(t);return n}function c(e){return i(e,function(e){var t="";return e>65535&&(e-=65536,t+=F(e>>>10&1023|55296),e=56320|1023&e),t+=F(e)}).join("")}function u(e){return 10>e-48?e-22:26>e-65?e-65:26>e-97?e-97:x}function l(e,t){return e+22+75*(26>e)-((0!=t)<<5)}function p(e,t,r){var n=0;for(e=r?T(e/P):e>>1,e+=T(e/t);e>L*S>>1;n+=x)e=T(e/L);return T(n+(L+1)*e/(e+k))}function f(e){var t,r,n,i,a,s,l,f,h,d,g=[],m=e.length,y=0,v=A,b=O;for(r=e.lastIndexOf(C),0>r&&(r=0),n=0;r>n;++n)e.charCodeAt(n)>=128&&o("not-basic"),g.push(e.charCodeAt(n));for(i=r>0?r+1:0;m>i;){for(a=y,s=1,l=x;i>=m&&o("invalid-input"),f=u(e.charCodeAt(i++)),(f>=x||f>T((w-y)/s))&&o("overflow"),y+=f*s,h=b>=l?E:l>=b+S?S:l-b,!(h>f);l+=x)d=x-h,s>T(w/d)&&o("overflow"),s*=d;t=g.length+1,b=p(y-a,t,0==a),T(y/t)>w-v&&o("overflow"),v+=T(y/t),y%=t,g.splice(y++,0,v)}return c(g)}function h(e){var t,r,n,i,a,c,u,f,h,d,g,m,y,v,b,_=[];for(e=s(e),m=e.length,t=A,r=0,a=O,c=0;m>c;++c)g=e[c],128>g&&_.push(F(g));for(n=i=_.length,i&&_.push(C);m>n;){for(u=w,c=0;m>c;++c)g=e[c],g>=t&&u>g&&(u=g);for(y=n+1,u-t>T((w-r)/y)&&o("overflow"),r+=(u-t)*y,t=u,c=0;m>c;++c)if(g=e[c],t>g&&++r>w&&o("overflow"),g==t){for(f=r,h=x;d=a>=h?E:h>=a+S?S:h-a,!(d>f);h+=x)b=f-d,v=x-d,_.push(F(l(d+b%v,0))),f=T(b/v);_.push(F(l(f,0))),a=p(r,y,n==i),r=0,++n}++r,++t}return _.join("")}function d(e){return a(e,function(e){return j.test(e)?f(e.slice(4).toLowerCase()):e})}function g(e){return a(e,function(e){return I.test(e)?"xn--"+h(e):e})}var m="object"==typeof r&&r&&!r.nodeType&&r,y="object"==typeof t&&t&&!t.nodeType&&t,v="object"==typeof e&&e;v.global!==v&&v.window!==v&&v.self!==v||(n=v);var b,_,w=2147483647,x=36,E=1,S=26,k=38,P=700,O=72,A=128,C="-",j=/^xn--/,I=/[^\x20-\x7E]/,R=/[\x2E\u3002\uFF0E\uFF61]/g,N={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},L=x-E,T=Math.floor,F=String.fromCharCode;if(b={version:"1.4.1",ucs2:{decode:s,encode:c},decode:f,encode:h,toASCII:g,toUnicode:d},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return b});else if(m&&y)if(t.exports==m)y.exports=b;else for(_ in b)b.hasOwnProperty(_)&&(m[_]=b[_]);else n.punycode=b}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],421:[function(e,t,r){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,r,i){t=t||"&",r=r||"=";var a={};if("string"!=typeof e||0===e.length)return a;var s=/\+/g;e=e.split(t);var c=1e3;i&&"number"==typeof i.maxKeys&&(c=i.maxKeys);var u=e.length;c>0&&u>c&&(u=c);for(var l=0;u>l;++l){var p,f,h,d,g=e[l].replace(s,"%20"),m=g.indexOf(r);m>=0?(p=g.substr(0,m),f=g.substr(m+1)):(p=g,f=""),h=decodeURIComponent(p),d=decodeURIComponent(f),n(a,h)?o(a[h])?a[h].push(d):a[h]=[a[h],d]:a[h]=d}return a};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],422:[function(e,t,r){"use strict";function n(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var o=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,r,s){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?n(a(e),function(a){var s=encodeURIComponent(o(a))+r;return i(e[a])?n(e[a],function(e){return s+encodeURIComponent(o(e))}).join(t):s+encodeURIComponent(o(e[a]))}).join(t):s?encodeURIComponent(o(s))+r+encodeURIComponent(o(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},a=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},{}],423:[function(e,t,r){"use strict";r.decode=r.parse=e("./decode"),r.encode=r.stringify=e("./encode")},{"./decode":421,"./encode":422}],424:[function(e,t,r){function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function o(e,t,r){if(e&&u(e)&&e instanceof n)return e;var o=new n;return o.parse(e,t,r),o}function i(e){return c(e)&&(e=o(e)),e instanceof n?e.format():n.prototype.format.call(e)}function a(e,t){return o(e,!1,!0).resolve(t)}function s(e,t){return e?o(e,!1,!0).resolveObject(t):t}function c(e){return"string"==typeof e}function u(e){return"object"==typeof e&&null!==e}function l(e){return null===e}function p(e){return null==e}var f=e("punycode");r.parse=o,r.resolve=a,r.resolveObject=s,r.format=i,r.Url=n;var h=/^([a-z0-9.+-]+:)/i,d=/:[0-9]*$/,g=["<",">",'"',"`"," ","\r","\n","	"],m=["{","}","|","\\","^","`"].concat(g),y=["'"].concat(m),v=["%","/","?",";","#"].concat(y),b=["/","?","#"],_=255,w=/^[a-z0-9A-Z_-]{0,63}$/,x=/^([a-z0-9A-Z_-]{0,63})(.*)$/,E={javascript:!0,"javascript:":!0},S={javascript:!0,"javascript:":!0},k={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},P=e("querystring");n.prototype.parse=function(e,t,r){if(!c(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e;n=n.trim();var o=h.exec(n);if(o){o=o[0];var i=o.toLowerCase();this.protocol=i,n=n.substr(o.length)}if(r||o||n.match(/^\/\/[^@\/]+@[^@\/]+/)){var a="//"===n.substr(0,2);!a||o&&S[o]||(n=n.substr(2),this.slashes=!0)}if(!S[o]&&(a||o&&!k[o])){for(var s=-1,u=0;u<b.length;u++){var l=n.indexOf(b[u]);-1!==l&&(-1===s||s>l)&&(s=l)}var p,d;d=-1===s?n.lastIndexOf("@"):n.lastIndexOf("@",s),-1!==d&&(p=n.slice(0,d),n=n.slice(d+1),this.auth=decodeURIComponent(p)),s=-1;for(var u=0;u<v.length;u++){var l=n.indexOf(v[u]);-1!==l&&(-1===s||s>l)&&(s=l)}-1===s&&(s=n.length),this.host=n.slice(0,s),n=n.slice(s),this.parseHost(),this.hostname=this.hostname||"";var g="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!g)for(var m=this.hostname.split(/\./),u=0,O=m.length;O>u;u++){var A=m[u];if(A&&!A.match(w)){for(var C="",j=0,I=A.length;I>j;j++)C+=A.charCodeAt(j)>127?"x":A[j];if(!C.match(w)){var R=m.slice(0,u),N=m.slice(u+1),L=A.match(x);L&&(R.push(L[1]),N.unshift(L[2])),N.length&&(n="/"+N.join(".")+n),this.hostname=R.join(".");break}}}if(this.hostname.length>_?this.hostname="":this.hostname=this.hostname.toLowerCase(),!g){for(var T=this.hostname.split("."),F=[],u=0;u<T.length;++u){var M=T[u];F.push(M.match(/[^A-Za-z0-9_-]/)?"xn--"+f.encode(M):M)}this.hostname=F.join(".")}var D=this.port?":"+this.port:"",B=this.hostname||"";this.host=B+D,this.href+=this.host,g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==n[0]&&(n="/"+n))}if(!E[i])for(var u=0,O=y.length;O>u;u++){var U=y[u],H=encodeURIComponent(U);H===U&&(H=escape(U)),n=n.split(U).join(H)}var z=n.indexOf("#");-1!==z&&(this.hash=n.substr(z),n=n.slice(0,z));var $=n.indexOf("?");if(-1!==$?(this.search=n.substr($),this.query=n.substr($+1),t&&(this.query=P.parse(this.query)),n=n.slice(0,$)):t&&(this.search="",this.query={}),n&&(this.pathname=n),k[i]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var D=this.pathname||"",M=this.search||"";this.path=D+M}return this.href=this.format(),this},n.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",o=!1,i="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&u(this.query)&&Object.keys(this.query).length&&(i=P.stringify(this.query));var a=this.search||i&&"?"+i||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||k[t])&&o!==!1?(o="//"+(o||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):o||(o=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),a=a.replace("#","%23"),t+o+r+a+n},n.prototype.resolve=function(e){return this.resolveObject(o(e,!1,!0)).format()},n.prototype.resolveObject=function(e){if(c(e)){var t=new n;t.parse(e,!1,!0),e=t}var r=new n;if(Object.keys(this).forEach(function(e){r[e]=this[e]},this),r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol)return Object.keys(e).forEach(function(t){"protocol"!==t&&(r[t]=e[t])}),k[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r;if(e.protocol&&e.protocol!==r.protocol){if(!k[e.protocol])return Object.keys(e).forEach(function(t){r[t]=e[t]}),r.href=r.format(),r;if(r.protocol=e.protocol,e.host||S[e.protocol])r.pathname=e.pathname;else{for(var o=(e.pathname||"").split("/");o.length&&!(e.host=o.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==o[0]&&o.unshift(""),o.length<2&&o.unshift(""),r.pathname=o.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var i=r.pathname||"",a=r.search||"";r.path=i+a}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var s=r.pathname&&"/"===r.pathname.charAt(0),u=e.host||e.pathname&&"/"===e.pathname.charAt(0),f=u||s||r.host&&e.pathname,h=f,d=r.pathname&&r.pathname.split("/")||[],o=e.pathname&&e.pathname.split("/")||[],g=r.protocol&&!k[r.protocol];if(g&&(r.hostname="",r.port=null,r.host&&(""===d[0]?d[0]=r.host:d.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===o[0]?o[0]=e.host:o.unshift(e.host)),e.host=null),f=f&&(""===o[0]||""===d[0])),u)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,d=o;else if(o.length)d||(d=[]),d.pop(),d=d.concat(o),r.search=e.search,r.query=e.query;else if(!p(e.search)){if(g){r.hostname=r.host=d.shift();var m=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;m&&(r.auth=m.shift(),r.host=r.hostname=m.shift())}return r.search=e.search,r.query=e.query,l(r.pathname)&&l(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!d.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var y=d.slice(-1)[0],v=(r.host||e.host)&&("."===y||".."===y)||""===y,b=0,_=d.length;_>=0;_--)y=d[_],"."==y?d.splice(_,1):".."===y?(d.splice(_,1),b++):b&&(d.splice(_,1),b--);if(!f&&!h)for(;b--;b)d.unshift("..");!f||""===d[0]||d[0]&&"/"===d[0].charAt(0)||d.unshift(""),v&&"/"!==d.join("/").substr(-1)&&d.push("");var w=""===d[0]||d[0]&&"/"===d[0].charAt(0);if(g){r.hostname=r.host=w?"":d.length?d.shift():"";var m=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;m&&(r.auth=m.shift(),r.host=r.hostname=m.shift())}return f=f||r.host&&d.length,f&&!w&&d.unshift(""),d.length?r.pathname=d.join("/"):(r.pathname=null,r.path=null),l(r.pathname)&&l(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},n.prototype.parseHost=function(){var e=this.host,t=d.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{punycode:420,querystring:423}],425:[function(e,t,r){"use strict";!function(e){var t=e.prototype,r=t.parseFromString;t.parseFromString=function(e,t){if(/^\s*text\/html\s*(?:;|$)/i.test(t)){var n=document.implementation.createHTMLDocument("");return e.toLowerCase().indexOf("<!doctype")>-1?n.documentElement.innerHTML=e:n.body.innerHTML=e,n}return r.apply(this,arguments)}}(DOMParser),window.system_scroll=window.scroll,window.scroll=function(e,t){window.cxp.mobile.scrollTo(""+e,""+t),window.system_scroll(e,t)}},{}],426:[function(e,t,r){(function(e){"use strict";e.window,e.document;t.exports={convertFromLeanModel:function(e){var t=e,r=e.preferences||[];t.icons=e.icons||[];var n=r.src;if(delete r.src,t.content={src:n,type:"text/html"},t.preferences=[],Object.keys(r).forEach(function(e){t.preferences.push({name:e,value:r[e]})}),e.children){var o=e.children;t.children=[];var i=this;o.forEach(function(e){var r=i.convertFromLeanModel(e);t.children.push(r)})}return t}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],427:[function(e,t,r){"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){"use strict";if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),n=1;n<arguments.length;n++){var o=arguments[n];if(null!=o)for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}return r},writable:!0,configurable:!0})},{}],428:[function(e,t,r){"use strict";window.b$.module("gadgets.pubsub",function(){function e(e,t,r,n){"boolean"!=typeof r&&(r=!0),c.publish(e,t,r,n)}function t(e,t){c.subscribe(e,t)}function r(e,t){c.unsubscribe(e,t)}function n(e){c.flush(e)}function o(e){function t(t){return"[{"+e+"}]."+t}var r=this;return{publish:function(e,n,o,i){r.publish(t(e),n,o,i)},subscribe:function(e,n){r.subscribe(t(e),n)},unsubscribe:function(e,n){r.unsubscribe(t(e),n)},flush:function(e){r.flush(t(e))}}}var i=window.b$.Class,a=i.extend(function(){this.callbacks=[]},{queue:[],subscribe:function(e){this.callbacks.push(e)},unsubscribe:function(e){e?this.callbacks=this.callbacks.filter(function(t){return t!==e}):this.callbacks=[]},publish:function(e,t){t&&this.flush(),this.callbacks.forEach(function(t){t(e)})},flush:function(){this.queue=[]}}),s=i.extend(function(){this.channels={}},{subscribe:function(e,t){this.channels[e]||(this.channels[e]=new a),this.channels[e].subscribe(t),window.cxp.mobile.subscribe(e)},unsubscribe:function(e,t){this.channels[e]&&(this.channels[e].unsubscribe(t),window.cxp.mobile.unsubscribe(e))},publish:function(e,t,r,n){this.channels[e]&&this.channels[e].publish(t,r),t=t||{},n=n||"","SYSTEM"!==n&&window.cxp.mobile.publish(e,JSON.stringify(t),n)},flush:function(e){this.channels[e]&&this.channels[e].flush()}}),c=new s;this.name="pubsub",this.publish=e,this.subscribe=t,this.unsubscribe=r,this.flush=n,this.channel=o})},{}],429:[function(e,t,r){"use strict";window.cxp=window.cxp||{},window.mobile=window.mobile||{},window.cxp.mobile=window.mobile,window.b$=window.b$||{},window.b$.portal=window.b$.portal||{},window.cxp.mobile.render=function(t,r,n,o,i,a,s,c,u,l,p){e("./common/object-assign-polyfill"),e("./common/dom-parser-polyfill"),e("javascript-detect-element-resize"),e("./common/pubsub");var f,h=/.*AppleWebKit/i.test(navigator.userAgent);if(h){console.info("Portal Client Mobile is rendering in iOS mode");var d=e("./platforms/ios/ios-bridge");d.enable(),f=e("./platforms/ios/ios-page-renderer")}else console.info("Portal client mobile is rendering in Android mode"),f=e("./platforms/android/android-page-renderer");if(l){var g=e("./common/lean-model-converter");i=g.convertFromLeanModel(i)}window.cxp.mobile.plugins=a,window.b$.portal.loggedInUserGroup=p,i.contextItemName=c;var m=new f;m.render(document.getElementById(t),i,window.gadgets.pubsub,{portalName:c,localContextRoot:decodeURI(r),remoteContextRoot:decodeURI(n),apiRoot:decodeURI(o),staticResourcesRoot:decodeURI(r),logLevel:s,isPage:u})},window.renderWidget=window.cxp.mobile.render},{"./common/dom-parser-polyfill":425,"./common/lean-model-converter":426,"./common/object-assign-polyfill":427,"./common/pubsub":428,"./platforms/android/android-page-renderer":433,"./platforms/ios/ios-bridge":434,"./platforms/ios/ios-page-renderer":435,"javascript-detect-element-resize":418}],430:[function(e,t,r){"use strict";var n=function(e){this.size=e||1e3,this.buffer=[],this.decoratedStreams=[]};n.prototype.decorateStream=function(e){this.decoratedStreams.push(e)},n.prototype.write=function(e){this.buffer.length>=this.size&&this.buffer.shift(),this.buffer.push(e)},n.prototype.flush=function(){for(var e;e=this.buffer.shift();)this.decoratedStreams.forEach(function(t){t.write(e)})},n.prototype.clear=function(){this.buffer=[]},t.exports=n},{}],431:[function(e,t,r){"use strict";function n(e){e=e||{},this.printLevel=!!e.printLevel,this.printTimestamp=!!e.printTimestamp}n.prototype.write=function(e){function t(e,t){return Array(t+1-(e+"").length).join("0")+e}function r(){return"["+t(e.time.getHours(),2)+":"+t(e.time.getMinutes(),2)+":"+t(e.time.getSeconds(),2)+":"+t(e.time.getMilliseconds(),4)+"]"}var n,o=e.childName?e.name+"/"+e.childName:e.name;n=e.level<30?"log":e.level<40?"info":e.level<50?"warn":"error";var i=this.printTimestamp?r()+" ":"",a=this.printLevel?e.levelName.toUpperCase()+": ":"";console[n](i+a+o+": "+e.msg)},t.exports=n},{}],432:[function(e,t,r){(function(e){"use strict";
var r=e.document,n=function(){};n.prototype.write=function(e){var t=r.createElement("IFRAME");t.setAttribute("src","log://?type="+e.levelName+"&msg="+e.msg+" ("+e.time+")"),r.documentElement.appendChild(t),t.parentNode.removeChild(t),t=null},t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],433:[function(e,t,r){"use strict";var n=e("../../render/page-renderer"),o=e("../../logging/console-plain-log-stream"),i=function(){n.call(this)};i.prototype=Object.create(n.prototype),i.prototype._createLogStreams=function(e){return[{level:e,stream:new o}]},i.prototype._renderForPlatform=function(e,t,r){t.start(e,r).then(function(e){var t="Item tree rendered in "+e.time+"ms",r=document.getElementsByTagName("html")[0],n=function(){window.cxp.mobile.resize(r.scrollHeight)};window.addResizeListener(r,n),console.log(t),window.cxp.mobile.itemLoaded()})["catch"](function(e){console.log(e)})},t.exports=i},{"../../logging/console-plain-log-stream":431,"../../render/page-renderer":438}],434:[function(e,t,r){(function(e){"use strict";var r=e.window,n=e.document;t.exports={enable:function(){function e(e){return encodeURIComponent(e).replace(/[!()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16)}).replace(/[']/g,function(e){return"\\'"})}function t(e){var t=n.createElement("IFRAME");t.setAttribute("src",e),n.documentElement.appendChild(t),t.parentNode.removeChild(t),t=null}function o(e){t("bb-loaded://?time="+e)}function i(){t("bb-reload://")}function a(e,r){t("bb-resize://?w="+e+"&h="+r)}function s(e,r){t("bb-scroll://?x="+e+"&y="+r)}function c(r,n,o){t("bb-publish://?event="+e(r)+"&type="+e(o)+"&payload="+e(n))}function u(r){t("bb-subscribe://?event="+e(r))}function l(r){t("bb-unsubscribe://?event="+e(r))}function p(){if(0!==arguments.length){var r=[];Array.prototype.push.apply(r,arguments);for(var n=r.shift(),o=r.shift(),i=r,a=0;a<i.length;a++)i[a]=e(i[a]);t("bb-plugin://?plugin="+e(n)+"&method="+e(o)+"&params="+i.join("&params="))}}function f(e,t,n,o,i){for(var a="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,r="x"==e?t:3&t|8;return r.toString(16)}),s=[e,t,a].join("."),c=function(){r.gadgets.pubsub.unsubscribe("plugin.success."+s,u),r.gadgets.pubsub.unsubscribe("plugin.error."+s,l)},u=function(e){e.keep||c(),o&&o(e.data)},l=function(e){e.keep||c(),i&&i(e.data)},f=0;f<n.length;f++){var h=n[f];"object"==typeof h&&(n[f]=JSON.stringify(h))}return r.gadgets.pubsub.subscribe("plugin.success."+s,u),r.gadgets.pubsub.subscribe("plugin.error."+s,l),p.apply(r.cxp.mobile,[e,t,a].concat(n)),a}r.XMLHttpRequest&&!function(e){XMLHttpRequest.prototype.send=function(t){this.setRequestHeader("bb.nsurlrequest.webview","true"),e.call(this,t)}}(XMLHttpRequest.prototype.send),r.cxp.mobile={loaded:o,reload:i,resizeTo:a,scrollTo:s,publish:c,subscribe:u,unsubscribe:l,callPlugin:f}}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],435:[function(e,t,r){"use strict";var n=e("../../render/page-renderer"),o=e("../../logging/console-plain-log-stream"),i=e("../../logging/iframe-bridge-log-stream"),a=e("../../logging/buffered-log-stream"),s=function(){n.call(this)};s.prototype=Object.create(n.prototype),s.prototype._createLogStreams=function(e){var t=new o({printTimestamp:!0,printLevel:!0}),r=new a;r.decorateStream(t),window.bufferedLogStream=r;var n=new i;return[{level:e,stream:n},{level:e,stream:t},{level:e,stream:r}]},s.prototype._renderForPlatform=function(e,t,r){var n=document.getElementsByTagName("html")[0];window.addResizeListener(n,function(){window.cxp.mobile.resizeTo(n.scrollWidth,n.scrollHeight)}),t.start(e,r).then(function(e){window.cxp.mobile.loaded(e.time),window.cxp.mobile.resizeTo(n.scrollWidth,n.scrollHeight);var t="Widget-Engine: Item tree rendered in "+e.time+"ms";console.log(t)})["catch"](function(e){console.log(e)})},t.exports=s},{"../../logging/buffered-log-stream":430,"../../logging/console-plain-log-stream":431,"../../logging/iframe-bridge-log-stream":432,"../../render/page-renderer":438}],436:[function(e,t,r){"use strict";t.exports=function(e){return e=e||[],{name:"add-feature-plugin",postRead:function(t){return 0===e.length?t:(Array.isArray(t.features)||(t.features=[]),e.forEach(function(e){var r=t.features.some(function(t){return t.name===e});r||t.features.push({name:e,required:!1})}),t)}}}},{}],437:[function(e,t,r){"use strict";t.exports=function(){return{name:"expose-children-plugin",preRender:function(e,t,r){return e.children=r.children?r.children.map(function(e){return{id:e.id,name:e.name}}):[],e}}}},{}],438:[function(e,t,r){(function(r){"use strict";var n=r.window||{};r.window||(r.window=n);var o=e("cxp-web-apis"),i=e("../plugins/add-feature-plugin"),a=e("../plugins/expose-children-plugin"),s="bbCSRF",c=s,u=function(e){};u.prototype.render=function(e,t,r,n){n=n||{};var s=n.logLevel||"warn",u=n.localContextRoot||"",l=n.remoteContextRoot||"",p=n.apiRoot||"",f=n.staticResourcesRoot||"",h=n.portalName||"anonymous-portal",d=n.isPage||!1,g=o.createConfiguration({logStreams:this._createLogStreams(s)});g.set("compat",!0),g.set("fullConfigReplacement",!0),g.set("portalName",h),g.set("contextRoot",u),g.set("remoteContextRoot",l),g.set("apiRoot",p),g.set("staticResourcesRoot",f);var m=null;m&&g.set("csrfToken",{name:c,value:m});var y=o.getRenderer(g);y.addPlugin(a());var v={name:"cxp",config:g,render:y,model:o.getModel(g)};y.addPlugin(i([v.name])),y.addFeature(v),y.addFeature(r);var b=t;if(d){b=t.children;for(var _=0;_<b.length;_++)b[_].contextItemName=t.contextItemName}this._renderForPlatform(b,y,e)},u.prototype._createLogStreams=function(e){throw new Error("PageRenderer#_createLogStreams must be overridden.")},u.prototype._renderForPlatform=function(e,t,r){throw new Error("PageRenderer#_renderForPlatform must be overridden.")},t.exports=u}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../plugins/add-feature-plugin":436,"../plugins/expose-children-plugin":437,"cxp-web-apis":391}]},{},[429]);
//# sourceMappingURL=web-sdk-mobile.min.js.map
